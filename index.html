<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unlimited Vacation Club – 3 Way Pitch</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />

  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #dde6ff, #f5f7ff);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      color: #1a1a1a;
      font-size: 16px;
      min-height: 100vh;
      overflow-y: auto;
    }

    img {
      max-width: 100%;
      height: auto;
    }

    .page {
      width: 100%;
      max-width: 1200px;
      background: #ffffff;
      border-radius: 32px;
      box-shadow: 0 18px 60px rgba(0, 0, 0, 0.16);
      padding: 18px 24px 22px;
      position: relative;
      display: flex;
      flex-direction: column;
      margin: 16px;
    }

    .utility-bar {
      position: absolute;
      top: 18px;
      right: 24px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      z-index: 25;
    }

    .utility-tab {
      border: none;
      background: #0f1b3d;
      color: #fff;
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      box-shadow: 0 12px 30px rgba(15, 40, 92, 0.35);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .utility-tab span {
      pointer-events: none;
    }

    .utility-menu {
      margin-top: 8px;
      background: #ffffff;
      border-radius: 18px;
      box-shadow: 0 20px 50px rgba(16, 38, 73, 0.25);
      padding: 14px;
      width: 210px;
      display: none;
      flex-direction: column;
      gap: 8px;
    }

    .utility-menu.active {
      display: flex;
    }

    .close-pitch-btn {
      position: absolute;
      top: 18px;
      right: 80px;
      width: 36px;
      height: 36px;
      border: none;
      background: rgba(210, 50, 50, 0.9);
      color: #fff;
      border-radius: 50%;
      font-size: 20px;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(210, 50, 50, 0.35);
      transition: transform 0.2s ease, background 0.2s ease;
      z-index: 26;
    }

    .close-pitch-btn:hover {
      background: rgba(180, 30, 30, 1);
      transform: scale(1.08);
    }

    @media (max-width: 600px) {
      .close-pitch-btn {
        top: 12px;
        right: 60px;
        width: 32px;
        height: 32px;
        font-size: 18px;
      }
    }

    .utility-menu-title {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #6b7b9c;
      letter-spacing: 0.08em;
    }

    .utility-action {
      border: none;
      background: #0f1b3d;
      color: #fff;
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      text-align: left;
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      box-shadow: 0 6px 16px rgba(15, 40, 92, 0.25);
    }

    .utility-action:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(15, 40, 92, 0.35);
      background: #132a5c;
    }

    .lang-pill-group {
      display: inline-flex;
      background: rgba(255,255,255,0.7);
      border: 1px solid rgba(16,38,73,0.12);
      border-radius: 999px;
      overflow: hidden;
      box-shadow: 0 6px 16px rgba(15, 40, 92, 0.08);
    }

    .lang-pill {
      border: none;
      background: transparent;
      padding: 6px 12px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      color: #1f335b;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .lang-pill.active {
      background: #102649;
      color: #fff;
    }

    .price-checker-panel {
      position: absolute;
      top: 110px;
      right: 24px;
      width: min(320px, 90vw);
      background: #ffffff;
      border-radius: 22px;
      box-shadow: 0 24px 60px rgba(16, 38, 73, 0.32);
      padding: 16px;
      z-index: 960;
      transform-origin: top right;
      transform: scaleY(0);
      opacity: 0;
      pointer-events: none;
      transition: transform 0.25s ease, opacity 0.25s ease;
    }

    .price-checker-panel.active {
      opacity: 1;
      transform: scaleY(1);
      pointer-events: auto;
    }

    .pc-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 12px;
    }

    .pc-title {
      font-size: 16px;
      font-weight: 600;
      color: #102649;
    }

    .pc-subtitle {
      font-size: 12px;
      color: #6b7b9c;
    }

    .pc-close {
      border: none;
      background: rgba(16, 38, 73, 0.08);
      width: 32px;
      height: 32px;
      border-radius: 999px;
      font-size: 18px;
      cursor: pointer;
    }

    .pc-row {
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 8px;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(16, 38, 73, 0.08);
    }

    .pc-row:last-child {
      border-bottom: none;
    }

    .pc-price {
      font-size: 16px;
      font-weight: 600;
      color: #102649;
      justify-self: flex-end;
    }

    .pc-tag {
      font-size: 11px;
      color: #6b7b9c;
    }

    .pc-row.highlight {
      background: rgba(16, 38, 73, 0.05);
      border-radius: 14px;
      padding: 10px;
      margin: 6px 0 0;
    }

    .pc-section {
      border: 1px solid rgba(16,38,73,0.09);
      border-radius: 18px;
      padding: 14px;
      margin-bottom: 14px;
      background: linear-gradient(180deg, #f9fbff, #eef2ff);
    }

    .pc-section:last-of-type {
      margin-bottom: 0;
    }

    .pc-section-head {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      align-items: center;
      margin-bottom: 8px;
    }

    .pc-section-title {
      font-size: 15px;
      font-weight: 700;
      color: #102649;
    }

    .pc-section-meta {
      font-size: 12px;
      color: #6b7b9c;
    }

    .pc-section-uvc {
      font-size: 18px;
      font-weight: 700;
      color: #0c3466;
      text-align: right;
    }

    .pc-row-logo {
      width: 48px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .pc-row-logo img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .pc-note {
      font-size: 11px;
      color: #6b7b9c;
      text-align: left;
      margin-top: 10px;
    }

    .home-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(125deg, rgba(15,24,50,0.9), rgba(28,52,112,0.85));
      display: none;
      align-items: center;
      justify-content: center;
      padding: 24px;
      z-index: 1200;
      backdrop-filter: blur(6px);
    }

    .home-screen.active {
      display: flex;
    }

    .home-card {
      width: min(1100px, 95vw);
      background: #ffffff;
      border-radius: 28px;
      padding: 28px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.35);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .home-left h1 {
      margin: 0 0 6px;
      font-size: 28px;
      color: #102649;
    }

    .home-hero {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 18px;
      padding: 20px;
    }

    .home-hero img {
      max-width: 280px;
      width: 100%;
      filter: drop-shadow(0 20px 40px rgba(0,0,0,0.2));
    }

    .home-hero h1 {
      margin: 0;
      font-size: 28px;
      color: #102649;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .home-hero span {
      font-size: 14px;
      color: #4a5672;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }
    .primary-btn {
      border: none;
      background: #102649;
      color: #fff;
      padding: 14px 22px;
      border-radius: 16px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 16px 40px rgba(15,40,92,0.35);
    }

    .start-panel {
      margin: 10px 0 16px;
    }

    .start-ready {
      background: #f4f6ff;
      border-radius: 16px;
      border: 1px solid #dbe2fa;
      padding: 16px;
      font-size: 13px;
      color: #1f335b;
      line-height: 1.5;
    }

    .sale-overlay {
      position: fixed;
      inset: 0;
      background: rgba(8,14,35,0.55);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1500;
      padding: 20px;
    }

    .sale-overlay.active {
      display: flex;
    }

    .sale-card {
      width: min(480px, 95vw);
      background: #fff;
      border-radius: 22px;
      padding: 24px;
      box-shadow: 0 24px 60px rgba(7,20,45,0.35);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .sale-card h3 {
      margin: 0;
      font-size: 20px;
      color: #0e2148;
    }

    .sale-card p {
      margin: 0;
      font-size: 14px;
      color: #4a5672;
    }

    .sale-choice-buttons {
      display: flex;
      gap: 12px;
    }

    .sale-choice-buttons button {
      flex: 1;
      border: none;
      border-radius: 14px;
      padding: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      color: #fff;
    }

    .sale-choice-buttons button[data-choice="win"] { background: #0f6b4a; }
    .sale-choice-buttons button[data-choice="loss"] { background: #d36b24; }

    .sale-choice.hidden {
      display: none;
    }

    .sale-staff {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 14px;
    }

    .sale-staff-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
    }

    .sale-staff-grid label {
      font-size: 12px;
      font-weight: 600;
      color: #0e2148;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .sale-staff-grid input {
      width: 100%;
      border: 1px solid #ccd5e8;
      border-radius: 12px;
      padding: 10px;
      font-size: 14px;
      background: #fff;
    }


    .sale-staff-hint {
      font-size: 12px;
      color: #4a5672;
    }

    .sale-staff-error {
      font-size: 12px;
      color: #d4444f;
      min-height: 16px;
    }

    .sale-form {
      display: none;
      flex-direction: column;
      gap: 12px;
    }

    .sale-form.active {
      display: flex;
    }

    .sale-field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .sale-field label {
      font-size: 13px;
      color: #0e2148;
      font-weight: 600;
    }

    .sale-field select,
    .sale-field textarea {
      border: 1px solid #ccd5e8;
      border-radius: 12px;
      padding: 10px;
      font-size: 14px;
      font-family: inherit;
    }

    .sale-field textarea {
      min-height: 80px;
      resize: vertical;
    }

    .sale-actions {
      display: flex;
      gap: 10px;
    }

    .sale-btn {
      flex: 1;
      border: none;
      border-radius: 14px;
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      color: #fff;
    }

    .sale-btn.primary { background: #0f2f72; }
    .sale-btn.secondary { background: #adb5c7; color: #0a1a32; }

    .sale-stats {
      display: flex;
      gap: 16px;
      font-size: 13px;
      color: #4a5672;
    }

    .sale-stats div {
      background: #f4f6fb;
      border-radius: 12px;
      padding: 8px 12px;
      flex: 1;
      text-align: center;
    }

    .sale-stats strong {
      display: block;
      font-size: 18px;
      color: #0e2148;
    }

    .sales-report {
      margin-top: 14px;
      border: 1px solid #dfe3fb;
      border-radius: 16px;
      padding: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    .sales-report span {
      font-size: 13px;
      color: #1f335b;
    }

    .sales-report button {
      border: none;
      background: #122e62;
      color: #fff;
      padding: 8px 14px;
      border-radius: 12px;
      font-size: 13px;
      cursor: pointer;
    }

    .sales-report button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .sales-report .reset-btn {
      background: #b83232;
    }

    .relock-btn {
      border: 1px solid #c5d0f0;
      background: #fff;
      color: #102649;
      border-radius: 12px;
      padding: 8px 14px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      align-self: flex-start;
      display: none;
    }

    .home-config:not(.locked) .relock-btn {
      display: inline-flex;
    }

    .home-config {
      border: 1px solid #dfe6fb;
      border-radius: 24px;
      padding: 20px;
      background: linear-gradient(180deg, #f8faff, #eef2ff);
      position: relative;
    }

    .home-config > * {
      position: relative;
      z-index: 1;
    }

    .config-head {
      display: flex;
      justify-content: space-between;
      gap: 14px;
      align-items: flex-end;
      margin-bottom: 16px;
    }

    .config-head h3 {
      margin: 0;
      font-size: 18px;
      color: #102649;
    }

    .config-head p {
      margin: 4px 0 0;
      font-size: 12px;
      color: #6b7b9c;
    }

    .pin-form {
      display: flex;
      gap: 8px;
    }

    .pin-form input {
      border: 1px solid #c5d0f0;
      border-radius: 12px;
      padding: 8px 10px;
      width: 110px;
      font-size: 14px;
    }

    .pin-form button {
      border: none;
      background: #102649;
      color: #fff;
      border-radius: 12px;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: 600;
    }

    .pin-status {
      font-size: 12px;
      margin-top: 6px;
      color: #d4444f;
    }

    .config-body {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .config-properties {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
    }

    .config-property {
      border: 1px solid #d0d9fb;
      border-radius: 18px;
      padding: 14px;
      background: #fff;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .config-property-title {
      font-size: 15px;
      font-weight: 700;
      color: #102649;
      margin: 0 0 4px;
    }

    .config-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }

    .config-field {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .config-field label {
      font-size: 12px;
      color: #4a5672;
      font-weight: 600;
    }

    .config-field input {
      border: 1px solid #c5d0f0;
      border-radius: 12px;
      padding: 8px 10px;
      font-size: 14px;
      background: #fff;
    }

    .staff-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }

    .staff-column span {
      font-size: 12px;
      font-weight: 600;
      color: #4a5672;
      margin-bottom: 4px;
      display: inline-block;
    }

    .staff-column textarea {
      border: 1px solid #c5d0f0;
      border-radius: 12px;
      padding: 10px;
      min-height: 110px;
      resize: vertical;
      font-size: 13px;
      font-family: inherit;
      background: #fff;
    }

    .config-field.full {
      grid-column: 1 / -1;
    }

    .config-save-btn {
      margin-top: 4px;
      padding: 10px 16px;
      border-radius: 999px;
      border: none;
      background: #1f7c4d;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
      align-self: flex-start;
    }

    .config-save-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .config-save-btn:not(:disabled):hover {
      background: #17603b;
    }

    .config-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
    }

    .config-summary-item {
      background: #fff;
      border-radius: 16px;
      padding: 10px 12px;
      border: 1px solid #dfe3fb;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
      color: #1f335b;
    }

    .config-locked-message {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 30px 20px;
      gap: 12px;
      color: #1f335b;
    }

    .config-locked-message .lock-icon {
      font-size: 28px;
    }

    .home-config.locked::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(240,243,255,0.92);
      border-radius: 24px;
      pointer-events: none;
      z-index: 0;
    }

    .home-config.locked .config-body,
    .home-config.locked .config-summary {
      display: none;
    }

    .home-config.locked .config-locked-message {
      display: flex;
    }

    .lang-callout {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .home-config.locked .lang-callout {
      display: none;
    }

    .analytics-panel {
      margin-top: 18px;
      border: 1px solid #dfe3fb;
      border-radius: 20px;
      padding: 18px;
      background: #ffffff;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .analytics-header {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: center;
      border-bottom: 1px solid #eef1fb;
      padding-bottom: 12px;
    }

    .analytics-header img {
      width: 120px;
      height: auto;
    }

    .analytics-names {
      flex: 1;
      font-size: 12px;
      font-weight: 600;
      color: #1f335b;
    }

    .analytics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 14px;
    }

    .metric-card {
      border: 1px solid #e2e7fb;
      border-radius: 16px;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      background: linear-gradient(180deg, #f8faff, #f2f5ff);
    }

    .metric-card span {
      font-size: 12px;
      color: #5a678a;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .metric-card strong {
      font-size: 22px;
      color: #0f2654;
    }

    .metric-card small {
      font-size: 11px;
      color: #6b7b9c;
    }

    .period-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }

    .period-card {
      border: 1px solid #e6eafb;
      border-radius: 14px;
      padding: 10px 12px;
      background: #fdfdff;
    }

    .period-card span {
      font-size: 11px;
      color: #5e6b8f;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .period-card strong {
      display: block;
      font-size: 18px;
      color: #0f2654;
      margin-top: 4px;
    }

    .ranking-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 14px;
    }

    .ranking-card {
      border: 1px solid #e0e5fb;
      border-radius: 16px;
      padding: 12px;
      background: #fff;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .ranking-card h4 {
      margin: 0;
      font-size: 14px;
      color: #0f2654;
    }

    .ranking-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .ranking-list li {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid #eef1ff;
      background: #f9faff;
    }

    .ranking-list .ranking-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      color: #0e2148;
    }

    .ranking-list small {
      font-size: 11px;
      color: #556180;
    }

    .top-card {
      border: 1px solid #dfe3fb;
      border-radius: 16px;
      padding: 12px;
      background: linear-gradient(180deg, #f7f9ff, #ecf1ff);
    }

    .top-card h4 {
      margin: 0;
      font-size: 13px;
      color: #0f2654;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .top-card .top-name {
      font-size: 18px;
      color: #0e2148;
      font-weight: 600;
      margin-top: 4px;
    }

    .top-card .top-amount {
      font-size: 14px;
      color: #4d5a7b;
    }

    .comparison-card {
      border: 1px solid #dfe3fb;
      border-radius: 16px;
      padding: 12px;
      background: #fff;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .comparison-card h4 {
      margin: 0;
      font-size: 14px;
      color: #0f2654;
    }

    .comparison-row {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: #4a5672;
    }

    .comparison-bar {
      flex: 1;
      height: 10px;
      background: #eef1ff;
      border-radius: 999px;
      overflow: hidden;
    }

    .comparison-fill {
      height: 100%;
      background: linear-gradient(90deg, #274b91, #5d85ff);
      width: 0%;
      transition: width 0.4s ease;
    }

    .comparison-row strong {
      font-size: 13px;
      color: #0f2654;
    }

    @media (max-width: 600px) {
      .utility-bar {
        top: 12px;
        right: 14px;
      }
      .price-checker-panel {
        right: 14px;
        width: calc(100% - 28px);
      }
    }

    /* ------------ HEADER SUPERIOR ------------ */

    .top {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      margin-bottom: 4px;
    }

    .uvc-box {
      text-align: center;
    }

    .uvc-logo {
      max-width: 360px;
      max-height: 105px;
      width: 100%;
      object-fit: contain;
      margin: 0 auto;
      display: block;
    }

    .uvc-subtitle {
      display: none;
    }

    /* ----------- TÍTULOS DE SECCIÓN ----------- */

    /* ----------- CONTENEDOR 3 COLUMNAS ----------- */

    .columns {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      column-gap: 24px;
      flex: 1;
      align-items: stretch;
    }

    .col {
      position: relative;
      padding: 8px 4px 8px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    /* líneas verticales columna central */
    .col:nth-child(2)::before,
    .col:nth-child(2)::after {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      width: 1px;
      background: linear-gradient(
        to bottom,
        rgba(184,196,224,0),
        rgba(184,196,224,0.9),
        rgba(184,196,224,0)
      );
    }

    .col:nth-child(2)::before {
      left: -12px;
    }

    .col:nth-child(2)::after {
      right: -12px;
    }

    .col-inner {
      border-radius: 18px;
      padding: 18px 16px 16px;
      background: linear-gradient(
        to bottom,
        rgba(248,250,255,1),
        rgba(248,250,255,0.9),
        rgba(242,245,255,0.75)
      );
      border: 1px solid #d8e0f0;
      height: 100%;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(13, 37, 92, 0.08);
    }

    .col-title {
      text-align: center;
      font-size: 14px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #1f335b;
      margin-bottom: 14px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      justify-content: center;
      width: 100%;
    }

    .uvc-title {
      padding-bottom: 4px;
    }

    .uvc-title-ring {
      width: min(100%, 320px);
      height: 78px;
      border-radius: 999px;
      border: 1px solid rgba(12, 31, 66, 0.2);
      background: #ffffff;
      box-shadow: 0 10px 24px rgba(12, 29, 66, 0.12);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 26px;
      overflow: hidden;
    }

    .uvc-title-ring img {
      width: 105%;
      height: 100%;
      object-fit: contain;
      transform: translateX(1%);
    }

    .col-title-link {
      background: transparent;
      border: none;
      padding: 0;
      width: 100%;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .col-title-link:focus-visible {
      outline: 2px solid #102649;
      outline-offset: 4px;
    }

    .col-title-button {
      background: transparent;
      border: none;
      padding: 0;
      width: 100%;
      cursor: pointer;
      color: inherit;
      font: inherit;
    }

    .col-title-button:focus-visible {
      outline: 2px dashed rgba(16, 38, 73, 0.5);
      outline-offset: 4px;
    }

    @media (max-width: 600px) {
      .uvc-title-ring,
      .uexperience-banner,
      .worldwide-ring {
        width: 92%;
      }

      .uvc-title-ring,
      .uexperience-banner,
      .worldwide-ring {
        height: 64px;
        padding: 8px 16px;
      }
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border: 0;
    }

    .uexperience-banner {
      width: min(100%, 330px);
      height: 80px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 28px;
      border-radius: 999px;
      border: 1px solid rgba(20, 42, 92, 0.22);
      background: linear-gradient(130deg, #fef8ff, #eff4ff);
      box-shadow: 0 17px 34px rgba(13, 32, 74, 0.19);
      overflow: hidden;
    }

    .uex-logo {
      width: 110%;
      height: auto;
      object-fit: contain;
      filter: drop-shadow(0 12px 18px rgba(12, 32, 70, 0.15));
      transform: translateX(1%);
    }

    .worldwide-title {
      display: flex;
      justify-content: center;
      margin-bottom: 12px;
    }

    .worldwide-ring {
      width: min(100%, 320px);
      height: 78px;
      border-radius: 999px;
      border: 1px solid rgba(14, 38, 83, 0.25);
      background: linear-gradient(135deg, #f7fbff, #ecf3ff);
      box-shadow: 0 12px 30px rgba(10, 32, 64, 0.18);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 10px 26px;
    }

    .worldwide-icon {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(0,67,115,0.2));
      border: 1px solid rgba(16, 54, 104, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .worldwide-icon svg {
      width: 68%;
      height: 68%;
      display: block;
    }

    .worldwide-icon circle,
    .worldwide-icon path {
      stroke: rgba(8, 40, 82, 0.9);
      fill: none;
      stroke-width: 1.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .worldwide-wordmark {
      font-size: 14px;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: #0d264e;
      white-space: nowrap;
    }

    .divider {
      height: 1px;
      margin: 10px 0;
      background: linear-gradient(90deg, transparent, #cbd3e6, transparent);
    }

    /* ---- COLUMNA 1: ALL INCLUSIVE RESORTS ---- */

    .first-layout {
      display: grid;
      grid-template-columns: 190px minmax(0, 1fr);
      column-gap: 12px;
      flex: 1;
      align-items: stretch;
    }

    .logo-stack {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 8px;
    }

    .logo-stack img {
      max-width: 190px;
      max-height: 80px;
      object-fit: contain;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .benefits {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      font-size: 18px;
      line-height: 1.5;
      text-align: left;
    }

    .benefits li {
      margin: 0;
      font-weight: 500;
      color: #111111;
    }

    .logo-stack img:hover {
      transform: scale(1.06);
      box-shadow: 0 12px 26px rgba(0,0,0,0.22);
    }

    .allinclusive-notes {
      font-size: 11px;
      color: #7a869f;
      text-align: center;
      margin-top: 10px;
    }

    .promo-launch {
      margin-top: 18px;
      width: 100%;
      border: none;
      border-radius: 16px;
      background: linear-gradient(135deg, #132f52, #1c6fa9);
      color: #fff;
      font-size: 13px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      padding: 12px 14px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 16px 30px rgba(10, 32, 64, 0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .promo-launch:hover {
      transform: translateY(-2px);
      box-shadow: 0 20px 36px rgba(10, 32, 64, 0.45);
    }

    /* ---- COLUMNA 2: WORLDWIDE ---- */

    .worldwide-inner {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .center-list {
      list-style: none;
      padding: 0;
      margin: 0 0 6px;
      font-size: 13px;
      text-align: center;
    }

    .center-list li {
      margin-bottom: 3px;
    }

    .logo-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px 16px;
      justify-items: center;
      margin-top: 8px;
    }

    .logo-grid img {
      max-width: 140px;
      max-height: 75px;
      object-fit: contain;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .logo-grid img:hover {
      transform: scale(1.06);
      box-shadow: 0 12px 26px rgba(0,0,0,0.22);
    }

    .hyatt-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      margin-top: 18px;
      font-size: 13px;
      color: #1f335b;
      font-weight: 500;
    }

    .hyatt-logo {
      max-width: 110px;
      max-height: 110px;
      object-fit: contain;
      cursor: pointer;
    }

    .hyatt-text div {
      line-height: 1.3;
    }

    .worldwide-inner .center-list {
      margin-top: 18px;
      margin-bottom: 12px;
    }

    .worldwide-inner .logo-grid {
      margin-top: 18px;
    }

    .worldwide-inner .hyatt-row {
      margin-top: 26px;
    }

    .worldwide-notes {
      margin-top: auto;
      font-size: 11px;
      color: #7a869f;
      text-align: center;
    }

    .worldwide-notes p {
      margin: 2px 0;
    }

    /* ---- COLUMNA 3: U EXPERIENCE ---- */

    .section-label {
      text-align: center;
      font-size: 13px;
      font-weight: 600;
      margin: 4px 0 8px;
    }

    .note {
      font-size: 10.5px;
      text-align: center;
      margin-top: auto;
      color: #687a97;
    }

    .simulator-panel {
      margin: 32px 0 20px;
      background: linear-gradient(180deg, rgba(8,20,43,0.9), rgba(13,30,62,0.85));
      border-radius: 32px;
      padding: 22px 24px 28px;
      color: #fff;
      box-shadow: 0 30px 70px rgba(8,20,43,0.4);
    }

    .simulator-panel.flash {
      animation: breakevenPulse 1s ease;
    }

    .simulator-head {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 18px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .simulator-head img {
      width: 52px;
      height: 52px;
      object-fit: contain;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,0.35));
    }

    .simulator-head h3 {
      margin: 0;
      font-size: 18px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }

    .simulator-head span {
      font-size: 12px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
    }

    .simulator-tabs {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 18px;
    }

    .simulator-tabs button {
      border: none;
      background: rgba(255,255,255,0.08);
      color: rgba(255,255,255,0.8);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-size: 11px;
      padding: 10px 18px;
      border-radius: 999px;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .simulator-tabs button.active {
      background: linear-gradient(135deg, #21b486, #2b74ec);
      color: #0a1124;
      font-weight: 600;
      box-shadow: 0 12px 30px rgba(33,180,134,0.35);
    }

    .simulator-view {
      display: none;
    }

    .simulator-view.active {
      display: block;
    }

    .breakeven-section {
      margin: 36px 0 22px;
      padding: 2px;
      border-radius: 32px;
      background: linear-gradient(120deg, rgba(15, 90, 150, 0.25), rgba(41, 163, 125, 0.2));
      position: relative;
      overflow: hidden;
    }

    .breakeven-section::before {
      content: '';
      position: absolute;
      inset: 15% auto auto 65%;
      width: 320px;
      height: 320px;
      background: radial-gradient(circle, rgba(255,255,255,0.25), transparent 60%);
      filter: blur(2px);
      pointer-events: none;
      opacity: 0.5;
    }

    .breakeven-section.flash .breakeven-card {
      animation: breakevenPulse 1.2s ease;
    }

    @keyframes breakevenPulse {
      0% { box-shadow: 0 0 0 rgba(47, 130, 187, 0.0); }
      40% { box-shadow: 0 0 0 12px rgba(47, 130, 187, 0.18); }
      100% { box-shadow: 0 0 0 rgba(47, 130, 187, 0.0); }
    }

    .breakeven-card {
      background: linear-gradient(135deg, #fcfdff, #f1f6ff);
      border-radius: 28px;
      padding: 28px 28px 30px;
      box-shadow: 0 25px 70px rgba(14, 33, 79, 0.18);
      display: flex;
      flex-direction: column;
      gap: 22px;
      position: relative;
      z-index: 1;
    }

    .breakeven-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 16px;
      align-items: flex-start;
    }

    .breakeven-headline {
      flex: 1;
      min-width: 260px;
    }

    .breakeven-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .breakeven-header h2 {
      margin: 0;
      font-size: 22px;
      color: #0f1b3d;
    }

    .breakeven-header p {
      margin: 4px 0 0;
      color: #54638a;
      font-size: 14px;
    }


    .breakeven-grid {
      display: grid;
      grid-template-columns: minmax(320px, 1fr) minmax(380px, 1fr);
      gap: 32px;
      align-items: stretch;
    }

    @media (max-width: 1024px){
      .breakeven-grid {
        grid-template-columns: 1fr;
      }
    }

    .breakeven-form {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .breakeven-form-group {
      border: 1px solid rgba(15, 40, 92, 0.08);
      border-radius: 18px;
      padding: 14px 16px;
      background: #f9fbff;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 12px 16px;
    }

    .breakeven-form-group h4 {
      grid-column: 1 / -1;
      margin: 2px 0 6px;
      font-size: 13px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #5c6b8f;
    }

    .breakeven-form label {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 12px;
      font-weight: 600;
      color: #1f335b;
    }

    .breakeven-form input {
      border: 1px solid #cdd6f0;
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 15px;
      background: #fff;
    }

    .breakeven-inline-note {
      grid-column: 1 / -1;
      font-size: 12px;
      color: #5b6b8f;
    }

    .breakeven-results {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .breakeven-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 14px;
    }

    .breakeven-stats div {
      background: linear-gradient(160deg, #132a5c, #0d1c3d);
      border-radius: 18px;
      padding: 14px 16px;
      color: #fff;
      display: flex;
      flex-direction: column;
      gap: 4px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);
    }

    .breakeven-stats span {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.75);
    }

    .breakeven-stats strong {
      font-size: 20px;
      font-weight: 600;
    }

    .breakeven-incentives {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }

    .incentive-card {
      background: #ffffff;
      border-radius: 16px;
      padding: 12px 14px;
      box-shadow: 0 10px 24px rgba(12,36,68,0.15);
      border: 1px solid rgba(15,40,92,0.08);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .incentive-card span {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #63708f;
    }

    .incentive-card strong {
      font-size: 22px;
      color: #0f1b3d;
    }

    .breakeven-roi {
      margin-top: 12px;
      background: rgba(6,18,46,0.9);
      color: #fff;
      border-radius: 24px;
      padding: 16px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
      align-items: center;
      box-shadow: 0 18px 40px rgba(6, 18, 46, 0.4);
    }

    .roi-summary {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .roi-summary span {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.7);
    }

    .roi-summary strong {
      font-size: 22px;
      font-weight: 700;
    }

    .breakeven-roi-note {
      grid-column: 1 / -1;
      margin: 4px 0 0;
      font-size: 13px;
      color: rgba(255,255,255,0.8);
    }

    .breakeven-visuals {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .breakeven-chart {
      position: relative;
      background: radial-gradient(circle at 20% 0%, rgba(255,255,255,0.25), transparent 55%), linear-gradient(135deg, #0a1637, #0f6c8f 55%, #2ad3b9);
      border-radius: 28px;
      padding: 26px 26px 38px;
      min-height: 260px;
      overflow: hidden;
      color: #fff;
      box-shadow: 0 30px 80px rgba(6,15,30,0.55);
    }

    .breakeven-chart::before,
    .breakeven-chart::after {
      content: '';
      position: absolute;
      inset: 30px 22px 60px;
      border-radius: 18px;
      border: 1px dashed rgba(255,255,255,0.15);
      pointer-events: none;
    }

    .breakeven-chart::after {
      inset: 60px 22px 30px;
      border-style: solid;
      border-width: 0 0 1px 0;
    }

    .breakeven-bars {
      position: relative;
      display: flex;
      align-items: flex-end;
      gap: 16px;
      height: 170px;
      margin-top: 16px;
    }

    .be-bar {
      flex: 1;
      background: linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.15));
      border-radius: 16px 16px 6px 6px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 10px;
      min-width: 46px;
      position: relative;
      box-shadow: 0 14px 32px rgba(0,0,0,0.25);
      transition: height 0.4s ease;
    }

    .be-bar strong {
      font-size: 12px;
      line-height: 1.25;
      color: #0b1c3a;
    }

    .be-bar span {
      font-size: 11px;
      opacity: 0.7;
      margin-top: 4px;
      color: #0b1c3a;
    }

    .be-bar.hit {
      box-shadow: 0 0 28px rgba(255,255,255,0.85), 0 18px 34px rgba(4, 18, 38, 0.45);
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.4));
    }

    .breakeven-marker {
      position: absolute;
      left: 18px;
      right: 18px;
      border-top: 3px solid rgba(255,255,255,0.95);
      box-shadow: 0 -2px 12px rgba(255,255,255,0.5);
      display: flex;
      justify-content: flex-end;
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding-top: 4px;
      color: rgba(255,255,255,0.95);
      pointer-events: none;
    }

    .breakeven-marker::after {
      content: '';
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 0 12px rgba(255,255,255,0.9);
      margin-left: 8px;
      transform: translateY(-6px);
    }

    .simple-calc {
      background: #050c22;
      color: #fff;
      border-radius: 24px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      box-shadow: 0 18px 40px rgba(5, 12, 34, 0.6);
      border: 1px solid rgba(255,255,255,0.05);
    }

    .simple-calc h3 {
      margin: 0;
      font-size: 18px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.8);
    }

    .quickcalc-display {
      background: radial-gradient(circle at top, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
      border-radius: 16px;
      padding: 20px;
      font-size: 28px;
      font-weight: 700;
      text-align: right;
      letter-spacing: 0.08em;
      min-height: 64px;
      border: 1px solid rgba(255,255,255,0.08);
    }

    .quickcalc-buttons {
      display: grid;
      grid-template-columns: repeat(4, minmax(60px, 1fr));
      gap: 10px;
    }

    .quickcalc-btn {
      border: none;
      border-radius: 14px;
      padding: 14px;
      font-size: 16px;
      font-weight: 600;
      background: rgba(255,255,255,0.08);
      color: #fff;
      cursor: pointer;
      transition: transform 0.15s ease, background 0.2s ease;
    }

    .quickcalc-btn:hover {
      transform: translateY(-1px);
      background: rgba(255,255,255,0.16);
    }

    .quickcalc-btn.light {
      background: rgba(255,255,255,0.14);
    }

    .quickcalc-btn.operator {
      background: linear-gradient(135deg, #27ffd4, #1ed5f5);
      color: #041126;
    }

    .quickcalc-btn.equal {
      grid-column: span 2;
      background: linear-gradient(135deg, #ffe76a, #ffb347);
      color: #1c1405;
      font-size: 18px;
      box-shadow: 0 12px 24px rgba(255, 204, 0, 0.4);
    }

    .quickcalc-btn.wide {
      grid-column: span 2;
    }

    .quickcalc-result {
      font-size: 18px;
      font-weight: 600;
      text-align: right;
    }

    .simple-calc small {
      color: rgba(255,255,255,0.6);
    }

    .incentive-section {
      margin: 18px 0 30px;
      padding: 26px;
      border-radius: 28px;
      background: linear-gradient(135deg, #08142b, #111f3c);
      color: #fff;
      box-shadow: 0 22px 60px rgba(5, 10, 28, 0.6);
    }

    .incentive-section h3 {
      margin: 0 0 8px;
      font-size: 22px;
      letter-spacing: 0.03em;
    }

    .incentive-section p {
      margin: 0 0 18px;
      color: rgba(255,255,255,0.75);
      font-size: 14px;
    }

    .incentive-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 18px;
      align-items: center;
    }

    .incentive-form {
      background: rgba(255,255,255,0.04);
      border-radius: 20px;
      padding: 18px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      border: 1px solid rgba(255,255,255,0.08);
    }

    .incentive-form label {
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.7);
    }

    .incentive-form input {
      margin-top: 6px;
      border: none;
      border-radius: 14px;
      padding: 12px;
      font-size: 18px;
      font-weight: 600;
      background: rgba(255,255,255,0.9);
      color: #08142b;
    }

    .incentive-form small {
      color: rgba(255,255,255,0.6);
      font-size: 12px;
    }

    .incentive-results {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }

    .incentive-results .card {
      background: rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .incentive-results span {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.7);
    }

    .incentive-results strong {
      font-size: 22px;
      font-weight: 700;
    }

    .incentive-visuals {
      margin-top: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }

    .incentive-chart {
      background: linear-gradient(135deg, #061026, #14294a);
      border-radius: 24px;
      padding: 20px 24px 32px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);
      position: relative;
      overflow: hidden;
    }

    .incentive-chart::after {
      content: '';
      position: absolute;
      inset: 25px 24px 60px;
      border-radius: 18px;
      border: 1px dashed rgba(255,255,255,0.12);
      pointer-events: none;
    }

    .incentive-chart-bars {
      display: flex;
      gap: 22px;
      align-items: flex-end;
      height: 200px;
      margin-top: 18px;
    }

    .incentive-bar {
      flex: 1;
      border-radius: 18px 18px 10px 10px;
      padding: 14px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      min-width: 72px;
      transition: height 0.45s ease;
    }

    .incentive-bar[data-bar="investment"] {
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.25));
      box-shadow: 0 18px 30px rgba(0,0,0,0.35);
      color: #0a162e;
    }

    .incentive-bar[data-bar="returned"] {
      background: linear-gradient(180deg, #4ff2d2, #19a784);
      box-shadow: 0 18px 30px rgba(4, 53, 63, 0.4);
      color: #05141b;
    }

    .incentive-bar strong {
      font-size: 18px;
    }

    .incentive-bar span {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.85;
      margin-top: 6px;
    }

    .promotions-modal {
      max-width: 960px;
    }

    .promotions-body {
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    .promo-hero {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 24px;
      align-items: stretch;
    }

    @media (max-width: 960px) {
      .promo-hero {
        grid-template-columns: 1fr;
      }
    }

    .promo-hero-media {
      position: relative;
      overflow: hidden;
      border-radius: 32px;
      min-height: 320px;
      background: #010913;
      box-shadow: 0 25px 60px rgba(5, 18, 44, 0.35);
    }

    .promo-hero-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .promo-hero-tagbar {
      position: absolute;
      left: 24px;
      right: 24px;
      bottom: 24px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .promo-pill {
      padding: 8px 16px;
      border-radius: 999px;
      background: rgba(2, 19, 30, 0.8);
      border: 1px solid rgba(255,255,255,0.25);
      color: #fff;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .promo-hero-details {
      border-radius: 32px;
      padding: 28px;
      background: linear-gradient(135deg, #081425, #112b60);
      color: #f5f7ff;
      display: grid;
      grid-template-columns: 140px minmax(0, 1fr);
      gap: 24px;
      align-items: center;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08);
    }

    @media (max-width: 640px) {
      .promo-hero-details {
        grid-template-columns: 1fr;
        text-align: center;
      }
    }

    .promo-logo-ring {
      width: 130px;
      height: 130px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2), transparent 70%);
      border: 2px solid rgba(255,255,255,0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
    }

    .promo-logo-ring img {
      width: 80px;
      height: 80px;
      object-fit: contain;
    }

    .promo-hero-eyebrow {
      text-transform: uppercase;
      letter-spacing: 0.34em;
      font-size: 11px;
      color: rgba(255,255,255,0.75);
      margin: 0 0 6px;
    }

    .promo-hero-details h3 {
      margin: 0;
      font-size: 28px;
      letter-spacing: -0.01em;
    }

    .promo-hero-details p {
      margin: 8px 0 16px;
      color: rgba(255,255,255,0.85);
      line-height: 1.5;
    }

    .promo-hero-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 16px;
    }

    .promo-stat-label {
      display: block;
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.6);
      margin-bottom: 6px;
    }

    .promo-thumb-heading {
      font-size: 13px;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: #5a6c9a;
    }

    .promo-thumb-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
    }

    .promo-thumb {
      border-radius: 20px;
      border: 1px solid rgba(9, 30, 66, 0.15);
      padding: 16px 18px;
      background: #f7f9ff;
      box-shadow: 0 12px 30px rgba(9, 30, 66, 0.1);
      text-align: left;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .promo-thumb::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(0, 41, 94, 0.08), rgba(26, 122, 171, 0.18));
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .promo-thumb span {
      display: block;
      font-size: 11px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: #7383b7;
      margin-bottom: 4px;
    }

    .promo-thumb strong {
      display: block;
      font-size: 16px;
      color: #0c1a3d;
      position: relative;
      z-index: 1;
    }

    .promo-thumb small {
      display: block;
      font-size: 12px;
      color: #536083;
      margin-top: 4px;
      position: relative;
      z-index: 1;
    }

    .promo-thumb.active,
    .promo-thumb:hover {
      border-color: rgba(0, 122, 193, 0.4);
      transform: translateY(-4px);
      box-shadow: 0 18px 36px rgba(9, 30, 66, 0.25);
    }

    .promo-thumb.active::after,
    .promo-thumb:hover::after {
      opacity: 1;
    }


    .incentive-chart-marker {
      position: absolute;
      left: 24px;
      right: 24px;
      border-top: 3px solid rgba(255,255,255,0.95);
      box-shadow: 0 -2px 12px rgba(255,255,255,0.55);
      display: flex;
      justify-content: flex-end;
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.95);
      padding-top: 4px;
      pointer-events: none;
    }

    .incentive-chart-marker span {
      background: rgba(255,255,255,0.12);
      padding: 4px 8px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 11px;
    }

    .incentive-chart-baseline {
      position: absolute;
      left: 24px;
      right: 24px;
      border-top: 2px dashed rgba(255,255,255,0.45);
      display: flex;
      justify-content: flex-end;
      font-size: 11px;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.65);
      padding-top: 2px;
      pointer-events: none;
    }

    .incentive-chart-baseline span {
      background: rgba(255,255,255,0.08);
      padding: 3px 6px;
      border-radius: 999px;
    }


    .cruises-logos,
    .flights-logos {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      justify-items: center;
    }

    .cruises-logos {
      gap: 18px 20px;
      margin-top: 6px;
      grid-auto-rows: minmax(72px, auto);
    }

    .flights-logos {
      gap: 12px 16px;
      margin-top: 10px;
    }

    .cruises-logos img {
      height: 64px;
      width: auto;
      max-width: 140px;
      object-fit: contain;
      display: block;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .flights-logos img {
      max-width: 145px;
      max-height: 65px;
      object-fit: contain;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .cruises-logos img:hover,
    .flights-logos img:hover {
      transform: scale(1.06);
      box-shadow: 0 12px 26px rgba(0,0,0,0.22);
    }

    /* ICONOS: mundito, barco, avión */

    .columns-header div:nth-child(2)::before {
      content: "🌍";
      display: inline-block;
      margin-right: 6px;
      font-size: 1.05em;
      animation: floatIcon 4s ease-in-out infinite;
    }

    .cruises-label::before {
      content: "🚢";
      display: inline-block;
      margin-right: 6px;
      animation: floatIcon 3.5s ease-in-out infinite;
    }

    .flights-label::before {
      content: "✈️";
      display: inline-block;
      margin-right: 6px;
      animation: flyIcon 5s ease-in-out infinite;
    }

    @keyframes floatIcon {
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-3px); }
      100% { transform: translateY(0); }
    }

    @keyframes flyIcon {
      0%   { transform: translate(0,0); }
      50%  { transform: translate(4px,-4px); }
      100% { transform: translate(0,0); }
    }

    /* ---------- BREAKPOINTS GRANDES (LAPTOP / IPAD) ---------- */

    @media (max-width: 1200px) {
      .page {
        padding: 16px;
        margin: 12px;
      }
      .columns {
        column-gap: 18px;
      }
    }

    /* ---------- TABLET / IPAD VERTICAL Y PANTALLAS MEDIAS ---------- */

    @media (max-width: 1024px) {
      .page {
        border-radius: 20px;
        box-shadow: 0 12px 40px rgba(0,0,0,0.14);
      }
      .columns {
        grid-template-columns: repeat(2, 1fr);
        row-gap: 16px;
      }
      .col:nth-child(2)::before,
      .col:nth-child(2)::after {
        display: none;
      }
      .first-layout {
        grid-template-columns: 1fr 1fr;
      }
      .logo-stack img {
        max-width: 160px;
      }
    }

    /* ---------- CELULARES / IPAD MINI VERTICAL ---------- */

    @media (max-width: 900px) {
      body {
        align-items: stretch;
      }
      .page {
        padding: 12px;
        margin: 8px;
        border-radius: 12px;
        box-shadow: 0 8px 26px rgba(0,0,0,0.16);
      }
      .columns-header {
        grid-template-columns: 1fr;
        gap: 4px;
      }
      .columns {
        grid-template-columns: 1fr;
        column-gap: 12px;
        row-gap: 12px;
      }
      .first-layout {
        grid-template-columns: 1fr;
        row-gap: 10px;
      }
      .logo-stack {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
      }
      .logo-stack img {
        max-width: 130px;
        max-height: 60px;
      }
      .benefits {
        font-size: 16px;
      }
      .logo-grid img,
      .cruises-logos img,
      .flights-logos img {
        max-width: 120px;
        max-height: 70px;
      }
      .modal {
        width: 96vw;
        padding: 12px;
        border-radius: 16px;
      }
      .modal-header h2 {
        font-size: 17px;
      }
      .modal-description {
        font-size: 12px;
      }
    }

    @media (max-width: 600px) {
      .page {
        border-radius: 0;
        margin: 0;
        min-height: 100vh;
      }
    }

    /* ------------------ MODALES INTERACTIVOS ------------------ */

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(10, 20, 40, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
      backdrop-filter: blur(4px);
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      width: min(1000px, 95vw);
      max-height: calc(100vh - 32px);
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0 24px 80px rgba(0, 0, 0, 0.35);
      padding: 18px 22px 22px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      animation: modalIn 0.25s ease-out;
    }

    @keyframes modalIn {
      from {
        opacity: 0;
        transform: translateY(12px) scale(0.96);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 12px;
    }

    .modal-header h2 {
      font-size: 20px;
      margin: 0;
      color: #102649;
    }

    .modal-close {
      border: none;
      background: #edf0fb;
      border-radius: 999px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      color: #102649;
    }

    .modal-close:hover {
      background: #d8def8;
    }

    .modal-body {
      display: flex;
      flex-direction: column;
      gap: 12px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .modal-media {
      width: 100%;
      border-radius: 18px;
      overflow: hidden;
      background: #000;
    }

    .modal-media video {
      width: 100%;
      height: auto;
      max-height: calc(80vh);
      display: block;
      object-fit: cover;
    }

    .modal-media iframe {
      width: 100%;
      height: auto;
      max-height: calc(70vh);
      display: block;
      border: 0;
    }

    .modal-video-fallback {
      margin-top: 10px;
      text-align: center;
    }

    .modal-video-fallback a {
      display: inline-block;
      background: #ff0000;
      color: #fff;
      padding: 8px 14px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
    }

    .modal-video-fallback a:hover {
      background: #e20000;
    }

    .video-wrapper {
      position: relative;
      width: 100%;
      padding-top: 56.25%;
      background: #000;
      border-radius: 12px;
      overflow: hidden;
    }

    .video-wrapper iframe,
    .video-wrapper video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: block;
      border: 0;
    }

    .modal-gallery {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .modal-gallery img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 12px;
      cursor: pointer;
    }

    .modal-description {
      font-size: 13px;
      color: #4b5875;
      line-height: 1.5;
    }

    /* Galería overlay */
    #gallery-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(10, 20, 40, 0.85);
      z-index: 2000;
    }

    #gallery-overlay.active {
      display: flex;
    }

    #gallery-overlay .gallery-img {
      max-width: 92vw;
      max-height: 86vh;
      object-fit: contain;
      border-radius: 10px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.6);
    }

    #gallery-overlay .gallery-video {
      max-width: 92vw;
      max-height: 86vh;
      border-radius: 10px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.6);
      background: #000;
    }

    #gallery-overlay.large .gallery-img {
      max-width: 98vw;
      max-height: 94vh;
    }

    #gallery-overlay .gallery-caption {
      position: absolute;
      bottom: 26px;
      left: 50%;
      transform: translateX(-50%);
      color: #ffffff;
      font-size: 14px;
      background: rgba(0,0,0,0.45);
      padding: 8px 12px;
      border-radius: 8px;
      max-width: 88vw;
      text-align: center;
      line-height: 1.3;
    }

    #gallery-overlay.large .gallery-caption {
      max-width: 96vw;
      font-size: 15px;
      padding: 10px 14px;
    }

    #gallery-overlay .gallery-close,
    #gallery-overlay .gallery-prev,
    #gallery-overlay .gallery-next {
      position: absolute;
      background: rgba(255,255,255,0.06);
      border: none;
      color: #fff;
      font-size: 36px;
      width: 56px;
      height: 56px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.15s ease;
      backdrop-filter: blur(4px);
    }

    #gallery-overlay .gallery-close { top: 20px; right: 22px; }
    #gallery-overlay .gallery-prev  { left: 20px; }
    #gallery-overlay .gallery-next  { right: 20px; }

    #gallery-overlay .gallery-prev,
    #gallery-overlay .gallery-next {
      top: 50%;
      transform: translateY(-50%);
      width: 64px;
      height: 64px;
      font-size: 42px;
    }

    #gallery-overlay .gallery-close:hover,
    #gallery-overlay .gallery-prev:hover,
    #gallery-overlay .gallery-next:hover {
      background: rgba(255,255,255,0.12);
    }
  </style>
</head>

<body>

  <div class="page">

    <div class="utility-bar" aria-label="Utility controls">
      <button class="utility-tab" id="utility-menu-toggle" type="button" aria-expanded="false">
        <span data-i18n="utility.toggle">Herramientas</span>
        <span aria-hidden="true">▾</span>
      </button>
      <div class="utility-menu" id="utility-menu">
        <div class="utility-menu-title" data-i18n="utility.menuTitle">Control Center</div>
        <button class="utility-action" id="price-checker-toggle" type="button" data-i18n="utility.priceChecker">Checker Price</button>
        <button class="utility-action" id="admin-btn" type="button" data-i18n="utility.settings">Configuración</button>
        <button class="utility-action" data-sim-open="retail" type="button" data-i18n="utility.simulators">Simuladores</button>
      </div>
    </div>

    <button class="close-pitch-btn" id="close-pitch-btn" type="button" title="Cerrar presentación" aria-label="Cerrar presentación">&times;</button>

    <div class="price-checker-panel" id="price-checker-panel" aria-live="polite">
      <div class="pc-header">
        <div>
          <div class="pc-title" data-i18n="priceChecker.title">Live Price Checker</div>
          <div class="pc-subtitle" data-i18n="priceChecker.subtitle">Secrets Puerto Los Cabos vs Zoëtry Los Cabos</div>
        </div>
        <button class="pc-close" type="button" aria-label="Close price checker">&times;</button>
      </div>

      <div class="pc-section" data-property-index="0">
        <div class="pc-section-head">
          <div>
            <div class="pc-section-title" data-destination-target data-property-index="0">Secrets Puerto Los Cabos</div>
            <div class="pc-section-meta" data-savings-target="0">&nbsp;</div>
          </div>
          <div class="pc-section-uvc" data-uvc-summary="0">$0</div>
        </div>
        <div class="pc-row" data-brand="expedia">
          <div class="pc-row-logo"><img src="expedia-logo.svg" alt="Expedia" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="expedia" data-property-index="0">$0</div>
        </div>
        <div class="pc-row" data-brand="booking">
          <div class="pc-row-logo"><img src="booking-logo.svg" alt="Booking.com" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="booking" data-property-index="0">$0</div>
        </div>
        <div class="pc-row" data-brand="despegar">
          <div class="pc-row-logo"><img src="despegar-logo.svg" alt="Despegar" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="despegar" data-property-index="0">$0</div>
        </div>
        <div class="pc-row highlight" data-brand="uvc">
          <div class="pc-row-logo"><img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.memberRate">Member Rate</div>
          <div class="pc-price" data-price-target="uvc" data-property-index="0">$0</div>
        </div>
      </div>

      <div class="pc-section" data-property-index="1">
        <div class="pc-section-head">
          <div>
            <div class="pc-section-title" data-destination-target data-property-index="1">Zoëtry Los Cabos</div>
            <div class="pc-section-meta" data-savings-target="1">&nbsp;</div>
          </div>
          <div class="pc-section-uvc" data-uvc-summary="1">$0</div>
        </div>
        <div class="pc-row" data-brand="expedia">
          <div class="pc-row-logo"><img src="expedia-logo.svg" alt="Expedia" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="expedia" data-property-index="1">$0</div>
        </div>
        <div class="pc-row" data-brand="booking">
          <div class="pc-row-logo"><img src="booking-logo.svg" alt="Booking.com" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="booking" data-property-index="1">$0</div>
        </div>
        <div class="pc-row" data-brand="despegar">
          <div class="pc-row-logo"><img src="despegar-logo.svg" alt="Despegar" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="despegar" data-property-index="1">$0</div>
        </div>
        <div class="pc-row highlight" data-brand="uvc">
          <div class="pc-row-logo"><img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.memberRate">Member Rate</div>
          <div class="pc-price" data-price-target="uvc" data-property-index="1">$0</div>
        </div>
      </div>

      <div class="pc-note" id="price-checker-note">Ahorro máximo con UVC.</div>
    </div>

    <!-- HEADER SUPERIOR: SOLO LOGO -->
    <div class="top">
      <div class="uvc-box">
        <a href="https://www.unlimitedvacationclub.com/en/" target="_blank" rel="noopener noreferrer" aria-label="Unlimited Vacation Club website">
          <img class="uvc-logo" src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" />
        </a>
        <div class="uvc-subtitle">Members Benefits</div>
      </div>
    </div>

    <!-- 3 COLUMNAS PRINCIPALES -->
    <div class="columns">

      <!-- COLUMNA 1: ALL INCLUSIVE RESORTS -->
      <div class="col">
        <div class="col-inner">
          <button class="col-title col-title-button uvc-title" type="button" data-modal="promotions" aria-label="Unlimited Vacation Club">
            <span class="uvc-title-ring">
              <img src="UVC-Logo-Standalone-Gray.webp" alt="" loading="lazy" />
            </span>
            <span class="sr-only" data-i18n="col1.title">Unlimited Vacation Club</span>
          </button>

          <div class="first-layout">
            <div class="logo-stack">
              <img class="brand-logo" data-modal="zoetry" src="zoetrylogo(og).png" alt="Zoetry" loading="lazy" />
              <img class="brand-logo" data-modal="secrets" src="secrets3.png" alt="Secrets" loading="lazy" />
              <img class="brand-logo" data-modal="breathless" src="breathless logo (og).png" alt="Breathless" loading="lazy" />
              <img class="brand-logo" data-modal="dreams" src="dreams(og).png" alt="Dreams" loading="lazy" />
              <img class="brand-logo" data-modal="vivid" src="hyat vivid3.png" alt="Hyatt Vivid" loading="lazy" />
              <img class="brand-logo" data-modal="alua" src="alua3.png" alt="Alua" loading="lazy" />
            </div>

            <ul class="benefits" id="benefits-list">
              <li data-i18n="col1.benefit1">+125 Resorts.</li>
              <li data-i18n="col1.benefit2">25% Best Price Guaranteed.</li>
              <li data-i18n="col1.benefit3">Free Upgrade.</li>
              <li data-i18n="col1.benefit4">185 usd.</li>
              <li data-i18n="col1.benefit5">Concierge Service.</li>
              <li data-i18n="col1.benefit6">25 USD Extra Reservation.</li>
            </ul>
          </div>

          <div class="divider"></div>

          <div class="allinclusive-notes" data-i18n="col1.notes">
            20 Rooms · $1000 = 5000 points · Minimum 2 nights · 72 hrs · Best price
          </div>
        </div>
      </div>

      <!-- COLUMNA 2: WORLDWIDE -->
      <div class="col">
        <div class="col-inner worldwide-inner">
          <div class="col-title worldwide-title">
            <span class="worldwide-ring">
              <span class="worldwide-icon" aria-hidden="true">
                <svg viewBox="0 0 60 60" role="presentation">
                  <circle cx="30" cy="30" r="24"></circle>
                  <path d="M30 6c8 6 12 16 12 24s-4 18-12 24"></path>
                  <path d="M30 6c-8 6-12 16-12 24s4 18 12 24"></path>
                  <path d="M6 30h48"></path>
                  <path d="M12 18c12 8 24 8 36 0"></path>
                  <path d="M12 42c12-8 24-8 36 0"></path>
                </svg>
              </span>
              <span class="worldwide-wordmark" data-i18n="col2.title">Worldwide Exchange</span>
            </span>
          </div>

          <ul class="center-list">
            <li data-i18n="col2.list1">4500+ Resorts</li>
            <li data-i18n="col2.list2">100+ Countries</li>
          </ul>

          <div class="divider"></div>

          <div class="logo-grid">
            <img src="st-regis-2-logo-png-transparent.png" alt="St. Regis" loading="lazy" />
            <img src="fairmont(og).png" alt="Fairmont" loading="lazy" />
            <img src="fourseason(og).png" alt="Four Seasons" loading="lazy" />
            <img src="Hilton(og).png" alt="Hilton" loading="lazy" />
            <img src="sheraton.png" alt="Sheraton" loading="lazy" />
            <img src="Marriot(og).png" alt="Marriott" loading="lazy" />
            <img src="wyndham-1-logo-png-transparent.png" alt="Wyndham" loading="lazy" />
            <img src="starwood5.png" alt="Starwood Hotels & Resorts" loading="lazy" />
            <img src="ritzcarton(og).png" alt="Ritz-Carlton" loading="lazy" />
          </div>

          <div class="hyatt-row">
            <img class="hyatt-logo brand-logo" data-modal="hyatt" src="World_of_Hyatt_(Square).svg" alt="World of Hyatt" loading="lazy" />
            <div class="hyatt-text">
              <div data-i18n="col2.hyatt1">1200 Hotels</div>
              <div data-i18n="col2.hyatt2">72 Countries</div>
            </div>
          </div>

          <div class="worldwide-notes">
            <p data-i18n="col2.notes">599 fixed price · 2 bedrooms · 6 people · 7N/8D · 2 years free – Worldwide [109 USD]</p>
          </div>
        </div>
      </div>

      <!-- COLUMNA 3: U EXPERIENCE -->
      <div class="col">
        <div class="col-inner">
          <button class="col-title col-title-link" data-modal="uexperience" type="button" aria-label="UExperience">
            <span class="uexperience-banner">
              <img src="logo u experience modificado.png" alt="UExperience" class="uex-logo" />
            </span>
          </button>

          <div class="section-label cruises-label" data-i18n="col3.cruisesLabel">Cruises Rewards</div>
          <div class="cruises-logos">
            <img src="Carnival-Cruise-Line-logo.png" alt="Carnival" loading="lazy" />
            <img src="Royal-Cribbean-logo.png" alt="Royal Caribbean" loading="lazy" />
            <img src="Crystalcruise(og).png" alt="Crystal Cruises" loading="lazy" />
            <img src="Cunard(og).png" alt="Cunard" loading="lazy" />
            <img src="princess cruise.png" alt="Princess" loading="lazy" />
            <img src="viking(og).png" alt="Viking" loading="lazy" />
            <img src="disney cruise(og).png" alt="Disney Cruise Line" loading="lazy" />
            <img src="xcruises(Og).png" alt="Celebrity Cruises" loading="lazy" />
          </div>

          <div class="divider"></div>

          <div class="section-label flights-label" data-i18n="col3.flightsLabel">Flights</div>
          <div class="flights-logos">
            <img src="American-Airlines-Logo nyevi.png" alt="American Airlines" loading="lazy" />
            <img src="delta (og).png" alt="Delta" loading="lazy" />
            <img src="united(og).png" alt="United" loading="lazy" />
            <img src="alaska(og).png" alt="Alaska" loading="lazy" />
            <img src="jetblue(og).png" alt="JetBlue" loading="lazy" />
            <img src="southwest(og).png" alt="Southwest" loading="lazy" />
          </div>

          <div class="note" data-i18n="col3.note">
            3500 / 3000 / 1000 · 2 years free – Travel Agency · 5000 USD · 18 Months · Travel Agency [399 USD]
          </div>
        </div>
      </div>

    </div> <!-- /columns -->

    <div class="simulator-panel" id="simulator-panel">
      <div class="simulator-head">
        <img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" />
        <div>
          <h3 data-i18n="sim.labTitle">UVC Sales Lab</h3>
          <span data-i18n="sim.labSubtitle">Simuladores corporativos</span>
        </div>
      </div>
      <div class="simulator-tabs">
        <button class="sim-tab active" data-sim-tab="retail" data-i18n="sim.tabs.retail">ROI Retail vs Membresía</button>
        <button class="sim-tab" data-sim-tab="incentives" data-i18n="sim.tabs.incentives">ROI Incentivos</button>
        <button class="sim-tab" data-sim-tab="calc" data-i18n="sim.tabs.calc">Calculadora</button>
      </div>
      <div class="simulator-view active" data-sim-view="retail">
        <section class="breakeven-section" id="breakeven-calculator" aria-labelledby="breakeven-title">
      <div class="breakeven-card">
        <div class="breakeven-header">
          <div class="breakeven-headline">
            <h2 id="breakeven-title" data-i18n="breakeven.title">Calculadora de punto de equilibrio</h2>
            <p data-i18n="breakeven.subtitle">Ajusta los precios reales para mostrar en cuántos viajes se paga la membresía.</p>
          </div>
        </div>
        <div class="breakeven-grid">
          <form class="breakeven-form" id="breakeven-form">
            <div class="breakeven-form-group">
              <h4 data-i18n="breakeven.groupVolume">Membresía y volumen</h4>
              <label for="breakeven-membership">
                <span data-i18n="breakeven.membershipCost">Costo de la membresía (USD)</span>
                <input type="number" id="breakeven-membership" min="0" step="100" value="6500" inputmode="decimal" />
              </label>
              <label for="breakeven-trips">
                <span data-i18n="breakeven.tripsPerYear">Viajes por año</span>
                <input type="number" id="breakeven-trips" min="1" step="1" value="2" inputmode="numeric" />
              </label>
              <label for="breakeven-years">
                <span data-i18n="breakeven.years">Años a proyectar</span>
                <input type="number" id="breakeven-years" min="1" max="15" step="1" value="5" inputmode="numeric" />
              </label>
            </div>
            <div class="breakeven-form-group">
              <h4 data-i18n="breakeven.groupTrip">Grupo y noches</h4>
              <label for="breakeven-nights">
                <span data-i18n="breakeven.nights">Noches por viaje</span>
                <input type="number" id="breakeven-nights" min="1" step="1" value="5" inputmode="numeric" />
              </label>
              <label for="breakeven-travelers">
                <span data-i18n="breakeven.travelers">Personas / suite</span>
                <input type="number" id="breakeven-travelers" min="1" step="1" value="4" inputmode="numeric" />
              </label>
            </div>
            <div class="breakeven-form-group">
              <h4 data-i18n="breakeven.groupRates">Tarifa por persona / noche</h4>
              <label for="breakeven-retail-night">
                <span data-i18n="breakeven.retailNight">Retail (USD)</span>
                <input type="number" id="breakeven-retail-night" min="0" step="10" value="500" inputmode="decimal" />
              </label>
              <label for="breakeven-member-night">
                <span data-i18n="breakeven.memberNight">UVC (USD)</span>
                <input type="number" id="breakeven-member-night" min="0" step="10" value="250" inputmode="decimal" />
              </label>
            </div>
            <div class="breakeven-form-group">
              <h4 data-i18n="breakeven.groupExtras">Gastos extra (spa / actividades)</h4>
              <label for="breakeven-extra-retail">
                <span data-i18n="breakeven.extraRetail">Gasto estimado retail (por viaje)</span>
                <input type="number" id="breakeven-extra-retail" min="0" step="10" value="400" inputmode="decimal" />
              </label>
              <label for="breakeven-extra-discount">
                <span data-i18n="breakeven.extraDiscount">Descuento UVC en extras (%)</span>
                <input type="number" id="breakeven-extra-discount" min="0" max="100" step="1" value="25" inputmode="decimal" />
              </label>
              <div class="breakeven-inline-note" data-i18n="breakeven.extraHint">Aplica el descuento de socio a spa, actividades, golf o transporte.</div>
            </div>
          </form>
          <div class="breakeven-results">
            <div class="breakeven-stats">
              <div>
                <span data-i18n="breakeven.tripRetail">Viaje retail</span>
                <strong id="breakeven-trip-retail">$0</strong>
              </div>
              <div>
                <span data-i18n="breakeven.tripMember">Viaje UVC</span>
                <strong id="breakeven-trip-member">$0</strong>
              </div>
              <div>
                <span data-i18n="breakeven.perTrip">Ahorro por viaje</span>
                <strong id="breakeven-trip-savings">$0</strong>
              </div>
              <div>
                <span data-i18n="breakeven.annualSavings">Ahorro anual</span>
                <strong id="breakeven-annual">$0</strong>
              </div>
              <div>
                <span data-i18n="breakeven.breakEven">Punto de equilibrio</span>
                <strong id="breakeven-breakpoint">--</strong>
              </div>
            </div>
            <div class="breakeven-visuals">
              <div class="breakeven-chart" aria-live="polite">
                <div class="breakeven-marker" id="breakeven-marker">
                  <span data-i18n="breakeven.membershipLabel">Costo membresía</span>
                </div>
                <div class="breakeven-bars" id="breakeven-bars"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      </section>
      </div>
      <div class="simulator-view" data-sim-view="incentives">
        <section class="incentive-section" id="incentive-calculator" aria-labelledby="incentive-title">
          <h3 id="incentive-title" data-i18n="incentives.title">Calculadora ROI de incentivos</h3>
          <p data-i18n="incentives.subtitle">Descubre cuánto valor adicional reciben tus clientes por cada bloque de $10,000 USD.</p>
          <div class="incentive-grid">
            <div class="incentive-form">
              <label for="incentive-investment">
                <span data-i18n="incentives.investment">Inversión del cliente (USD)</span>
                <input type="number" id="incentive-investment" min="0" step="100" value="10000" inputmode="decimal" />
              </label>
              <label for="incentive-nights-input">
                <span data-i18n="incentives.nights">Noches all inclusive</span>
                <input type="number" id="incentive-nights-input" min="0" step="1" value="7" inputmode="numeric" />
              </label>
              <label for="incentive-weeks-input">
                <span data-i18n="incentives.weeks">Semanas Hyatt</span>
                <input type="number" id="incentive-weeks-input" min="0" step="1" value="2" inputmode="numeric" />
              </label>
              <label for="incentive-credits-input">
                <span data-i18n="incentives.credits">Reward credits</span>
                <input type="number" id="incentive-credits-input" min="0" step="50" value="1000" inputmode="numeric" />
              </label>
            </div>
            <div class="incentive-results">
              <div class="card">
                <span data-i18n="incentives.nightsValue">Valor noches</span>
                <strong id="incentive-nights-value">$0</strong>
              </div>
              <div class="card">
                <span data-i18n="incentives.weeksValue">Valor Hyatt</span>
                <strong id="incentive-weeks-value">$0</strong>
              </div>
              <div class="card">
                <span data-i18n="incentives.creditsValue">Valor credits</span>
                <strong id="incentive-credits-value">$0</strong>
              </div>
              <div class="card">
                <span data-i18n="incentives.totalValue">Valor total</span>
                <strong id="incentive-value">$0</strong>
              </div>
              <div class="card">
                <span data-i18n="incentives.roi">ROI incentivos</span>
                <strong id="incentive-roi">0%</strong>
              </div>
            </div>
          </div>
          <div class="incentive-visuals">
            <div class="incentive-chart">
              <div class="incentive-chart-baseline" id="incentive-chart-baseline">
                <span id="incentive-chart-baseline-label">Inversión</span>
              </div>
              <div class="incentive-chart-marker" id="incentive-chart-marker">
                <span id="incentive-chart-marker-label">ROI</span>
              </div>
              <div class="incentive-chart-bars">
                <div class="incentive-bar" data-bar="investment">
                  <strong id="incentive-bar-investment">$0</strong>
                  <span data-i18n="incentives.investment">Inversión</span>
                </div>
                <div class="incentive-bar" data-bar="returned">
                  <strong id="incentive-bar-returned">$0</strong>
                  <span data-i18n="incentives.totalValue">Valor incentivos</span>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <div class="simulator-view" data-sim-view="calc">
        <section class="simple-calc" id="quickcalc-panel" aria-labelledby="calc-title">
          <h3 id="calc-title" data-i18n="calc.title">Calculadora</h3>
          <div class="quickcalc-display" id="quick-calc-display">0</div>
          <div class="quickcalc-buttons">
            <button type="button" class="quickcalc-btn light" data-quickcalc-action="clear">AC</button>
            <button type="button" class="quickcalc-btn light" data-quickcalc-action="delete">⌫</button>
            <button type="button" class="quickcalc-btn light operator" data-quickcalc-value="%">%</button>
            <button type="button" class="quickcalc-btn operator" data-quickcalc-value="÷">÷</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="7">7</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="8">8</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="9">9</button>
            <button type="button" class="quickcalc-btn operator" data-quickcalc-value="×">×</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="4">4</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="5">5</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="6">6</button>
            <button type="button" class="quickcalc-btn operator" data-quickcalc-value="-">-</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="1">1</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="2">2</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="3">3</button>
            <button type="button" class="quickcalc-btn operator" data-quickcalc-value="+">+</button>
            <button type="button" class="quickcalc-btn wide" data-quickcalc-value="0">0</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value=".">.</button>
            <button type="button" class="quickcalc-btn equal" data-quickcalc-action="equals">=</button>
          </div>
          <div class="quickcalc-result" id="quick-calc-result">--</div>
          <small data-i18n="calc.hint">Usa + - × ÷ y paréntesis para cualquier presupuesto.</small>
        </section>
      </div>
    </div>

  </div> <!-- /page -->

  <div class="home-screen active" id="home-screen">
    <div class="home-card">
      <div class="home-left">
        <div class="home-hero">
          <img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" />
          <h1 data-i18n="home.title">3-Way Pitch Control Center</h1>
          <span data-i18n="home.subtitle">Unlimited Vacation Club</span>
        </div>
        <div class="start-panel start-ready">
          <p data-i18n="home.readyText">La presentación está lista. Presiona iniciar; los nombres del equipo se capturan al cerrar.</p>
        </div>
        <button class="primary-btn" id="start-demo-btn" type="button" data-i18n="home.start">Iniciar presentación</button>
      </div>
      <div class="home-config locked" id="home-config">
        <div class="config-head">
          <div>
            <h3 data-i18n="home.configTitle">Panel de administración</h3>
            <p data-i18n="home.configSubtitle">Ingresa el PIN para editar precios en vivo.</p>
          </div>
        </div>
        <form class="pin-form" id="pin-form">
          <input type="password" id="pin-input" placeholder="PIN" autocomplete="off" inputmode="numeric" maxlength="7" />
          <button type="submit" data-i18n="home.unlock">Desbloquear</button>
        </form>
        <div class="pin-status" id="pin-status" role="status"></div>
        <div class="config-locked-message" id="config-locked-message">
          <div class="lock-icon" aria-hidden="true">🔒</div>
          <p data-i18n="home.lockedMessage">Ingresa el PIN para desbloquear esta sección privada.</p>
        </div>
        <div class="config-body">
          <div class="config-properties">
            <div class="config-property" data-config-property="0">
              <p class="config-property-title" data-config-title-target="0">Secrets Puerto Los Cabos</p>
              <div class="config-grid">
                <div class="config-field full">
                  <label for="config-destination-0" data-i18n="home.destinationLabel">Nombre del hotel</label>
                  <input id="config-destination-0" data-config-field="destination" data-property-index="0" type="text" value="Secrets Puerto Los Cabos" disabled />
                </div>
                <div class="config-field">
                  <label for="config-expedia-0" data-i18n="home.expediaLabel">Expedia (USD)</label>
                  <input id="config-expedia-0" data-config-field="price-expedia" data-property-index="0" type="number" min="0" step="1" value="920" disabled />
                </div>
                <div class="config-field">
                  <label for="config-booking-0" data-i18n="home.bookingLabel">Booking (USD)</label>
                  <input id="config-booking-0" data-config-field="price-booking" data-property-index="0" type="number" min="0" step="1" value="899" disabled />
                </div>
                <div class="config-field">
                  <label for="config-despegar-0" data-i18n="home.despegarLabel">Despegar (USD)</label>
                  <input id="config-despegar-0" data-config-field="price-despegar" data-property-index="0" type="number" min="0" step="1" value="940" disabled />
                </div>
                <div class="config-field">
                  <label for="config-discount-0" data-i18n="home.discountLabel">Descuento UVC %</label>
                  <input id="config-discount-0" data-config-field="discount" data-property-index="0" type="number" step="0.5" value="45" disabled />
                </div>
              </div>
              <button class="config-save-btn" type="button" data-config-save="0" disabled data-i18n="home.saveProperty">Guardar precios</button>
            </div>
            <div class="config-property" data-config-property="1">
              <p class="config-property-title" data-config-title-target="1">Zoëtry Los Cabos</p>
              <div class="config-grid">
                <div class="config-field full">
                  <label for="config-destination-1" data-i18n="home.destinationLabel">Nombre del hotel</label>
                  <input id="config-destination-1" data-config-field="destination" data-property-index="1" type="text" value="Zoëtry Los Cabos" disabled />
                </div>
                <div class="config-field">
                  <label for="config-expedia-1" data-i18n="home.expediaLabel">Expedia (USD)</label>
                  <input id="config-expedia-1" data-config-field="price-expedia" data-property-index="1" type="number" min="0" step="1" value="1050" disabled />
                </div>
                <div class="config-field">
                  <label for="config-booking-1" data-i18n="home.bookingLabel">Booking (USD)</label>
                  <input id="config-booking-1" data-config-field="price-booking" data-property-index="1" type="number" min="0" step="1" value="1015" disabled />
                </div>
                <div class="config-field">
                  <label for="config-despegar-1" data-i18n="home.despegarLabel">Despegar (USD)</label>
                  <input id="config-despegar-1" data-config-field="price-despegar" data-property-index="1" type="number" min="0" step="1" value="1089" disabled />
                </div>
                <div class="config-field">
                  <label for="config-discount-1" data-i18n="home.discountLabel">Descuento UVC %</label>
                  <input id="config-discount-1" data-config-field="discount" data-property-index="1" type="number" step="0.5" value="48" disabled />
                </div>
              </div>
              <button class="config-save-btn" type="button" data-config-save="1" disabled data-i18n="home.saveProperty">Guardar precios</button>
            </div>
          </div>
          <div class="config-summary" id="config-summary">
            <div class="config-summary-item">
              <span data-config-summary-label="0">Secrets Puerto Los Cabos</span>
              <strong data-config-summary="0">$0</strong>
            </div>
            <div class="config-summary-item">
              <span data-config-summary-label="1">Zoëtry Los Cabos</span>
              <strong data-config-summary="1">$0</strong>
            </div>
          </div>
          <div class="config-field">
            <label data-i18n="home.incentiveTitle">Costos manuales de incentivos</label>
            <div class="config-grid">
              <div class="config-field">
                <label for="config-incentive-ai" data-i18n="home.incentiveAiLabel">Valor noche all inclusive (USD)</label>
                <input id="config-incentive-ai" data-config-field="incentive-ai" type="number" step="1" min="0" placeholder="Auto" disabled />
              </div>
              <div class="config-field">
                <label for="config-incentive-hyatt" data-i18n="home.incentiveHyattLabel">Valor semana Hyatt (USD)</label>
                <input id="config-incentive-hyatt" data-config-field="incentive-hyatt" type="number" step="1" min="0" value="2000" disabled />
              </div>
              <div class="config-field">
                <label for="config-incentive-credits" data-i18n="home.incentiveCreditsLabel">Valor por reward credit (USD)</label>
                <input id="config-incentive-credits" data-config-field="incentive-credits" type="number" step="0.5" min="0" value="1" disabled />
              </div>
            </div>
            <small data-i18n="home.incentiveHint">Deja vacío el valor de noche para usar el precio público del Price Checker.</small>
          </div>
          <div class="config-field staff-config">
            <label data-i18n="home.staffTitle">Equipo disponible</label>
            <div class="staff-grid">
              <div class="staff-column">
                <span data-i18n="home.staffLiners">Liners</span>
                <textarea data-staff-field="liners" placeholder="Un nombre por línea" disabled></textarea>
              </div>
              <div class="staff-column">
                <span data-i18n="home.staffClosers">Closers</span>
                <textarea data-staff-field="closers" placeholder="Un nombre por línea" disabled></textarea>
              </div>
            </div>
            <small data-i18n="home.staffHint">Se mostrarán como sugerencias al registrar un cierre.</small>
          </div>
          <div class="lang-callout">
            <span data-i18n="home.language">Idioma</span>
            <div class="lang-pill-group" id="home-lang-switch">
              <button class="lang-pill" data-lang="es" type="button">ES</button>
              <button class="lang-pill" data-lang="en" type="button">EN</button>
            </div>
          </div>
          <div class="sales-report">
            <span data-i18n="sale.reportInfo">Descarga un resumen de ventas.</span>
            <button type="button" id="download-sales-report" disabled data-i18n="sale.reportBtn">Descargar CSV</button>
            <button type="button" id="reset-sales-btn" class="reset-btn" data-i18n="analytics.resetBtn">Limpiar datos</button>
          </div>
          <div class="analytics-panel" id="analytics-panel">
            <div class="analytics-header">
              <img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" />
              <div class="analytics-names" data-i18n="analytics.staffInfo">Los nombres del equipo se llenan al registrar cada encuesta.</div>
            </div>
            <div class="analytics-grid">
              <div class="metric-card">
                <span data-i18n="analytics.avgSale">Promedio de ventas</span>
                <strong id="metric-avg-sale">--</strong>
                <small data-i18n="analytics.avgSaleHint">Promedio por venta cerrada</small>
              </div>
              <div class="metric-card">
                <span data-i18n="analytics.conversion">Porcentaje de cierre</span>
                <strong id="metric-conversion">0%</strong>
                <small data-i18n="analytics.conversionHint">Intentos registrados</small>
              </div>
              <div class="metric-card">
                <span data-i18n="analytics.totalVolume">Volumen total</span>
                <strong id="metric-total-volume">$0</strong>
                <small data-i18n="analytics.totalVolumeHint">Ventas acumuladas</small>
              </div>
              <div class="metric-card">
                <span data-i18n="analytics.clarityScore">Índice de claridad</span>
                <strong id="metric-clarity">--</strong>
                <small data-i18n="analytics.clarityHint">Encuestas de clientes</small>
              </div>
            </div>
            <div class="period-grid">
              <div class="period-card">
                <span data-i18n="analytics.dayVolume">Volumen diario</span>
                <strong data-volume="day">$0</strong>
              </div>
              <div class="period-card">
                <span data-i18n="analytics.weekVolume">Volumen semanal</span>
                <strong data-volume="week">$0</strong>
              </div>
              <div class="period-card">
                <span data-i18n="analytics.biweekVolume">Volumen quincenal</span>
                <strong data-volume="biweek">$0</strong>
              </div>
            </div>
            <div class="ranking-grid">
              <div class="ranking-card">
                <h4 data-i18n="analytics.linerRanking">Ranking Liners</h4>
                <ul class="ranking-list" id="liner-ranking"></ul>
              </div>
              <div class="ranking-card">
                <h4 data-i18n="analytics.closerRanking">Ranking Closers</h4>
                <ul class="ranking-list" id="closer-ranking"></ul>
              </div>
              <div class="top-card">
                <h4 data-i18n="analytics.topLiner">Top Liner</h4>
                <div class="top-name" id="top-liner-name">--</div>
                <div class="top-amount" id="top-liner-amount">$0</div>
              </div>
              <div class="top-card">
                <h4 data-i18n="analytics.topCloser">Top Closer</h4>
                <div class="top-name" id="top-closer-name">--</div>
                <div class="top-amount" id="top-closer-amount">$0</div>
              </div>
              <div class="comparison-card">
                <h4 data-i18n="analytics.teamCompare">Comparación Liners vs Closers</h4>
                <div class="comparison-row">
                  <span data-i18n="analytics.linersLabel">Liners</span>
                  <div class="comparison-bar"><div class="comparison-fill" data-bar="liner"></div></div>
                  <strong data-bar-value="liner">$0</strong>
                </div>
                <div class="comparison-row">
                  <span data-i18n="analytics.closersLabel">Closers</span>
                  <div class="comparison-bar"><div class="comparison-fill" data-bar="closer"></div></div>
                  <strong data-bar-value="closer">$0</strong>
                </div>
              </div>
            </div>
          </div>
          <button class="relock-btn" id="relock-btn" type="button" hidden data-i18n="home.lockPanel">Bloquear panel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Promotions -->
  <div class="modal-overlay" id="modal-promotions">
    <div class="modal promotions-modal">
      <div class="modal-header">
        <h2 data-i18n="promos.title">Promociones UVC</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body promotions-body">
        <p data-i18n="promos.subtitle">Selecciona una campaña para mostrar las fotos en formato grande.</p>

        <div class="promo-hero">
          <div class="promo-hero-media">
            <img id="promo-hero-image" src="breathless 1.webp" alt="May the 4th Offer" loading="lazy" />
            <div class="promo-hero-tagbar">
              <span class="promo-pill" id="promo-hero-season">Temporada especial</span>
              <span class="promo-pill" id="promo-hero-window">4 - 10 MAY</span>
            </div>
          </div>
          <div class="promo-hero-details">
            <div class="promo-logo-ring">
              <img src="logo uexperience.png" alt="UVC" loading="lazy" />
            </div>
            <div>
              <p class="promo-hero-eyebrow" data-i18n="promos.heroLabel">Campaña activa</p>
              <h3 id="promo-hero-title">May the 4th</h3>
              <p id="promo-hero-description">Upgrades dobles y noches gratis en reservas del 4 al 10 de mayo.</p>
              <div class="promo-hero-stats">
                <div>
                  <span class="promo-stat-label" data-i18n="promos.marketLabel">Mercado objetivo</span>
                  <strong id="promo-hero-market">US + LATAM Fans</strong>
                </div>
                <div>
                  <span class="promo-stat-label" data-i18n="promos.valueLabel">Beneficio clave</span>
                  <strong id="promo-hero-value">Upgrades & noches</strong>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div>
          <div class="promo-thumb-heading" data-i18n="promos.timelineLabel">Elige la promoción que quieres contar</div>
          <div class="promo-thumb-grid">
            <button class="promo-thumb active" type="button"
              data-img="breathless 1.webp"
              data-alt="Suite Breathless con decoración temática"
              data-title="May the 4th"
              data-desc="Upgrades dobles y noches gratis en reservas del 4 al 10 de mayo."
              data-window="4 - 10 MAY"
              data-season="Temporada especial"
              data-market="US + LATAM Fans"
              data-value="Upgrades & noches ilimitadas">
              <span>Mayo</span>
              <strong>May the 4th</strong>
              <small>Semana temática galáctica</small>
            </button>

            <button class="promo-thumb" type="button"
              data-img="breathless 4.webp"
              data-alt="Escena nocturna en Breathless con luces neón"
              data-title="Black Friday"
              data-desc="Descuento adicional del 20% y certificados exclusivos para cerrar ese mismo día."
              data-window="Nov 24 - 27"
              data-season="Venta Anual"
              data-market="US · Canadá · LATAM"
              data-value="20% OFF + certificados">
              <span>Nov</span>
              <strong>Black Friday</strong>
              <small>Oferta relámpago</small>
            </button>

            <button class="promo-thumb" type="button"
              data-img="dreams 1.webp"
              data-alt="Familia disfrutando Dreams Resort"
              data-title="Cyber Monday"
              data-desc="Créditos UVC extra y noches ilimitadas durante las primeras 72 horas de la semana."
              data-window="Nov 27 - 30"
              data-season="Venta Digital"
              data-market="Global Online"
              data-value="Créditos UVC extra">
              <span>Nov</span>
              <strong>Cyber Monday</strong>
              <small>72 hrs digitales</small>
            </button>

            <button class="promo-thumb" type="button"
              data-img="conde 1.jpg"
              data-alt="Promoción de verano frente al mar"
              data-title="Forever Summer"
              data-desc="Experiencias de spa incluidas y upgrade de suite durante la temporada de verano."
              data-window="Jun - Ago"
              data-season="Verano"
              data-market="Resorts Caribe & Med"
              data-value="Spa + upgrade suite">
              <span>Verano</span>
              <strong>Forever Summer</strong>
              <small>Campaña anual</small>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="sale-overlay" id="sale-overlay" aria-live="polite">
    <div class="sale-card">
      <div class="sale-staff">
        <div class="sale-staff-grid">
          <label data-i18n="sale.staffLiner">Liner asignado
            <input type="text" id="sale-liner-input" data-session-field="liner" list="liner-options" placeholder="Selecciona o escribe el nombre" autocomplete="off" />
          </label>
          <label data-i18n="sale.staffCloser">Closer asignado
            <input type="text" id="sale-closer-input" data-session-field="closer" list="closer-options" placeholder="Selecciona o escribe el nombre" autocomplete="off" />
          </label>
        </div>
        <div class="sale-staff-hint" data-i18n="sale.staffHint">Usa la lista del administrador o escribe el nombre manualmente.</div>
        <div class="sale-staff-error" id="sale-staff-error"></div>
      </div>
      <div class="sale-choice" id="sale-choice">
        <h3 data-i18n="sale.promptTitle">Log this pitch</h3>
        <p data-i18n="sale.promptSubtitle">Did this presentation close a sale?</p>
        <div class="sale-choice-buttons">
          <button type="button" data-choice="win" data-i18n="sale.successBtn">Sale closed</button>
          <button type="button" data-choice="loss" data-i18n="sale.pendingBtn">Not this time</button>
        </div>
      </div>

      <form class="sale-form" id="sale-form-win">
        <div class="sale-field">
          <label for="sale-win-q1" data-i18n="sale.winQ1">What convinced the member the most?</label>
          <select id="sale-win-q1" required>
            <option value="price" data-i18n="sale.optionPrice">Best price</option>
            <option value="service" data-i18n="sale.optionService">Service & support</option>
            <option value="benefits" data-i18n="sale.optionBenefits">Member benefits</option>
            <option value="urgency" data-i18n="sale.optionUrgency">Limited-time incentives</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-win-q2" data-i18n="sale.winQ2">What content sealed the decision?</label>
          <select id="sale-win-q2" required>
            <option value="comparison" data-i18n="sale.optionComparison">Price comparison</option>
            <option value="gallery" data-i18n="sale.optionGallery">Gallery & videos</option>
            <option value="agency" data-i18n="sale.optionTravelAgency">Travel agency perks</option>
            <option value="other" data-i18n="sale.optionOther">Other</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-win-amount" data-i18n="sale.winAmount">Sale amount (USD)</label>
          <input type="number" id="sale-win-amount" min="0" step="1" required placeholder="950" />
        </div>
        <div class="sale-field">
          <label for="sale-win-notes" data-i18n="sale.notesLabel">Notes</label>
          <textarea id="sale-win-notes" placeholder="..." ></textarea>
        </div>
        <div class="sale-actions">
          <button type="button" class="sale-btn secondary" data-form-back="win" data-i18n="sale.backBtn">Back</button>
          <button type="submit" class="sale-btn primary" data-i18n="sale.saveBtn">Save</button>
        </div>
      </form>

      <form class="sale-form" id="sale-form-loss">
        <div class="sale-field">
          <label for="sale-loss-q1" data-i18n="sale.lossQ1">What did not meet expectations?</label>
          <select id="sale-loss-q1" required>
            <option value="price" data-i18n="sale.optionPrice">Price</option>
            <option value="quality" data-i18n="sale.optionQuality">Quality</option>
            <option value="service" data-i18n="sale.optionServiceOnly">Service</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-loss-q2" data-i18n="sale.lossQ2">Clarity of information</label>
          <select id="sale-loss-q2" required>
            <option value="1" data-i18n="sale.clarity1">1 · Very unclear</option>
            <option value="2" data-i18n="sale.clarity2">2 · Could be clearer</option>
            <option value="3" data-i18n="sale.clarity3">3 · Neutral</option>
            <option value="4" data-i18n="sale.clarity4">4 · Clear</option>
            <option value="5" data-i18n="sale.clarity5">5 · Extremely clear</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-loss-q3" data-i18n="sale.lossQ3">Which part should we improve?</label>
          <select id="sale-loss-q3" required>
            <option value="flow" data-i18n="sale.optionFlow">Presentation flow</option>
            <option value="professionalism" data-i18n="sale.optionProfessionalism">Staff professionalism</option>
            <option value="resorts" data-i18n="sale.optionResorts">Resort options</option>
            <option value="value" data-i18n="sale.optionValue">Overall value & benefits</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-loss-notes" data-i18n="sale.notesLabel">Notes</label>
          <textarea id="sale-loss-notes" placeholder="..." ></textarea>
        </div>
        <div class="sale-actions">
          <button type="button" class="sale-btn secondary" data-form-back="loss" data-i18n="sale.backBtn">Back</button>
          <button type="submit" class="sale-btn primary" data-i18n="sale.saveBtn">Save</button>
        </div>
      </form>

      <div class="sale-stats">
        <div>
          <span data-i18n="sale.closedLabel">Closed</span>
          <strong id="sale-win-count">0</strong>
        </div>
        <div>
          <span data-i18n="sale.pendingLabel">Pending</span>
          <strong id="sale-loss-count">0</strong>
        </div>
      </div>
      <datalist id="liner-options"></datalist>
      <datalist id="closer-options"></datalist>
    </div>
  </div>

  <!-- -------------- MODALES PARA CADA MARCA -------------- -->

  <!-- Zoetry -->
  <div class="modal-overlay" id="modal-zoetry">
    <div class="modal">
      <div class="modal-header">
        <h2>Zoëtry Wellness & Spa Resorts</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <div class="video-wrapper">
            <video id="zoetry-main-video" controls playsinline preload="metadata" poster="images/zoetry-poster.jpg">
              <source src="videozoetry(og).mp4" type="video/mp4">
              Tu navegador no soporta el elemento <code>video</code>. <a href="videozoetry(og).mp4">Descargar / Ver video</a>
            </video>
          </div>
        </div>
        <p class="modal-description">
          Luxury wellness retreats with gourmet dining, oceanfront suites, and spa-inclusive experiences in boutique-style sanctuaries.
        </p>
        <div class="modal-gallery">
          <img src="true tranquility zoetry.webp" alt="Zoetry Resort 1" loading="lazy" />
          <img src="zoetry endless dining.webp" alt="Zoetry Resort 2" loading="lazy" />
          <img src="personalized service,zoetry.webp" alt="Zoetry Resort 3" loading="lazy" />
          <img src="junior suit ocean view terrace zoetry.webp" alt="Zoetry Resort 4" loading="lazy" />
          <img src="couple in valcony.webp" alt="Zoetry Resort 5" loading="lazy" />
          <img src="romantic dinner.webp" alt="Zoetry Resort 6" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Secrets -->
  <div class="modal-overlay" id="modal-secrets">
    <div class="modal">
      <div class="modal-header">
        <h2>Secrets Resorts & Spas</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <video src="Secrets Bahia Mita Surf & Spa Resort _ Unlimited Vacation Club.mp4" controls muted preload="metadata"></video>
        </div>
        <p class="modal-description">
          Adults-only, romantic beachfront escapes with gourmet à la carte dining, premium drinks and world-class service.
        </p>
        <div class="modal-gallery">
          <img src="secrets punta mita 1.webp" alt="Secrets Resort 1" loading="lazy" />
          <img src="secrets punta mita 2.webp" alt="Secrets Resort 2" loading="lazy" />
          <img src="secrets punta mita 3.webp" alt="Secrets Resort 3" loading="lazy" />
          <img src="secrets pounta mita 5.webp" alt="Secrets Resort 4" loading="lazy" />
          <img src="secrets punta mita 5.webp" alt="Secrets Resort 5" loading="lazy" />
          <img src="secrets punta mita 6.webp" alt="Secrets Resort 6" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Breathless -->
  <div class="modal-overlay" id="modal-breathless">
    <div class="modal">
      <div class="modal-header">
        <h2>Breathless Resorts & Spas</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <video src="Breathless Cancun Soul Resort Video.mp4" controls muted preload="metadata"></video>
        </div>
        <p class="modal-description">
          Vibrant, chic and ultra-modern resorts with DJ parties, social atmosphere and stunning oceanfront views.
        </p>
        <div class="modal-gallery">
          <img src="breathless 1.webp" alt="Breathless Resort 1" loading="lazy" />
          <img src="breathless 2.webp" alt="Breathless Resort 2" loading="lazy" />
          <img src="breathless 3.webp" alt="Breathless Resort 3" loading="lazy" />
          <img src="breathless 4.webp" alt="Breathless Resort 4" loading="lazy" />
          <img src="breathless 5.webp" alt="Breathless Resort 5" loading="lazy" />
          <img src="breathless 6.webp" alt="Breathless Resort 6" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Dreams -->
  <div class="modal-overlay" id="modal-dreams">
    <div class="modal">
      <div class="modal-header">
        <h2>Dreams Resorts & Spas</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <video src="Discover All-Inclusive Luxury at Dreams┬« Sands Cancun Resort & Spa.mp4" controls muted preload="metadata"></video>
        </div>
        <p class="modal-description">
          Family-friendly beachfront resorts with kids’ clubs, gourmet cuisine and spacious suites for every type of traveler.
        </p>
        <div class="modal-gallery">
          <img src="dreams 1.webp" alt="Dreams Resort 1" loading="lazy" />
          <img src="dreams 2.webp" alt="Dreams Resort 2" loading="lazy" />
          <img src="dreams 3.webp" alt="Dreams Resort 3" loading="lazy" />
          <img src="dreams 4.webp" alt="Dreams Resort 4" loading="lazy" />
          <img src="dreams 5.webp" alt="Dreams Resort 5" loading="lazy" />
          <img src="dreams 6.webp" alt="Dreams Resort 6" loading="lazy" />
        </div>
      </div>
    </div>
  </div>
  <!-- Hyatt: gallery of condos (images + videos) -->
  <div class="modal-overlay" id="modal-hyatt">
    <div class="modal">
      <div class="modal-header">
        <h2>World of Hyatt — Exchange Condos</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <div class="video-wrapper">
            <video id="hyatt-main-video" controls playsinline preload="metadata" poster="images/hyatt-condo1-poster.jpg">
              <source src="World of Hyatt Inclusive Collection.mp4" type="video/mp4">
            </video>
          </div>
          <div class="divider"></div>
          <div class="modal-gallery">
            <img src="hondaafushi island resort.jpg" alt="Hyatt Condo 1" loading="lazy">
            <img src="hondafusihi island resort 2.jpg" alt="Hyatt Condo 2" loading="lazy">
            <img src="hondafushi island resort 3.jpg" alt="Hyatt Condo 3" loading="lazy">
            <img src="hondafusihi island resort ban╠âo.jpg" alt="condo baño" loading="lazy">
            <img src="hondafushi island resort 3.jpg" alt="Hyatt Condo 5" loading="lazy">
            <img src="med1.jpg" alt="Mediterranean 1" loading="lazy">
            <img src="med2.jpg" alt="Mediterranean 2" loading="lazy">
            <img src="med3.jpg" alt="Mediterranean 3" loading="lazy">
            <img src="med4.jpg" alt="Mediterranean 4" loading="lazy">
            <img src="med5.jpg" alt="Mediterranean 5" loading="lazy">
            <img src="med6.jpg" alt="Mediterranean 6" loading="lazy">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- UExperience -->
  <div class="modal-overlay" id="modal-uexperience">
    <div class="modal">
      <div class="modal-header">
        <h2>UExperience Immersive Gallery</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <div class="video-wrapper">
            <video controls playsinline preload="metadata" poster="conde maldives 3.jpg">
              <source src="Unforgettable Travel & Lifestyle Perks _ U Experiences by ONE.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
          </div>
        </div>
        <p class="modal-description">
          Signature villas, yacht escapes and curated experiences designed exclusively for Unlimited Vacation Club members.
        </p>
        <div class="modal-gallery">
          <img src="conde 1.jpg" alt="Infinity pool sunset" loading="lazy" />
          <img src="conde 3.jpg" alt="Private dining over water" loading="lazy" />
          <img src="conde 7.jpg" alt="Oceanfront lounge" loading="lazy" />
          <img src="enrichment expiernces.webp" alt="Cultural immersion" loading="lazy" />
          <img src="elevated ameneties.webp" alt="Elevated amenities" loading="lazy" />
          <img src="condo maldives.jpg" alt="Maldives suite" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Hyatt Vivid -->
  <div class="modal-overlay" id="modal-vivid">
    <div class="modal">
      <div class="modal-header">
        <h2>Hyatt Vivid</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <img src="hyat vivid3.png" alt="Hyatt Vivid" style="width:100%; border-radius:12px;" loading="lazy" />
        </div>
        <p class="modal-description">
          Social beachfront labs with DJs, mixology carts and rooftop wellness studios.
        </p>
        <div class="modal-gallery">
          <img src="elevated ameneties.webp" alt="Premium amenities" loading="lazy" />
          <img src="enrichment expiernces.webp" alt="Creative sessions" loading="lazy" />
          <img src="breathless 3.webp" alt="Nightlife" loading="lazy" />
          <img src="breathless 5.webp" alt="Private lounge" loading="lazy" />
          <img src="condo maldives 5.jpg" alt="Ocean deck" loading="lazy" />
          <img src="condo 4.jpg" alt="Sunset view" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Alua -->
  <div class="modal-overlay" id="modal-alua">
    <div class="modal">
      <div class="modal-header">
        <h2>Alua Hotels & Resorts</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <img src="alua3.png" alt="Alua Hotels" style="width:100%; border-radius:12px;" loading="lazy" />
        </div>
        <p class="modal-description">
          Mediterranean-inspired escapes with family suites, coastal clubs and curated excursions.
        </p>
        <div class="modal-gallery">
          <img src="conde maldives 3.jpg" alt="Beachfront suite" loading="lazy" />
          <img src="true tranquility zoetry.webp" alt="Infinity pool" loading="lazy" />
          <img src="romantic dinner.webp" alt="Dinner under the stars" loading="lazy" />
          <img src="condo maldives 7.jpg" alt="Terrace view" loading="lazy" />
          <img src="condo 7.jpg" alt="Living area" loading="lazy" />
          <img src="condo 2.jpg" alt="Resort gardens" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- ------------------- SCRIPT INTERACTIVO ------------------- -->
  <script>
  (function(){
    'use strict';

    const q  = (sel, ctx=document) => ctx.querySelector(sel);
    const qa = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    const PIN_CODE = '5910416';
    const SALES_STORAGE_KEY = 'uvcSalesLog';
    const SESSION_STORAGE_KEY = 'uvcSessionNames';
    const ADMIN_CONFIG_STORAGE_KEY = 'uvcAdminConfig';
    const PRICE_DRIFT_INTERVAL = 15 * 1000;
    const PRICE_DRIFT_STEP = 4;
    const PRICE_DRIFT_RANGE = 10;
    const INCENTIVE_BLOCK_SIZE = 10000;
    const INCENTIVE_AI_NIGHTS = 7;
    const INCENTIVE_HYATT_WEEKS = 2;
    const INCENTIVE_HYATT_POINTS = 1000;
    const HYATT_WEEK_VALUE = 2000;
    const INCENTIVE_REWARD_CREDITS = 1;
    const DEFAULT_AI_NIGHT_VALUE = 500;
    const priceCheckerToggle  = q('#price-checker-toggle');
    const priceCheckerPanel   = q('#price-checker-panel');
    const priceCheckerNote    = q('#price-checker-note');
    const priceCheckerClose   = priceCheckerPanel ? q('.pc-close', priceCheckerPanel) : null;
    const homeScreen          = q('#home-screen');
    const homeConfig          = q('#home-config');
    const startDemoBtn        = q('#start-demo-btn');
    const adminBtn            = q('#admin-btn');
    const closePitchBtn       = q('#close-pitch-btn');
    const pinForm             = q('#pin-form');
    const pinInput            = q('#pin-input');
    const pinStatus           = q('#pin-status');
    const configLockedMessage = q('#config-locked-message');
    const configInputs        = qa('[data-config-field]');
    const relockBtn           = q('#relock-btn');
    const sessionInputs       = qa('[data-session-field]');
    const staffInputs         = qa('[data-staff-field]');
    const staffOptionLists    = {
      liner: q('#liner-options'),
      closer: q('#closer-options')
    };
    const saleStaffInputs     = {
      liner: q('#sale-liner-input'),
      closer: q('#sale-closer-input')
    };
    const saleStaffError      = q('#sale-staff-error');
    const configSaveButtons   = qa('[data-config-save]');
    const saleOverlay         = q('#sale-overlay');
    const saleChoiceSection   = q('#sale-choice');
    const saleChoiceButtons   = qa('.sale-choice-buttons button[data-choice]');
    const saleForms           = {
      win: q('#sale-form-win'),
      loss: q('#sale-form-loss')
    };
    const saleBackButtons     = qa('[data-form-back]');
    const saleWinCount        = q('#sale-win-count');
    const saleLossCount       = q('#sale-loss-count');
    const downloadSalesReportBtn = q('#download-sales-report');
    const resetSalesBtn          = q('#reset-sales-btn');
    const metricAvgSale       = q('#metric-avg-sale');
    const metricConversion    = q('#metric-conversion');
    const metricTotalVolume   = q('#metric-total-volume');
    const metricClarity       = q('#metric-clarity');
    const volumeOutputs = {
      day: q('[data-volume="day"]'),
      week: q('[data-volume="week"]'),
      biweek: q('[data-volume="biweek"]')
    };
    const rankingLists = {
      liner: q('#liner-ranking'),
      closer: q('#closer-ranking')
    };
    const topLinerName   = q('#top-liner-name');
    const topLinerAmount = q('#top-liner-amount');
    const topCloserName  = q('#top-closer-name');
    const topCloserAmount= q('#top-closer-amount');
    const comparisonBars = {
      liner: q('[data-bar="liner"]'),
      closer: q('[data-bar="closer"]')
    };
    const comparisonValues = {
      liner: q('[data-bar-value="liner"]'),
      closer: q('[data-bar-value="closer"]')
    };

    const translations = {
      es: {
        'header.allInclusive': 'Resorts Todo Incluido',
        'header.worldwide': 'Worldwide',
        'header.travelAgency': 'Agencia de Viajes',
        'col1.title': 'Unlimited Vacation Club',
        'col1.benefit1': '+125 Resorts.',
        'col1.benefit2': '25% Mejor Precio Garantizado.',
        'col1.benefit3': 'Free Upgrade.',
        'col1.benefit4': '185 USD.',
        'col1.benefit5': 'Concierge Service.',
        'col1.benefit6': '25 USD Extra Reservation.',
        'col1.notes': '20 habitaciones · $1000 = 5000 pts · Mínimo 2 noches · 72 hrs · Best price',
        'col2.title': 'Worldwide Exchange',
        'col2.list1': '4500+ Resorts',
        'col2.list2': '100+ Países',
        'col2.hyatt1': '1200 Hoteles',
        'col2.hyatt2': '72 Países',
        'col2.notes': '599 tarifa fija · 2 recámaras · 6 personas · 7N/8D · 2 años free – Worldwide [109 USD]',
        'col3.title': 'UExperience',
        'col3.titleTail': 'Experience',
        'col3.cruisesLabel': 'Cruises Rewards',
        'col3.flightsLabel': 'Flights',
        'col3.note': '3500 / 3000 / 1000 · 2 años free – Travel Agency · 5000 USD · 18 meses · Travel Agency [399 USD]',
        'utility.toggle': 'Herramientas',
        'utility.menuTitle': 'Centro de control',
        'utility.priceChecker': 'Checker Price',
        'utility.settings': 'Configuración',
        'utility.simulators': 'Simuladores',
        'breakeven.title': 'ROI Retail vs Membresía',
        'breakeven.subtitle': 'Ajusta los precios reales para mostrar cuántos viajes necesitas para recuperar la inversión.',
        'breakeven.groupVolume': 'Membresía y volumen',
        'breakeven.groupTrip': 'Grupo y noches',
        'breakeven.groupRates': 'Tarifa por persona / noche',
        'breakeven.groupExtras': 'Gastos extra (spa / actividades)',
        'breakeven.membershipCost': 'Costo de la membresía (USD)',
        'breakeven.tripsPerYear': 'Viajes por año',
        'breakeven.years': 'Años a proyectar',
        'breakeven.nights': 'Noches por viaje',
        'breakeven.travelers': 'Personas / suite',
        'breakeven.retailNight': 'Retail (USD)',
        'breakeven.memberNight': 'UVC (USD)',
        'breakeven.extraRetail': 'Gasto estimado retail (por viaje)',
        'breakeven.extraDiscount': 'Descuento UVC en extras (%)',
        'breakeven.extraHint': 'Aplica el descuento de socio a spa, actividades, golf o transporte.',
        'breakeven.perTrip': 'Ahorro por viaje',
        'breakeven.tripRetail': 'Viaje retail',
        'breakeven.tripMember': 'Viaje UVC',
        'breakeven.tripSavings': 'Ahorro por viaje',
        'breakeven.annualSavings': 'Ahorro anual',
        'breakeven.breakEven': 'Punto de equilibrio',
        'breakeven.membershipLabel': 'Costo membresía',
        'breakeven.incentiveNights': 'Noches all inclusive',
        'breakeven.incentiveWeeks': 'Semanas Hyatt',
        'breakeven.incentivePoints': 'Puntos Hyatt',
        'breakeven.quickCalcTitle': 'Calculadora rápida',
        'breakeven.quickCalcHint': 'Usa + - × ÷ y paréntesis para cualquier presupuesto.',
        'calc.title': 'Calculadora',
        'calc.hint': 'Usa + - × ÷ y paréntesis para cualquier presupuesto.',
        'sim.tabs.retail': 'ROI Retail vs Membresía',
        'sim.tabs.incentives': 'ROI Incentivos',
        'sim.tabs.calc': 'Calculadora',
        'sim.labTitle': 'UVC Sales Lab',
        'sim.labSubtitle': 'Simuladores corporativos',
        'incentives.title': 'Calculadora ROI de incentivos',
        'incentives.subtitle': 'Descubre cuánto valor adicional reciben por noches AI, semanas Hyatt y reward credits.',
        'incentives.investment': 'Inversión del cliente (USD)',
        'incentives.nights': 'Noches all inclusive',
        'incentives.weeks': 'Semanas Hyatt',
        'incentives.credits': 'Reward credits',
        'incentives.nightsValue': 'Valor noches',
        'incentives.weeksValue': 'Valor Hyatt',
        'incentives.creditsValue': 'Valor credits',
        'incentives.totalValue': 'Valor total',
        'incentives.roi': 'ROI incentivos',
        'promos.title': 'Promociones UVC',
        'promos.subtitle': 'Selecciona una campaña para mostrar las fotos en formato grande.',
        'promos.heroLabel': 'Campaña activa',
        'promos.marketLabel': 'Mercado objetivo',
        'promos.valueLabel': 'Beneficio clave',
        'promos.timelineLabel': 'Elige la promoción que quieres contar',
        'priceChecker.label': 'Price Checker',
        'priceChecker.title': 'Comparador en vivo',
        'priceChecker.subtitle': 'Secrets Puerto Los Cabos vs Zoëtry Los Cabos',
        'priceChecker.publicRate': 'Tarifa Pública',
        'priceChecker.memberRate': 'Tarifa UVC',
        'priceChecker.savingsInline': 'Ahorro UVC {value}%',
        'priceChecker.note': 'Mayor ahorro con UVC: {value}%.',
        'home.title': 'Centro de Control 3-Way Pitch',
        'home.subtitle': 'Unlimited Vacation Club',
        'home.readyText': 'La presentación está lista. Presiona iniciar; los nombres del equipo se capturan al cerrar.',
        'home.lockedMessage': 'Ingresa el PIN para desbloquear esta sección privada.',
        'home.lockPanel': 'Bloquear panel',
        'home.staffTitle': 'Equipo disponible',
        'home.staffLiners': 'Liners',
        'home.staffClosers': 'Closers',
        'home.staffHint': 'Se mostrarán como sugerencias al registrar un cierre.',
        'sale.promptTitle': 'Registra este pitch',
        'sale.promptSubtitle': '¿Se concretó la venta?',
        'sale.successBtn': 'Venta lograda',
        'sale.pendingBtn': 'Aún no',
        'sale.staffLiner': 'Liner asignado',
        'sale.staffCloser': 'Closer asignado',
        'sale.staffHint': 'Usa la lista del administrador o escribe el nombre manualmente.',
        'sale.staffEmpty': 'Agrega nombres en el administrador.',
        'sale.staffError': 'Selecciona el liner y el closer antes de continuar.',
        'sale.skipBtn': 'Omitir',
        'sale.closedLabel': 'Cerradas',
        'sale.pendingLabel': 'Pendientes',
        'sale.winQ1': '¿Qué convenció más al socio?',
        'sale.winQ2': '¿Qué contenido cerró la decisión?',
        'sale.winAmount': 'Monto vendido (USD)',
        'sale.lossQ1': '¿Qué no cumplió tus expectativas?',
        'sale.lossQ2': '¿Qué tan clara fue la información?',
        'sale.lossQ3': '¿Qué parte debemos mejorar?',
        'sale.notesLabel': 'Notas',
        'sale.backBtn': 'Regresar',
        'sale.saveBtn': 'Guardar',
        'sale.optionPrice': 'Precio',
        'sale.optionQuality': 'Calidad',
        'sale.optionServiceOnly': 'Servicio',
        'sale.optionService': 'Servicio y acompañamiento',
        'sale.optionBenefits': 'Beneficios exclusivos',
        'sale.optionUrgency': 'Incentivos de tiempo limitado',
        'sale.optionComparison': 'Comparador de precios',
        'sale.optionGallery': 'Galería y videos',
        'sale.optionTravelAgency': 'Agencia de viajes',
        'sale.optionOther': 'Otro',
        'sale.optionTiming': 'Momento / presupuesto',
        'sale.optionInfo': 'Faltó información',
        'sale.optionTrust': 'Confianza / credibilidad',
        'sale.optionPresentation': 'Historia / presentación',
        'sale.optionFollowup': 'Seguimiento / urgencia',
        'sale.optionBenefitsDetail': 'Explicar beneficios',
        'sale.optionFlow': 'Flujo de la presentación',
        'sale.optionProfessionalism': 'Profesionalismo del equipo',
        'sale.optionResorts': 'Opciones de resorts',
        'sale.optionValue': 'Valor y beneficios',
        'sale.clarity1': '1 · Muy confusa',
        'sale.clarity2': '2 · Podría mejorar',
        'sale.clarity3': '3 · Neutral',
        'sale.clarity4': '4 · Clara',
        'sale.clarity5': '5 · Extremadamente clara',
        'sale.reportInfo': 'Descarga un resumen de ventas.',
        'sale.reportBtn': 'Descargar CSV',
        'home.start': 'Iniciar presentación',
        'home.configTitle': 'Panel de administración',
        'home.configSubtitle': 'Ingresa el PIN para editar precios en vivo.',
        'home.language': 'Idioma',
        'home.unlock': 'Desbloquear',
        'home.destinationLabel': 'Nombre del hotel',
        'home.expediaLabel': 'Expedia (USD)',
        'home.bookingLabel': 'Booking (USD)',
        'home.despegarLabel': 'Despegar (USD)',
        'home.discountLabel': 'Descuento UVC %',
        'home.saveProperty': 'Guardar precios',
        'home.summaryLabel': 'Tarifa UVC lista',
        'home.pinSuccess': 'PIN correcto. Edición habilitada.',
        'home.pinError': 'PIN incorrecto. Intenta de nuevo.',
        'home.incentiveTitle': 'Costos manuales de incentivos',
        'home.incentiveAiLabel': 'Valor noche all inclusive (USD)',
        'home.incentiveHyattLabel': 'Valor semana Hyatt (USD)',
        'home.incentiveCreditsLabel': 'Valor por reward credit (USD)',
        'home.incentiveHint': 'Deja vacío el valor de noche para usar el precio público del comparador.',
        'analytics.linerInput': 'Nombre del Liner',
        'analytics.closerInput': 'Nombre del Closer',
        'analytics.staffInfo': 'Los nombres del equipo se llenan al registrar cada encuesta.',
        'analytics.avgSale': 'Promedio de ventas',
        'analytics.avgSaleHint': 'Promedio por venta cerrada',
        'analytics.conversion': 'Porcentaje de cierre',
        'analytics.conversionHint': 'Intentos registrados',
        'analytics.totalVolume': 'Volumen total',
        'analytics.totalVolumeHint': 'Ventas acumuladas',
        'analytics.clarityScore': 'Índice de claridad',
        'analytics.clarityHint': 'Encuestas de clientes',
        'analytics.dayVolume': 'Volumen diario',
        'analytics.weekVolume': 'Volumen semanal',
        'analytics.biweekVolume': 'Volumen quincenal',
        'analytics.linerRanking': 'Ranking Liners',
        'analytics.closerRanking': 'Ranking Closers',
        'analytics.topLiner': 'Top Liner',
        'analytics.topCloser': 'Top Closer',
        'analytics.teamCompare': 'Comparación Liners vs Closers',
        'analytics.linersLabel': 'Liners',
        'analytics.closersLabel': 'Closers',
        'analytics.noData': 'Sin datos disponibles',
        'analytics.resetBtn': 'Limpiar datos',
        'analytics.resetConfirm': '¿Seguro que quieres borrar el historial de ventas? Esta acción no se puede deshacer.'
      },
      en: {
        'header.allInclusive': 'All Inclusive Resorts',
        'header.worldwide': 'Worldwide',
        'header.travelAgency': 'Travel Agency',
        'col1.title': 'Unlimited Vacation Club',
        'col1.benefit1': '+125 Resorts.',
        'col1.benefit2': '25% Best Price Guaranteed.',
        'col1.benefit3': 'Free Upgrade.',
        'col1.benefit4': '185 USD.',
        'col1.benefit5': 'Concierge Service.',
        'col1.benefit6': '25 USD Extra Reservation.',
        'col1.notes': '20 Rooms · $1000 = 5000 points · Minimum 2 nights · 72 hrs · Best price',
        'col2.title': 'Worldwide Exchange',
        'col2.list1': '4500+ Resorts',
        'col2.list2': '100+ Countries',
        'col2.hyatt1': '1200 Hotels',
        'col2.hyatt2': '72 Countries',
        'col2.notes': '599 fixed price · 2 bedrooms · 6 people · 7N/8D · 2 years free – Worldwide [109 USD]',
        'col3.title': 'UExperience',
        'col3.titleTail': 'Experience',
        'col3.cruisesLabel': 'Cruises Rewards',
        'col3.flightsLabel': 'Flights',
        'col3.note': '3500 / 3000 / 1000 · 2 years free – Travel Agency · 5000 USD · 18 Months · Travel Agency [399 USD]',
        'utility.toggle': 'Tools',
        'utility.menuTitle': 'Control center',
        'utility.priceChecker': 'Price checker',
        'utility.settings': 'Settings',
        'utility.simulators': 'Simulators',
        'breakeven.title': 'Retail vs Membership ROI',
        'breakeven.subtitle': 'Use live rates to show how many trips are needed to recover the buy-in.',
        'breakeven.groupVolume': 'Membership & volume',
        'breakeven.groupTrip': 'Group & nights',
        'breakeven.groupRates': 'Rate per guest / night',
        'breakeven.groupExtras': 'Extra spending (spa / activities)',
        'breakeven.membershipCost': 'Membership cost (USD)',
        'breakeven.tripsPerYear': 'Trips per year',
        'breakeven.years': 'Years to project',
        'breakeven.nights': 'Nights per trip',
        'breakeven.travelers': 'Guests per trip',
        'breakeven.retailNight': 'Retail (USD)',
        'breakeven.memberNight': 'Member (USD)',
        'breakeven.extraRetail': 'Estimated retail extras (per trip)',
        'breakeven.extraDiscount': 'Member discount on extras (%)',
        'breakeven.extraHint': 'Apply the member discount to spa, activities, golf or transfers.',
        'breakeven.perTrip': 'Savings per trip',
        'breakeven.tripRetail': 'Retail trip',
        'breakeven.tripMember': 'UVC trip',
        'breakeven.tripSavings': 'Savings per trip',
        'breakeven.annualSavings': 'Annual savings',
        'breakeven.breakEven': 'Break-even',
        'breakeven.membershipLabel': 'Membership cost',
        'breakeven.incentiveNights': 'All-inclusive nights',
        'breakeven.incentiveWeeks': 'Hyatt weeks',
        'breakeven.incentivePoints': 'Hyatt points',
        'breakeven.quickCalcTitle': 'Quick calculator',
        'breakeven.quickCalcHint': 'Use + - × ÷ and parentheses for any budget.',
        'calc.title': 'Calculator',
        'calc.hint': 'Use + - × ÷ and parentheses for any budget.',
        'sim.tabs.retail': 'Retail vs membership ROI',
        'sim.tabs.incentives': 'ROI incentives',
        'sim.tabs.calc': 'Calculator',
        'sim.labTitle': 'UVC Sales Lab',
        'sim.labSubtitle': 'Corporate simulators',
        'incentives.title': 'Incentives ROI calculator',
        'incentives.subtitle': 'Show the extra value created by AI nights, Hyatt weeks and reward credits.',
        'incentives.investment': 'Client investment (USD)',
        'incentives.nights': 'All-inclusive nights',
        'incentives.weeks': 'Hyatt weeks',
        'incentives.credits': 'Reward credits',
        'incentives.nightsValue': 'Night value',
        'incentives.weeksValue': 'Hyatt value',
        'incentives.creditsValue': 'Credits value',
        'incentives.totalValue': 'Total value',
        'incentives.roi': 'Incentives ROI',
        'promos.title': 'UVC Promotions',
        'promos.subtitle': 'Pick a campaign to project the visuals in a large view.',
        'promos.heroLabel': 'Live campaign',
        'promos.marketLabel': 'Target market',
        'promos.valueLabel': 'Key benefit',
        'promos.timelineLabel': 'Choose the promotion you want to pitch',
        'priceChecker.label': 'Price Checker',
        'priceChecker.title': 'Live Price Checker',
        'priceChecker.subtitle': 'Secrets Puerto Los Cabos vs Zoëtry Los Cabos',
        'priceChecker.publicRate': 'Public Rate',
        'priceChecker.memberRate': 'Member Rate',
        'priceChecker.savingsInline': 'UVC savings {value}%',
        'priceChecker.note': 'Best UVC savings: {value}%.',
        'home.title': '3-Way Pitch Control Center',
        'home.subtitle': 'Unlimited Vacation Club',
        'home.readyText': 'Everything is ready. Tap start; team names are captured when you log the pitch.',
        'home.lockedMessage': 'Enter the PIN to reveal these private settings.',
        'home.lockPanel': 'Re-lock panel',
        'home.staffTitle': 'Available team',
        'home.staffLiners': 'Liners',
        'home.staffClosers': 'Closers',
        'home.staffHint': 'These names appear as suggestions when you log a pitch.',
        'sale.promptTitle': 'Log this pitch',
        'sale.promptSubtitle': 'Did this presentation close a sale?',
        'sale.successBtn': 'Sale closed',
        'sale.pendingBtn': 'Not this time',
        'sale.staffLiner': 'Assigned liner',
        'sale.staffCloser': 'Assigned closer',
        'sale.staffHint': 'Pick from the admin list or type it manually.',
        'sale.staffEmpty': 'Add names from the admin panel.',
        'sale.staffError': 'Select the liner and closer before logging the pitch.',
        'sale.skipBtn': 'Skip',
        'sale.closedLabel': 'Closed',
        'sale.pendingLabel': 'Pending',
        'sale.winQ1': 'What convinced the member the most?',
        'sale.winQ2': 'What content sealed the decision?',
        'sale.winAmount': 'Sale amount (USD)',
        'sale.lossQ1': 'What did not meet your expectations?',
        'sale.lossQ2': 'How clear was the information?',
        'sale.lossQ3': 'Which part should we improve?',
        'sale.notesLabel': 'Notes',
        'sale.backBtn': 'Back',
        'sale.saveBtn': 'Save',
        'sale.optionPrice': 'Price',
        'sale.optionQuality': 'Quality',
        'sale.optionServiceOnly': 'Service',
        'sale.optionService': 'Service & support',
        'sale.optionBenefits': 'Member benefits',
        'sale.optionUrgency': 'Limited-time incentives',
        'sale.optionComparison': 'Price comparison',
        'sale.optionGallery': 'Gallery & videos',
        'sale.optionTravelAgency': 'Travel agency perks',
        'sale.optionOther': 'Other',
        'sale.optionTiming': 'Timing / budget',
        'sale.optionInfo': 'Need more information',
        'sale.optionTrust': 'Trust / credibility',
        'sale.optionPresentation': 'Presentation / storytelling',
        'sale.optionFollowup': 'Follow-up / urgency',
        'sale.optionBenefitsDetail': 'Benefit explanation',
        'sale.optionFlow': 'Presentation flow',
        'sale.optionProfessionalism': 'Staff professionalism',
        'sale.optionResorts': 'Resort options',
        'sale.optionValue': 'Overall value & benefits',
        'sale.clarity1': '1 · Very unclear',
        'sale.clarity2': '2 · Needs clarity',
        'sale.clarity3': '3 · Neutral',
        'sale.clarity4': '4 · Clear',
        'sale.clarity5': '5 · Extremely clear',
        'sale.reportInfo': 'Download your sales summary.',
        'sale.reportBtn': 'Download CSV',
        'home.start': 'Start presentation',
        'home.configTitle': 'Admin console',
        'home.configSubtitle': 'Enter the PIN to edit live pricing.',
        'home.language': 'Language',
        'home.unlock': 'Unlock',
        'home.destinationLabel': 'Hotel name',
        'home.expediaLabel': 'Expedia (USD)',
        'home.bookingLabel': 'Booking (USD)',
        'home.despegarLabel': 'Despegar (USD)',
        'home.discountLabel': 'UVC Discount %',
        'home.saveProperty': 'Save prices',
        'home.summaryLabel': 'Member rate ready',
        'home.pinSuccess': 'PIN accepted. Editing enabled.',
        'home.pinError': 'Wrong PIN. Please try again.',
        'home.incentiveTitle': 'Manual incentive costs',
        'home.incentiveAiLabel': 'All-inclusive night value (USD)',
        'home.incentiveHyattLabel': 'Hyatt week value (USD)',
        'home.incentiveCreditsLabel': 'Value per reward credit (USD)',
        'home.incentiveHint': 'Leave the night value empty to use the public rate from the price checker.',
        'analytics.linerInput': 'Liner name',
        'analytics.closerInput': 'Closer name',
        'analytics.staffInfo': 'Team names are recorded inside each guest survey.',
        'analytics.avgSale': 'Average sale',
        'analytics.avgSaleHint': 'Average per closed sale',
        'analytics.conversion': 'Close rate',
        'analytics.conversionHint': 'Based on logged attempts',
        'analytics.totalVolume': 'Total volume',
        'analytics.totalVolumeHint': 'Accumulated wins',
        'analytics.clarityScore': 'Clarity index',
        'analytics.clarityHint': 'Client survey results',
        'analytics.dayVolume': 'Daily volume',
        'analytics.weekVolume': 'Weekly volume',
        'analytics.biweekVolume': 'Biweekly volume',
        'analytics.linerRanking': 'Liner ranking',
        'analytics.closerRanking': 'Closer ranking',
        'analytics.topLiner': 'Top Liner',
        'analytics.topCloser': 'Top Closer',
        'analytics.teamCompare': 'Liners vs Closers',
        'analytics.linersLabel': 'Liners',
        'analytics.closersLabel': 'Closers',
        'analytics.noData': 'No data yet',
        'analytics.resetBtn': 'Clear data',
        'analytics.resetConfirm': 'Clear all sales history? This cannot be undone.'
      }
    };

    function getTranslation(key){
      const dict = translations[state.lang] || translations.es;
      return (dict && dict[key]) || (translations.es && translations.es[key]) || '';
    }

    const propertyPriceTargets = {};
    qa('[data-price-target]').forEach(el => {
      const idx = Number(el.dataset.propertyIndex || 0);
      const key = el.dataset.priceTarget;
      if (!key) return;
      propertyPriceTargets[idx] = propertyPriceTargets[idx] || {};
      propertyPriceTargets[idx][key] = el;
    });

    const propertyNameTargets = {};
    qa('[data-destination-target]').forEach(el => {
      const idx = Number(el.dataset.propertyIndex || 0);
      propertyNameTargets[idx] = el;
    });

    const propertySavingsTargets = {};
    qa('[data-savings-target]').forEach(el => {
      const idx = Number(el.dataset.savingsTarget || 0);
      propertySavingsTargets[idx] = el;
    });

    const uvcSummaryOutputs = {};
    qa('[data-uvc-summary]').forEach(el => {
      const idx = Number(el.dataset.uvcSummary || 0);
      uvcSummaryOutputs[idx] = el;
    });

    const summaryOutputs = {};
    qa('[data-summary-output]').forEach(el => {
      const idx = Number(el.dataset.summaryOutput || 0);
      summaryOutputs[idx] = el;
    });

    const configSummaryOutputs = {};
    qa('[data-config-summary]').forEach(el => {
      const idx = Number(el.dataset.configSummary || 0);
      configSummaryOutputs[idx] = el;
    });

    const configSummaryLabels = {};
    qa('[data-config-summary-label]').forEach(el => {
      const idx = Number(el.dataset.configSummaryLabel || 0);
      configSummaryLabels[idx] = el;
    });

    const configTitleTargets = {};
    qa('[data-config-title-target]').forEach(el => {
      const idx = Number(el.dataset.configTitleTarget || 0);
      configTitleTargets[idx] = el;
    });

    const utilityToggle = q('#utility-menu-toggle');
    const utilityMenu = q('#utility-menu');
    const simulatorPanel = q('#simulator-panel');
    const simulatorTabs = qa('[data-sim-tab]');
    const simulatorViews = qa('[data-sim-view]');
    const simulatorOpenButtons = qa('[data-sim-open]');
    const breakevenSection = q('#breakeven-calculator');
    const breakevenForm = q('#breakeven-form');
    const breakevenInputs = {
      membership: q('#breakeven-membership'),
      trips: q('#breakeven-trips'),
      years: q('#breakeven-years'),
      nights: q('#breakeven-nights'),
      travelers: q('#breakeven-travelers'),
      retailNight: q('#breakeven-retail-night'),
      memberNight: q('#breakeven-member-night'),
      extraRetail: q('#breakeven-extra-retail'),
      extraDiscount: q('#breakeven-extra-discount')
    };
    const breakevenOutputs = {
      tripRetail: q('#breakeven-trip-retail'),
      tripMember: q('#breakeven-trip-member'),
      tripSavings: q('#breakeven-trip-savings'),
      annual: q('#breakeven-annual'),
      breakEven: q('#breakeven-breakpoint')
    };
    const breakevenBars = q('#breakeven-bars');
    const breakevenMarker = q('#breakeven-marker');
    let breakevenFlashTimeout;
    const quickCalcDisplay = q('#quick-calc-display');
    const quickCalcResult = q('#quick-calc-result');
    const quickCalcButtons = qa('[data-quickcalc-value], [data-quickcalc-action]');
    let quickCalcExpression = '';
    const incentiveInput = {
      investment: q('#incentive-investment'),
      nights: q('#incentive-nights-input'),
      weeks: q('#incentive-weeks-input'),
      credits: q('#incentive-credits-input')
    };
    const incentiveOutputs = {
      nightsValue: q('#incentive-nights-value'),
      weeksValue: q('#incentive-weeks-value'),
      creditsValue: q('#incentive-credits-value'),
      total: q('#incentive-value'),
      roi: q('#incentive-roi'),
      chart: {
        marker: q('#incentive-chart-marker'),
        markerLabel: q('#incentive-chart-marker-label'),
        baseline: q('#incentive-chart-baseline'),
        baselineLabel: q('#incentive-chart-baseline-label'),
        bars: {
          investment: q('.incentive-bar[data-bar="investment"]'),
          returned: q('.incentive-bar[data-bar="returned"]')
        },
        investmentLabel: q('#incentive-bar-investment'),
        returnedLabel: q('#incentive-bar-returned')
      }
    };

    const state = {
      lang: 'en',
      pinUnlocked: false,
      properties: [],
      session: { liner: '', closer: '' },
      sales: { win: 0, pending: 0, entries: [] },
      dynamicPrices: [],
      incentives: {
        aiNight: 0,
        hyattWeek: HYATT_WEEK_VALUE,
        credits: INCENTIVE_REWARD_CREDITS
      },
      staff: {
        liners: [],
        closers: []
      }
    };

    function setUtilityMenu(open){
      if (!utilityMenu || !utilityToggle) return;
      const show = !!open;
      utilityMenu.classList.toggle('active', show);
      utilityToggle.setAttribute('aria-expanded', show ? 'true' : 'false');
    }

    function toggleUtilityMenu(){
      if (!utilityMenu) return;
      const show = !utilityMenu.classList.contains('active');
      setUtilityMenu(show);
    }

    function closeUtilityMenu(){
      setUtilityMenu(false);
    }

    function loadSessionData(){
      if (typeof localStorage === 'undefined') return;
      try {
        const raw = localStorage.getItem(SESSION_STORAGE_KEY);
        if (!raw) return;
        const parsed = JSON.parse(raw);
        if (parsed && typeof parsed === 'object'){
          state.session.liner = parsed.liner || '';
          state.session.closer = parsed.closer || '';
        }
      } catch(err){}
    }

    function persistSessionData(){
      if (typeof localStorage === 'undefined') return;
      try {
        localStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(state.session));
      } catch(err){}
    }

    function syncSessionInputs(){
      sessionInputs.forEach(input => {
        const field = input.dataset.sessionField;
        if (!field) return;
        if (document.activeElement === input) return;
        input.value = state.session[field] || '';
      });
    }

    function loadSalesData(){
      if (typeof localStorage === 'undefined') return;
      try {
        const raw = localStorage.getItem(SALES_STORAGE_KEY);
        if (!raw) return;
        const parsed = JSON.parse(raw);
        const entries = Array.isArray(parsed && parsed.entries) ? parsed.entries : [];
        entries.forEach(entry => {
          if (entry && entry.result === 'pending'){
            entry.result = 'loss';
          }
        });
        state.sales.entries = entries;
        state.sales.win = entries.filter(item => item && item.result === 'win').length;
        state.sales.pending = entries.filter(item => item && item.result === 'loss').length;
      } catch(err){}
    }

    function persistSalesData(){
      if (typeof localStorage === 'undefined') return;
      try {
        localStorage.setItem(SALES_STORAGE_KEY, JSON.stringify(state.sales));
      } catch(err){}
    }

    function loadAdminConfig(){
      if (typeof localStorage === 'undefined') return;
      try {
        const raw = localStorage.getItem(ADMIN_CONFIG_STORAGE_KEY);
        if (!raw) return;
        const parsed = JSON.parse(raw);
        if (parsed && Array.isArray(parsed.properties)){
          parsed.properties.forEach((savedProp, idx) => {
            if (!savedProp) return;
            const prop = ensureProperty(idx);
            if (savedProp.destination){
              prop.destination = savedProp.destination;
            }
            if (typeof savedProp.discount !== 'undefined'){
              prop.discount = Number(savedProp.discount) || 0;
            }
            if (savedProp.prices && typeof savedProp.prices === 'object'){
              ['expedia','booking','despegar'].forEach(key => {
                if (typeof savedProp.prices[key] !== 'undefined'){
                  prop.prices[key] = Number(savedProp.prices[key]) || 0;
                  syncDynamicBase(idx, key, prop.prices[key]);
                }
              });
            }
          });
        }
        if (parsed && parsed.incentives){
          if (typeof parsed.incentives.aiNight !== 'undefined'){
            state.incentives.aiNight = Number(parsed.incentives.aiNight) || 0;
          }
          if (typeof parsed.incentives.hyattWeek !== 'undefined'){
            state.incentives.hyattWeek = Number(parsed.incentives.hyattWeek) || HYATT_WEEK_VALUE;
          }
          if (typeof parsed.incentives.credits !== 'undefined'){
            state.incentives.credits = Number(parsed.incentives.credits) || INCENTIVE_REWARD_CREDITS;
          }
        }
        if (parsed && parsed.staff){
          state.staff.liners = Array.isArray(parsed.staff.liners) ? parsed.staff.liners.filter(Boolean) : [];
          state.staff.closers = Array.isArray(parsed.staff.closers) ? parsed.staff.closers.filter(Boolean) : [];
        }
      } catch(err){}
    }

    function persistAdminConfig(){
      if (typeof localStorage === 'undefined') return;
      try {
        const payload = {
          properties: state.properties.map(prop => {
            if (!prop) return null;
            return {
              destination: prop.destination || '',
              discount: Number(prop.discount) || 0,
              prices: {
                expedia: Number(prop.prices && prop.prices.expedia || 0),
                booking: Number(prop.prices && prop.prices.booking || 0),
                despegar: Number(prop.prices && prop.prices.despegar || 0)
              }
            };
          }),
          incentives: {
            aiNight: state.incentives.aiNight || 0,
            hyattWeek: state.incentives.hyattWeek || HYATT_WEEK_VALUE,
            credits: state.incentives.credits || INCENTIVE_REWARD_CREDITS
          },
          staff: {
            liners: state.staff.liners || [],
            closers: state.staff.closers || []
          }
        };
        localStorage.setItem(ADMIN_CONFIG_STORAGE_KEY, JSON.stringify(payload));
      } catch(err){}
    }

    function syncConfigInputsFromState(){
      configInputs.forEach(input => {
        const field = input.dataset.configField;
        if (!field) return;
        if (field === 'incentive-ai'){
          input.value = state.incentives.aiNight > 0 ? state.incentives.aiNight : '';
          return;
        }
        if (field === 'incentive-hyatt'){
          input.value = state.incentives.hyattWeek || HYATT_WEEK_VALUE;
          return;
        }
        if (field === 'incentive-credits'){
          input.value = state.incentives.credits || INCENTIVE_REWARD_CREDITS;
          return;
        }
        const idx = Number(input.dataset.propertyIndex || 0);
        const prop = ensureProperty(idx);
        if (field === 'destination'){
          input.value = prop.destination || '';
        } else if (field === 'discount'){
          input.value = prop.discount;
        } else if (field.startsWith('price-')){
          const key = field.replace('price-', '');
          input.value = prop.prices[key] || 0;
        }
      });
    }

    function updateStaffOptions(){
      const map = {
        liner: state.staff.liners || [],
        closer: state.staff.closers || []
      };
      Object.keys(staffOptionLists).forEach(role => {
        const list = staffOptionLists[role];
        if (!list) return;
        list.innerHTML = '';
        (map[role] || []).forEach(name => {
          const option = document.createElement('option');
          option.value = name;
          list.appendChild(option);
        });
      });
    }

    function syncStaffInputsFromState(){
      staffInputs.forEach(input => {
        const field = input.dataset.staffField;
        if (!field || !state.staff[field]) return;
        input.value = (state.staff[field] || []).join('\n');
      });
      updateStaffOptions();
    }

    function parseStaffList(value){
      return value
        .split(/\r?\n|,/)
        .map(item => item.trim())
        .filter(Boolean);
    }

    function syncPropertyFromInputs(idx){
      const prop = ensureProperty(idx);
      const scopedInputs = qa(`[data-config-field][data-property-index="${idx}"]`);
      scopedInputs.forEach(input => {
        const field = input.dataset.configField;
        if (field === 'destination'){
          prop.destination = input.value;
        } else if (field === 'discount'){
          prop.discount = parseFloat(input.value) || 0;
        } else if (field && field.startsWith('price-')){
          const key = field.replace('price-', '');
          prop.prices[key] = parseFloat(input.value) || 0;
          syncDynamicBase(idx, key, prop.prices[key]);
        }
      });
    }

    loadSessionData();
    loadSalesData();

    function ensureProperty(idx){
      if (!state.properties[idx]){
        state.properties[idx] = {
          destination: `Property ${idx + 1}`,
          prices: { expedia: 0, booking: 0, despegar: 0 },
          discount: 0
        };
      }
      return state.properties[idx];
    }

    function ensureDynamicStore(idx){
      if (!state.dynamicPrices[idx]){
        state.dynamicPrices[idx] = {};
      }
      ['expedia','booking','despegar'].forEach(key => {
        if (!state.dynamicPrices[idx][key]){
          const prop = ensureProperty(idx);
          const base = Number(prop.prices[key]) || 0;
          state.dynamicPrices[idx][key] = {
            base,
            live: base,
            lastUpdate: Date.now()
          };
        }
      });
    }

    function syncDynamicBase(idx, key, base){
      ensureDynamicStore(idx);
      const record = state.dynamicPrices[idx][key];
      if (!record) return;
      record.base = Number(base) || 0;
      record.live = record.base;
      record.lastUpdate = Date.now();
    }

    function getLivePrice(idx, key){
      ensureDynamicStore(idx);
      const record = state.dynamicPrices[idx][key];
      if (!record) return 0;
      return Number(record.live || record.base || 0);
    }

    function getCompetitorLivePrices(idx){
      ensureDynamicStore(idx);
      return ['expedia','booking','despegar']
        .map(key => getLivePrice(idx, key))
        .filter(val => val > 0);
    }

    function getHighestRetailRate(){
      let highest = 0;
      state.properties.forEach((_, idx) => {
        const prices = getCompetitorLivePrices(idx);
        if (prices.length){
          const candidate = Math.max(...prices);
          if (candidate > highest) highest = candidate;
        }
      });
      return highest || (DEFAULT_AI_NIGHT_VALUE * 2);
    }

    function getAiNightCost(){
      if (state.incentives.aiNight && state.incentives.aiNight > 0) return state.incentives.aiNight;
      const highest = getHighestRetailRate();
      return highest > 0 ? highest : DEFAULT_AI_NIGHT_VALUE;
    }

    function getHyattWeekCost(){
      return state.incentives.hyattWeek && state.incentives.hyattWeek > 0 ? state.incentives.hyattWeek : HYATT_WEEK_VALUE;
    }

    function getRewardCreditValue(){
      return state.incentives.credits && state.incentives.credits > 0 ? state.incentives.credits : INCENTIVE_REWARD_CREDITS;
    }


    function applyPriceDrift(force = false){
      const now = Date.now();
      state.dynamicPrices.forEach(brands => {
        if (!brands) return;
        ['expedia','booking','despegar'].forEach(key => {
          const record = brands[key];
          if (!record) return;
          if (!force && now - record.lastUpdate < PRICE_DRIFT_INTERVAL) return;
          const base = Number(record.base) || 0;
          if (base <= 0) return;
          const direction = Math.random() < 0.5 ? -1 : 1;
          const delta = Math.round(Math.random() * PRICE_DRIFT_STEP);
          const min = Math.max(0, base - PRICE_DRIFT_RANGE);
          const max = base + PRICE_DRIFT_RANGE;
          let next = (record.live || base) + direction * delta;
          if (next < min) next = min;
          if (next > max) next = max;
          record.live = next;
          record.lastUpdate = now;
        });
      });
    }

    configInputs.forEach(input => {
      const field = input.dataset.configField;
      if (!field) return;
      if (field === 'incentive-ai'){
        state.incentives.aiNight = Number(input.value) || 0;
        return;
      }
      if (field === 'incentive-hyatt'){
        state.incentives.hyattWeek = Number(input.value) || HYATT_WEEK_VALUE;
        return;
      }
      if (field === 'incentive-credits'){
        state.incentives.credits = Number(input.value) || INCENTIVE_REWARD_CREDITS;
        return;
      }
      const idx = Number(input.dataset.propertyIndex || 0);
      const prop = ensureProperty(idx);
      if (field === 'destination'){
        prop.destination = input.value;
      } else if (field === 'discount'){
        prop.discount = parseFloat(input.value) || 0;
      } else if (field && field.startsWith('price-')){
        const key = field.replace('price-', '');
        prop.prices[key] = parseFloat(input.value) || 0;
        syncDynamicBase(idx, key, prop.prices[key]);
      }
    });

    loadAdminConfig();
    syncConfigInputsFromState();
    syncStaffInputsFromState();

    state.properties.forEach((_, idx) => ensureDynamicStore(idx));
    applyPriceDrift(true);
    updateBreakeven();

    function formatCurrency(value){
      const locale = state.lang === 'es' ? 'es-MX' : 'en-US';
      try {
        return new Intl.NumberFormat(locale, {
          style: 'currency',
          currency: 'USD',
          maximumFractionDigits: 0
        }).format(Number(value) || 0);
      } catch(err){
        return `$${Math.round(Number(value) || 0)}`;
      }
    }

    function computeUvcPrice(propertyIdx){
      const prop = ensureProperty(propertyIdx);
      const priceValues = getCompetitorLivePrices(propertyIdx);
      if (!priceValues.length) return 0;
      const base = Math.min(...priceValues);
      const discountFactor = (parseFloat(prop.discount) || 0) / 100;
      const raw = base * (1 - discountFactor);
      return Math.max(99, Math.round(raw));
    }

    function calcSavings(propertyIdx){
      const priceValues = getCompetitorLivePrices(propertyIdx);
      if (!priceValues.length) return 0;
      const lowest = Math.min(...priceValues);
      if (!isFinite(lowest) || lowest <= 0) return 0;
      const uvcPrice = computeUvcPrice(propertyIdx);
      if (!uvcPrice) return 0;
      return Math.max(0, Math.round(((lowest - uvcPrice) / lowest) * 100));
    }

    function updateBreakeven(){
      if (!breakevenBars || !breakevenOutputs.tripSavings) return;
      const isEs = state.lang === 'es';
      const membershipCost = Math.max(0, parseFloat(breakevenInputs.membership && breakevenInputs.membership.value || '0') || 0);
      const trips = Math.max(0, parseFloat(breakevenInputs.trips && breakevenInputs.trips.value || '0') || 0);
      const years = Math.max(1, parseInt(breakevenInputs.years && breakevenInputs.years.value || '1', 10) || 1);
      const nights = Math.max(1, parseFloat(breakevenInputs.nights && breakevenInputs.nights.value || '0') || 1);
      const travelers = Math.max(1, parseFloat(breakevenInputs.travelers && breakevenInputs.travelers.value || '0') || 1);
      const retailNight = Math.max(0, parseFloat(breakevenInputs.retailNight && breakevenInputs.retailNight.value || '0') || 0);
      const memberNight = Math.max(0, parseFloat(breakevenInputs.memberNight && breakevenInputs.memberNight.value || '0') || 0);
      const extraRetail = Math.max(0, parseFloat(breakevenInputs.extraRetail && breakevenInputs.extraRetail.value || '0') || 0);
      let extraDiscount = parseFloat(breakevenInputs.extraDiscount && breakevenInputs.extraDiscount.value || '0') || 0;
      if (extraDiscount < 0) extraDiscount = 0;
      if (extraDiscount > 100) extraDiscount = 100;
      const retailTripBase = travelers * nights * retailNight;
      const memberTripBase = travelers * nights * memberNight;
      const memberExtras = extraRetail * (1 - extraDiscount / 100);
      const tripRetail = retailTripBase + extraRetail;
      const tripMember = memberTripBase + memberExtras;
      const perTrip = Math.max(0, tripRetail - tripMember);
      const annual = perTrip * trips;
      const dataset = [];
      let cumulative = 0;
      let breakYear = null;

      for (let year = 1; year <= years; year++){
        cumulative += annual;
        dataset.push({ year, cumulative });
        if (breakYear === null && membershipCost > 0 && perTrip > 0 && cumulative >= membershipCost){
          breakYear = year;
        }
      }

      if (breakevenOutputs.tripRetail) breakevenOutputs.tripRetail.textContent = formatCurrency(tripRetail);
      if (breakevenOutputs.tripMember) breakevenOutputs.tripMember.textContent = formatCurrency(tripMember);
      if (breakevenOutputs.tripSavings) breakevenOutputs.tripSavings.textContent = formatCurrency(perTrip);
      if (breakevenOutputs.annual) breakevenOutputs.annual.textContent = formatCurrency(annual);

      let breakLabel = '--';
      if (!perTrip || !trips){
        breakLabel = isEs ? 'Sin ahorro' : 'No savings';
      } else if (breakYear){
        const yearWord = isEs ? (breakYear === 1 ? 'año' : 'años') : (breakYear === 1 ? 'year' : 'years');
        breakLabel = `${breakYear} ${yearWord}`;
      } else {
        const yearWord = isEs ? (years === 1 ? 'año' : 'años') : (years === 1 ? 'year' : 'years');
        breakLabel = `>${years} ${yearWord}`;
      }
      if (breakevenOutputs.breakEven) breakevenOutputs.breakEven.textContent = breakLabel;

      breakevenBars.innerHTML = '';
      const maxValue = Math.max(
        membershipCost,
        ...dataset.map(item => item.cumulative),
        1
      );
      dataset.forEach(item => {
        const bar = document.createElement('div');
        bar.className = 'be-bar';
        const pct = Math.min(100, Math.max(2, maxValue > 0 ? (item.cumulative / maxValue) * 100 : 0));
        bar.style.height = `${pct}%`;
        const label = isEs ? `Año ${item.year}` : `Year ${item.year}`;
        bar.innerHTML = `<strong>${formatCurrency(item.cumulative)}</strong><span>${label}</span>`;
        if (breakYear && item.year === breakYear){
          bar.classList.add('hit');
        }
        breakevenBars.appendChild(bar);
      });

      if (breakevenMarker){
        if (membershipCost > 0){
          const pct = Math.min(92, Math.max(8, maxValue > 0 ? (membershipCost / maxValue) * 100 : 0));
          breakevenMarker.style.display = 'flex';
          breakevenMarker.style.bottom = `${pct}%`;
        } else {
          breakevenMarker.style.display = 'none';
        }
      }

    }

    function sanitizeQuickCalcExpression(expr){
      if (!expr) return '';
      const allowed = expr.replace(/[^0-9+\-*/().,%×÷\s]/g, '');
      return allowed
        .replace(/×/g, '*')
        .replace(/÷/g, '/')
        .replace(/,/g, '')
        .replace(/\s+/g, '')
        .replace(/%/g, '*0.01');
    }

    function refreshQuickCalcDisplay(){
      if (!quickCalcDisplay) return;
      quickCalcDisplay.textContent = quickCalcExpression || '0';
    }

    function evaluateQuickCalcExpression(){
      if (!quickCalcResult) return;
      if (!quickCalcExpression.trim()){
        quickCalcResult.textContent = '--';
        return;
      }
      const normalized = sanitizeQuickCalcExpression(quickCalcExpression);
      if (!normalized.trim()){
        quickCalcResult.textContent = state.lang === 'es' ? 'Inválido' : 'Invalid';
        return;
      }
      try {
        // eslint-disable-next-line no-new-func
        const value = Function('"use strict"; return (' + normalized + ')')();
        if (!isFinite(value)){
          throw new Error('Invalid');
        }
        const formatted = Number(value).toLocaleString(
          state.lang === 'es' ? 'es-MX' : 'en-US',
          { maximumFractionDigits: 4 }
        );
        quickCalcResult.textContent = formatted;
        quickCalcExpression = String(value);
        refreshQuickCalcDisplay();
      } catch(err){
        quickCalcResult.textContent = state.lang === 'es' ? 'Error' : 'Error';
      }
    }

    function handleQuickCalcAction(action, value){
      if (!quickCalcDisplay) return;
      switch(action){
        case 'clear':
          quickCalcExpression = '';
          refreshQuickCalcDisplay();
          if (quickCalcResult) quickCalcResult.textContent = '--';
          return;
        case 'delete':
          quickCalcExpression = quickCalcExpression.slice(0, -1);
          refreshQuickCalcDisplay();
          return;
        case 'equals':
          evaluateQuickCalcExpression();
          return;
        default:
          break;
      }
      if (value){
        quickCalcExpression += value;
        refreshQuickCalcDisplay();
      }
    }

    function updateIncentiveCalculator(){
      if (!incentiveInput.investment || !incentiveOutputs.total) return;
      const investment = Math.max(0, parseFloat(incentiveInput.investment.value || '0') || 0);
      const nights = Math.max(0, parseFloat(incentiveInput.nights.value || '0') || 0);
      const weeks = Math.max(0, parseFloat(incentiveInput.weeks.value || '0') || 0);
      const credits = Math.max(0, parseFloat(incentiveInput.credits.value || '0') || 0);
      const nightCost = getAiNightCost();
      const hyattCost = getHyattWeekCost();
      const creditUnit = getRewardCreditValue() || 1;
      const nightsValue = nights * nightCost;
      const weeksValue = weeks * hyattCost;
      const creditsValue = credits * creditUnit;
      const totalValue = nightsValue + weeksValue + creditsValue;
      const roiPercent = investment > 0 ? (totalValue / investment) * 100 : 0;
      const roi = investment > 0 ? Math.round(roiPercent) : 0;
      incentiveOutputs.nightsValue.textContent = formatCurrency(nightsValue);
      incentiveOutputs.weeksValue.textContent = formatCurrency(weeksValue);
      incentiveOutputs.creditsValue.textContent = formatCurrency(creditsValue);
      incentiveOutputs.total.textContent = formatCurrency(totalValue);
      incentiveOutputs.roi.textContent = investment ? `${roi}%` : '--';
      const chart = incentiveOutputs.chart;
      if (chart){
        const scaleBase = Math.max(roiPercent || 0, 100);
        if (chart.bars.investment){
          chart.bars.investment.style.height = '100%';
          if (chart.investmentLabel) chart.investmentLabel.textContent = formatCurrency(investment);
        }
        if (chart.bars.returned){
          const returnedPct = investment > 0 ? Math.min(200, roiPercent) : 0;
          const height = Math.max(6, Math.min(100, (returnedPct / scaleBase) * 100));
          chart.bars.returned.style.height = `${height}%`;
          if (chart.returnedLabel) chart.returnedLabel.textContent = formatCurrency(totalValue);
        }
        if (chart.marker){
          if (roiPercent > 0){
            chart.marker.style.display = 'flex';
            const markerPct = Math.min(95, Math.max(5, (roiPercent / scaleBase) * 100));
            chart.marker.style.bottom = `${markerPct}%`;
            if (chart.markerLabel){
              chart.markerLabel.textContent = state.lang === 'es'
                ? `ROI ${roi}%`
                : `ROI ${roi}%`;
            }
          } else {
            chart.marker.style.display = 'none';
          }
        }
        if (chart.baseline){
          if (investment > 0){
            chart.baseline.style.display = 'flex';
            chart.baseline.style.bottom = `${Math.min(95, Math.max(5, (100 / scaleBase) * 100))}%`;
            if (chart.baselineLabel){
              chart.baselineLabel.textContent = state.lang === 'es' ? 'Inversión 100%' : 'Investment 100%';
            }
          } else {
            chart.baseline.style.display = 'none';
          }
        }
      }
    }


    function setPriceText(propertyIdx, target, value){
      const map = propertyPriceTargets[propertyIdx];
      if (!map) return;
      const el = map[target];
      if (!el) return;
      el.textContent = formatCurrency(value);
    }

    function updatePriceUI(){
      const totalProperties = Math.max(
        state.properties.length,
        Object.keys(propertyNameTargets).length
      );
      let bestSavings = 0;

      for (let idx = 0; idx < totalProperties; idx++){
        const prop = ensureProperty(idx);
        const uvcPrice = computeUvcPrice(idx);
        ['expedia','booking','despegar'].forEach(key => {
          setPriceText(idx, key, getLivePrice(idx, key));
        });
        setPriceText(idx, 'uvc', uvcPrice);
        if (uvcSummaryOutputs[idx]){
          uvcSummaryOutputs[idx].textContent = formatCurrency(uvcPrice);
        }

        const label = prop.destination || `Property ${idx + 1}`;
        if (propertyNameTargets[idx]){
          propertyNameTargets[idx].textContent = label;
        }
        if (configTitleTargets[idx]){
          configTitleTargets[idx].textContent = label;
        }
        if (summaryOutputs[idx]){
          summaryOutputs[idx].textContent = `${label} · ${formatCurrency(uvcPrice)}`;
        }
        if (configSummaryOutputs[idx]){
          configSummaryOutputs[idx].textContent = formatCurrency(uvcPrice);
        }
        if (configSummaryLabels[idx]){
          configSummaryLabels[idx].textContent = label;
        }

        const savings = calcSavings(idx);
        bestSavings = Math.max(bestSavings, savings);
        if (propertySavingsTargets[idx]){
          const template = getTranslation('priceChecker.savingsInline');
          propertySavingsTargets[idx].textContent = template
            ? template.replace('{value}', savings)
            : `Savings ${savings}%`;
        }
      }

      if (priceCheckerNote){
        const template = getTranslation('priceChecker.note');
        priceCheckerNote.textContent = template.replace('{value}', bestSavings);
      }
      updateIncentiveCalculator();
    }

    function syncLangButtons(){
      qa('.lang-pill[data-lang]').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === state.lang);
      });
    }

    function applyTranslations(lang){
      const dict = translations[lang] || translations.es;
      qa('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (!key || !dict[key]) return;
        el.textContent = dict[key];
      });
      if (pinStatus && pinStatus.dataset.status){
        const statusKey = pinStatus.dataset.status === 'success' ? 'home.pinSuccess' : 'home.pinError';
        pinStatus.textContent = getTranslation(statusKey);
      }
    }

    function setLanguage(lang){
      if (!translations[lang]) lang = 'es';
      state.lang = lang;
      document.documentElement.setAttribute('lang', lang);
      syncLangButtons();
      applyTranslations(lang);
      updatePriceUI();
      updateBreakeven();
      updateIncentiveCalculator();
      updateStaffOptions();
    }

    function setConfigInputsDisabled(flag){
      configInputs.forEach(input => {
        input.disabled = flag;
      });
      staffInputs.forEach(input => {
        input.disabled = flag;
      });
      configSaveButtons.forEach(btn => {
        btn.disabled = flag;
      });
      if (homeConfig){
        homeConfig.classList.toggle('locked', !!flag);
      }
      if (configLockedMessage){
        configLockedMessage.hidden = !flag;
      }
      if (relockBtn){
        relockBtn.hidden = !!flag;
      }
    }

    function setPinStatus(type){
      if (!pinStatus) return;
      pinStatus.dataset.status = type;
      pinStatus.style.color = type === 'success' ? '#1f7c4d' : '#d4444f';
      const key = type === 'success' ? 'home.pinSuccess' : 'home.pinError';
      pinStatus.textContent = getTranslation(key);
    }

    function updateSaleStats(){
      if (saleWinCount) saleWinCount.textContent = state.sales.win;
      if (saleLossCount) saleLossCount.textContent = state.sales.pending;
      updateAnalyticsUI();
    }

    function updateReportControls(){
      if (downloadSalesReportBtn){
        const hasData = Array.isArray(state.sales.entries) && state.sales.entries.length > 0;
        downloadSalesReportBtn.disabled = !hasData;
      }
    }

    function aggregateRoleStats(role){
      const map = {};
      (state.sales.entries || []).forEach(entry => {
        const name = entry && entry[role];
        if (!name) return;
        if (!map[name]){
          map[name] = { name, wins: 0, attempts: 0, amount: 0 };
        }
        map[name].attempts++;
        if (entry.result === 'win'){
          map[name].wins++;
          map[name].amount += Number(entry.amount) || 0;
        }
      });
      return Object.values(map).sort((a, b) => b.amount - a.amount);
    }

    function renderRanking(listEl, stats){
      if (!listEl) return;
      listEl.innerHTML = '';
      if (!stats.length){
        const li = document.createElement('li');
        li.textContent = getTranslation('analytics.noData') || 'No data';
        listEl.appendChild(li);
        return;
      }
      stats.slice(0, 5).forEach((item, index) => {
        const li = document.createElement('li');
        const row = document.createElement('div');
        row.className = 'ranking-row';
        const nameSpan = document.createElement('span');
        nameSpan.textContent = `${index + 1}. ${item.name}`;
        const valueSpan = document.createElement('span');
        valueSpan.textContent = formatCurrency(item.amount);
        row.appendChild(nameSpan);
        row.appendChild(valueSpan);
        const details = document.createElement('small');
        const rate = item.attempts ? Math.round((item.wins / item.attempts) * 100) : 0;
        details.textContent = `${item.wins}/${item.attempts || 0} · ${rate}%`;
        li.appendChild(row);
        li.appendChild(details);
        listEl.appendChild(li);
      });
    }

    function updateAnalyticsUI(){
      const entries = state.sales.entries || [];
      const wins = entries.filter(entry => entry && entry.result === 'win');
      const attempts = entries.length;
      const totalVolume = wins.reduce((sum, entry) => sum + (Number(entry.amount) || 0), 0);
      const avgSale = wins.length ? totalVolume / wins.length : 0;
      if (metricAvgSale) metricAvgSale.textContent = wins.length ? formatCurrency(avgSale) : '--';
      const conversion = attempts ? Math.round((wins.length / attempts) * 100) : 0;
      if (metricConversion) metricConversion.textContent = `${conversion}%`;
      if (metricTotalVolume) metricTotalVolume.textContent = formatCurrency(totalVolume);

      const clarityScores = entries
        .filter(entry => entry && entry.result === 'loss' && Number(entry.clarity) > 0)
        .map(entry => Number(entry.clarity));
      if (metricClarity){
        if (clarityScores.length){
          const clarityAvg = clarityScores.reduce((a,b)=>a+b,0) / clarityScores.length;
          metricClarity.textContent = `${clarityAvg.toFixed(1)} / 5`;
        } else {
          metricClarity.textContent = '--';
        }
      }

      const periods = {
        day: 24 * 60 * 60 * 1000,
        week: 7 * 24 * 60 * 60 * 1000,
        biweek: 14 * 24 * 60 * 60 * 1000
      };
      const now = Date.now();
      Object.keys(volumeOutputs).forEach(key => {
        const el = volumeOutputs[key];
        if (!el) return;
        const range = periods[key];
        const amount = wins
          .filter(entry => {
            const time = Date.parse(entry.timestamp || '');
            return isFinite(time) && (now - time) <= range;
          })
          .reduce((sum, entry) => sum + (Number(entry.amount) || 0), 0);
        el.textContent = formatCurrency(amount);
      });

      const linerStats = aggregateRoleStats('liner');
      const closerStats = aggregateRoleStats('closer');
      renderRanking(rankingLists.liner, linerStats);
      renderRanking(rankingLists.closer, closerStats);

      const topLiner = linerStats[0];
      const topCloser = closerStats[0];
      if (topLinerName) topLinerName.textContent = topLiner ? topLiner.name : '--';
      if (topLinerAmount) topLinerAmount.textContent = topLiner ? formatCurrency(topLiner.amount) : formatCurrency(0);
      if (topCloserName) topCloserName.textContent = topCloser ? topCloser.name : '--';
      if (topCloserAmount) topCloserAmount.textContent = topCloser ? formatCurrency(topCloser.amount) : formatCurrency(0);

      const maxComparison = Math.max(
        topLiner ? topLiner.amount : 0,
        topCloser ? topCloser.amount : 0,
        1
      );
      if (comparisonBars.liner){
        const pct = Math.round(((topLiner ? topLiner.amount : 0) / maxComparison) * 100);
        comparisonBars.liner.style.width = `${pct}%`;
      }
      if (comparisonBars.closer){
        const pct = Math.round(((topCloser ? topCloser.amount : 0) / maxComparison) * 100);
        comparisonBars.closer.style.width = `${pct}%`;
      }
      if (comparisonValues.liner){
        comparisonValues.liner.textContent = formatCurrency(topLiner ? topLiner.amount : 0);
      }
      if (comparisonValues.closer){
        comparisonValues.closer.textContent = formatCurrency(topCloser ? topCloser.amount : 0);
      }
    }

    function resetSaleOverlay(){
      if (saleChoiceSection){
        saleChoiceSection.classList.remove('hidden');
      }
      Object.values(saleForms).forEach(form => {
        if (form){
          form.classList.remove('active');
          if (typeof form.reset === 'function') form.reset();
        }
      });
    }

    function ensureSaleStaffSelected(showMessage = false){
      const ready = !!(state.session.liner && state.session.closer);
      if (saleStaffError){
        if (ready){
          saleStaffError.textContent = '';
        } else if (showMessage){
          saleStaffError.textContent = getTranslation('sale.staffError') || 'Selecciona el liner y el closer antes de continuar.';
        } else {
          saleStaffError.textContent = '';
        }
      }
      return ready;
    }

    // --- Staff picker (custom dropdown using admin lists) ---
    let staffPickerMenu = null;
    function closeStaffPicker(){
      if (staffPickerMenu){
        staffPickerMenu.remove();
        staffPickerMenu = null;
        document.removeEventListener('click', onStaffPickerDocClick);
        document.removeEventListener('keydown', onStaffPickerKey);
      }
    }
    function onStaffPickerDocClick(ev){
      if (!staffPickerMenu) return;
      if (!ev.target.closest('.staff-picker') && !ev.target.closest('#sale-liner-input') && !ev.target.closest('#sale-closer-input')){
        closeStaffPicker();
      }
    }
    function onStaffPickerKey(ev){
      if (ev.key === 'Escape') closeStaffPicker();
    }
    function openStaffPicker(role){
      const input = saleStaffInputs[role];
      if (!input) return;
      const names = role === 'liner' ? (state.staff.liners || []) : (state.staff.closers || []);
      if (!names.length) return;
      closeStaffPicker();
      const rect = input.getBoundingClientRect();
      const menu = document.createElement('div');
      menu.className = 'staff-picker';
      names.forEach(name => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = name;
        btn.addEventListener('click', ()=>{
          input.value = name;
          state.session[role] = name;
          persistSessionData();
          ensureSaleStaffSelected(false);
          closeStaffPicker();
        });
        menu.appendChild(btn);
      });
      document.body.appendChild(menu);
      const top = rect.bottom + window.scrollY;
      let left = rect.left + window.scrollX;
      if (left + menu.offsetWidth > window.innerWidth - 12){
        left = window.innerWidth - menu.offsetWidth - 12;
      }
      menu.style.top = `${top + 4}px`;
      menu.style.left = `${left}px`;
      staffPickerMenu = menu;
      document.addEventListener('click', onStaffPickerDocClick);
      document.addEventListener('keydown', onStaffPickerKey);
    }

    function showSaleForm(type){
      if (!saleForms[type]) return;
      if (saleChoiceSection){
        saleChoiceSection.classList.add('hidden');
      }
      Object.keys(saleForms).forEach(key => {
        const form = saleForms[key];
        if (form){
          form.classList.toggle('active', key === type);
        }
      });
    }

    function openSaleOverlay(){
      if (!saleOverlay) {
        openHomeScreen();
        return;
      }
      state.session.liner = '';
      state.session.closer = '';
      persistSessionData();
      syncSessionInputs();
      ensureSaleStaffSelected(false);
      resetSaleOverlay();
      saleOverlay.classList.add('active');
    }

    function closeSaleOverlay(){
      if (saleOverlay) saleOverlay.classList.remove('active');
      resetSaleOverlay();
    }

    function getOptionLabel(option){
      if (!option) return '';
      const key = option.dataset ? option.dataset.i18n : null;
      if (key){
        const translated = getTranslation(key);
        if (translated) return translated;
      }
      return option.textContent ? option.textContent.trim() : '';
    }

    function buildSaleEntry(type){
      if (!ensureSaleStaffSelected(true)) return null;
      const isWin = type === 'win';
      const q1El = q(isWin ? '#sale-win-q1' : '#sale-loss-q1');
      const q2El = q(isWin ? '#sale-win-q2' : '#sale-loss-q2');
      const q3El = !isWin ? q('#sale-loss-q3') : null;
      const notesEl = q(isWin ? '#sale-win-notes' : '#sale-loss-notes');
      const amountEl = isWin ? q('#sale-win-amount') : null;
      const q1Option = q1El && q1El.options[q1El.selectedIndex];
      const q2Option = q2El && q2El.options[q2El.selectedIndex];
      const q3Option = q3El && q3El.options[q3El.selectedIndex];

      const entry = {
        timestamp: new Date().toISOString(),
        lang: state.lang,
        liner: state.session.liner,
        closer: state.session.closer,
        amount: isWin ? Number(amountEl && amountEl.value) || 0 : 0,
        clarity: !isWin ? Number(q2El && q2El.value) || 0 : null,
        answers: [],
        notes: notesEl ? notesEl.value.trim() : ''
      };

      entry.answers.push({
        question: getTranslation(isWin ? 'sale.winQ1' : 'sale.lossQ1'),
        answer: getOptionLabel(q1Option)
      });
      entry.answers.push({
        question: getTranslation(isWin ? 'sale.winQ2' : 'sale.lossQ2'),
        answer: getOptionLabel(q2Option)
      });
      if (!isWin && q3Option){
        entry.answers.push({
          question: getTranslation('sale.lossQ3'),
          answer: getOptionLabel(q3Option)
        });
      }

      return entry;
    }

    function recordSale(resultKey, payload){
      if (!payload){
        return;
      }
      if (resultKey === 'win') state.sales.win++;
      if (resultKey === 'loss') state.sales.pending++;
      state.sales.entries.push({
        ...payload,
        result: resultKey
      });
      persistSalesData();
      updateSaleStats();
      updateReportControls();
      updateAnalyticsUI();
      closeSaleOverlay();
      openHomeScreen();
    }

    function resetSalesHistory(){
      state.sales.win = 0;
      state.sales.pending = 0;
      state.sales.entries = [];
      persistSalesData();
      updateSaleStats();
      updateReportControls();
      updateAnalyticsUI();
    }

    function escapeCsvValue(value){
      const text = (value == null ? '' : String(value)).replace(/\r?\n/g, ' ').trim();
      if (text.includes('"') || text.includes(',')){
        return `"${text.replace(/"/g, '""')}"`;
      }
      return text;
    }

    function buildSalesCsv(){
      const rows = [
        ['Timestamp','Result','Language','Liner','Closer','Amount USD','Clarity','Question 1','Answer 1','Question 2','Answer 2','Question 3','Answer 3','Notes']
      ];
      (state.sales.entries || []).forEach(entry => {
        const ans1 = entry.answers && entry.answers[0] || {};
        const ans2 = entry.answers && entry.answers[1] || {};
        const ans3 = entry.answers && entry.answers[2] || {};
        rows.push([
          entry.timestamp || '',
          entry.result || '',
          entry.lang || '',
          entry.liner || '',
          entry.closer || '',
          Number(entry.amount || 0),
          entry.clarity || '',
          ans1.question || '',
          ans1.answer || '',
          ans2.question || '',
          ans2.answer || '',
          ans3.question || '',
          ans3.answer || '',
          entry.notes || ''
        ].map(escapeCsvValue));
      });
      return rows.map(row => row.join(',')).join('\n');
    }

    function downloadSalesReport(){
      if (!state.sales.entries || !state.sales.entries.length) return;
      const csv = buildSalesCsv();
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      const date = new Date().toISOString().slice(0,10);
      link.download = `uvc-sales-${date}.csv`;
      document.body.appendChild(link);
      link.click();
      setTimeout(()=>{
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      }, 0);
    }

    function relockPanel(){
      state.pinUnlocked = false;
      setConfigInputsDisabled(true);
      if (pinStatus){
        pinStatus.dataset.status = '';
        pinStatus.textContent = '';
      }
    }

    function handleConfigInput(ev){
      if (!state.pinUnlocked) return;
      const input = ev.target;
      const field = input.dataset.configField;
      if (!field) return;
      if (field === 'incentive-ai'){
        state.incentives.aiNight = Number(input.value) || 0;
        updateIncentiveCalculator();
        persistAdminConfig();
        return;
      }
      if (field === 'incentive-hyatt'){
        state.incentives.hyattWeek = Number(input.value) || HYATT_WEEK_VALUE;
        updateIncentiveCalculator();
        persistAdminConfig();
        return;
      }
      if (field === 'incentive-credits'){
        state.incentives.credits = Number(input.value) || INCENTIVE_REWARD_CREDITS;
        updateIncentiveCalculator();
        persistAdminConfig();
        return;
      }
      const idx = Number(input.dataset.propertyIndex || 0);
      const prop = ensureProperty(idx);
      if (field === 'destination'){
        prop.destination = input.value;
      } else if (field === 'discount'){
        prop.discount = parseFloat(input.value) || 0;
      } else if (field.startsWith('price-')){
        const key = field.replace('price-', '');
        prop.prices[key] = parseFloat(input.value) || 0;
        syncDynamicBase(idx, key, prop.prices[key]);
      }
      updatePriceUI();
      persistAdminConfig();
    }

    function handleConfigSave(ev){
      if (!state.pinUnlocked) return;
      const btn = ev.currentTarget;
      const idx = Number(btn && btn.dataset.configSave || 0);
      syncPropertyFromInputs(idx);
      updatePriceUI();
      persistAdminConfig();
    }

    function togglePriceChecker(force){
      if (!priceCheckerPanel) return;
      applyPriceDrift(true);
      updatePriceUI();
      const show = typeof force === 'boolean' ? force : !priceCheckerPanel.classList.contains('active');
      priceCheckerPanel.classList.toggle('active', show);
    }

    function closeHomeScreen(){
      if (homeScreen){
        homeScreen.classList.remove('active');
      }
    }

    function openHomeScreen(){
      if (homeScreen){
        homeScreen.classList.add('active');
      }
    }

    sessionInputs.forEach(input => {
      const field = input.dataset.sessionField;
      if (!field) return;
      input.addEventListener('input', ()=>{
        state.session[field] = input.value.trim();
        persistSessionData();
        sessionInputs.forEach(other => {
          if (other === input) return;
          if (other.dataset.sessionField === field){
            other.value = state.session[field];
          }
        });
        if (state.session.liner && state.session.closer){
          ensureSaleStaffSelected(false);
        }
        updateReportControls();
      });
    });

    Object.keys(saleStaffInputs).forEach(role => {
      const input = saleStaffInputs[role];
      if (!input) return;
      input.addEventListener('focus', ()=>{
        openStaffPicker(role);
      });
    });

    syncSessionInputs();

    setConfigInputsDisabled(!state.pinUnlocked);

    configInputs.forEach(input => {
      input.addEventListener('input', handleConfigInput);
    });

    staffInputs.forEach(input => {
      input.addEventListener('input', ()=>{
        if (!state.pinUnlocked) return;
        const field = input.dataset.staffField;
        if (!field || !state.staff[field]) return;
        state.staff[field] = parseStaffList(input.value);
        updateStaffOptions();
        persistAdminConfig();
      });
    });

    configSaveButtons.forEach(btn => {
      btn.addEventListener('click', handleConfigSave);
    });

    if (utilityToggle){
      utilityToggle.addEventListener('click', (ev)=>{
        ev.preventDefault();
        toggleUtilityMenu();
      });
    }

    function openSimulatorTab(key='retail', scroll=true){
      if (!simulatorPanel) return;
      const valid = ['retail','incentives','calc'];
      if (!valid.includes(key)) key = 'retail';
      simulatorTabs.forEach(btn => {
        btn.classList.toggle('active', btn.dataset.simTab === key);
      });
      simulatorViews.forEach(view => {
        view.classList.toggle('active', view.dataset.simView === key);
      });
      if (scroll){
        simulatorPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
        simulatorPanel.classList.add('flash');
        if (breakevenFlashTimeout) clearTimeout(breakevenFlashTimeout);
        breakevenFlashTimeout = setTimeout(()=>{
          simulatorPanel.classList.remove('flash');
        }, 800);
      }
    }

    simulatorTabs.forEach(btn => {
      btn.addEventListener('click', ()=>{
        openSimulatorTab(btn.dataset.simTab || 'break', false);
      });
    });

    simulatorOpenButtons.forEach(btn => {
      btn.addEventListener('click', ()=>{
        closeUtilityMenu();
        openSimulatorTab(btn.dataset.simOpen || 'break', true);
      });
    });

    openSimulatorTab('retail', false);

    if (breakevenForm){
      breakevenForm.addEventListener('input', ()=>{
        updateBreakeven();
      });
      breakevenForm.addEventListener('submit', (ev)=> ev.preventDefault());
    }


    refreshQuickCalcDisplay();
    if (quickCalcResult) quickCalcResult.textContent = '--';

    if (quickCalcButtons.length){
      quickCalcButtons.forEach(btn => {
        btn.addEventListener('click', ()=>{
          const action = btn.dataset.quickcalcAction || null;
          const value = btn.dataset.quickcalcValue || '';
          handleQuickCalcAction(action, value);
        });
      });
    }

    updateIncentiveCalculator();
    Object.values(incentiveInput).forEach(input => {
      if (!input) return;
      input.addEventListener('input', ()=>{
        updateIncentiveCalculator();
      });
    });

    if (pinForm){
      pinForm.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        const value = (pinInput && pinInput.value || '').trim();
        if (value === PIN_CODE){
          state.pinUnlocked = true;
          setConfigInputsDisabled(false);
          setPinStatus('success');
        } else {
          setPinStatus('error');
        }
        if (pinInput) pinInput.value = '';
      });
    }

    if (relockBtn){
      relockBtn.addEventListener('click', ()=>{
        relockPanel();
      });
    }

    if (startDemoBtn){
      startDemoBtn.addEventListener('click', ()=>{
        closeHomeScreen();
        togglePriceChecker(false);
      });
    }

    if (adminBtn){
      adminBtn.addEventListener('click', ()=>{
        closeUtilityMenu();
        togglePriceChecker(false);
        if (homeScreen && !homeScreen.classList.contains('active')){
          openSaleOverlay();
        } else {
          openHomeScreen();
        }
      });
    }

    if (closePitchBtn){
      closePitchBtn.addEventListener('click', ()=>{
        closeUtilityMenu();
        togglePriceChecker(false);
        openSaleOverlay();
      });
    }

    if (priceCheckerToggle){
      priceCheckerToggle.addEventListener('click', ()=>{
        closeUtilityMenu();
        togglePriceChecker();
      });
    }

    if (priceCheckerClose){
      priceCheckerClose.addEventListener('click', ()=>{
        togglePriceChecker(false);
      });
    }

    document.addEventListener('click', (ev)=>{
      const langBtn = ev.target.closest('.lang-pill[data-lang]');
      if (langBtn){
        ev.preventDefault();
        if (state.pinUnlocked || !homeConfig || !homeConfig.classList.contains('locked')){
          setLanguage(langBtn.dataset.lang);
        }
      }
      if (priceCheckerPanel && priceCheckerPanel.classList.contains('active')){
        if (!ev.target.closest('#price-checker-panel') && !ev.target.closest('#price-checker-toggle')){
          togglePriceChecker(false);
        }
      }
      if (utilityMenu && utilityMenu.classList.contains('active')){
        if (!ev.target.closest('.utility-bar')){
          closeUtilityMenu();
        }
      }
    });

    document.addEventListener('keydown', (ev)=>{
      if (ev.key === 'Escape'){
        togglePriceChecker(false);
        closeUtilityMenu();
        if (saleOverlay && saleOverlay.classList.contains('active')){
          closeSaleOverlay();
          openHomeScreen();
        }
      }
    });

    saleChoiceButtons.forEach(btn => {
      btn.addEventListener('click', ()=>{
        const choice = btn.dataset.choice === 'win' ? 'win' : 'loss';
        if (!ensureSaleStaffSelected(true)){
          const focusTarget = !state.session.liner ? saleStaffInputs.liner : saleStaffInputs.closer;
          if (focusTarget) focusTarget.focus();
          return;
        }
        showSaleForm(choice);
      });
    });

    saleBackButtons.forEach(btn => {
      btn.addEventListener('click', ()=>{
        resetSaleOverlay();
      });
    });

    if (saleForms.win){
      saleForms.win.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        recordSale('win', buildSaleEntry('win'));
      });
    }

    if (saleForms.loss){
      saleForms.loss.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        recordSale('loss', buildSaleEntry('loss'));
      });
    }

    if (downloadSalesReportBtn){
      downloadSalesReportBtn.addEventListener('click', downloadSalesReport);
    }
    if (resetSalesBtn){
      resetSalesBtn.addEventListener('click', ()=>{
        const message = getTranslation('analytics.resetConfirm') || 'Clear all sales history?';
        if (confirm(message)){
          resetSalesHistory();
        }
      });
    }

    if (saleOverlay){
      saleOverlay.addEventListener('click', (ev)=>{
        if (ev.target === saleOverlay){
          closeSaleOverlay();
          openHomeScreen();
        }
      });
    }

    updateSaleStats();
    updateReportControls();

    setLanguage(state.lang);

    setInterval(()=>{
      applyPriceDrift();
      updatePriceUI();
    }, PRICE_DRIFT_INTERVAL);

    initPromotionsViewer();

    function initPromotionsViewer(){
      const heroImage  = q('#promo-hero-image');
      const heroTitle  = q('#promo-hero-title');
      const heroDesc   = q('#promo-hero-description');
      const heroWindow = q('#promo-hero-window');
      const heroSeason = q('#promo-hero-season');
      const heroMarket = q('#promo-hero-market');
      const heroValue  = q('#promo-hero-value');
      const thumbs     = qa('.promo-thumb');

      if (!heroImage || !heroTitle || !thumbs.length) return;

      const applyPromo = (btn)=>{
        if (!btn || !btn.dataset) return;
        if (btn.dataset.img){
          heroImage.src = btn.dataset.img;
          heroImage.alt = btn.dataset.alt || btn.dataset.title || 'UVC Promotion';
        }
        if (heroTitle && btn.dataset.title) heroTitle.textContent = btn.dataset.title;
        if (heroDesc && btn.dataset.desc) heroDesc.textContent = btn.dataset.desc;
        if (heroWindow && btn.dataset.window) heroWindow.textContent = btn.dataset.window;
        if (heroSeason && btn.dataset.season) heroSeason.textContent = btn.dataset.season;
        if (heroMarket && btn.dataset.market) heroMarket.textContent = btn.dataset.market;
        if (heroValue && btn.dataset.value) heroValue.textContent = btn.dataset.value;
      };

      thumbs.forEach(btn => {
        btn.addEventListener('click', ()=>{
          if (btn.classList.contains('active')) return;
          thumbs.forEach(t => t.classList.remove('active'));
          btn.classList.add('active');
          applyPromo(btn);
        });
      });

      const first = thumbs.find(btn => btn.classList.contains('active')) || thumbs[0];
      applyPromo(first);
    }

    // Pausa TODOS los videos (menos uno opcional si lo quieres excluir)
    function stopAllVideos(exclude = null){
      qa('video').forEach(v => {
        if (exclude && v === exclude) return;
        try{
          v.pause();
          try{ v.currentTime = 0; }catch(e){}
          // Solo limpiamos sources del video de la galería (overlay)
          if (v.classList && v.classList.contains('gallery-video')){
            qa('source', v).forEach(s => s.remove());
            try{ v.removeAttribute('src'); }catch(e){}
          } else {
            v.load && v.load();
          }
        }catch(e){}
      });
    }

    // ---------- OVERLAY DE GALERÍA (IMÁGENES / VIDEO GRANDE) ----------
    function createGalleryOverlay(){
      const overlay = document.createElement('div');
      overlay.id = 'gallery-overlay';
      overlay.innerHTML = `
        <button class="gallery-close" aria-label="Cerrar">&times;</button>
        <button class="gallery-prev" aria-label="Anterior">‹</button>
        <img class="gallery-img" src="" alt="">
        <video class="gallery-video" controls playsinline style="display:none"></video>
        <div class="gallery-caption"></div>
        <button class="gallery-next" aria-label="Siguiente">›</button>
      `;
      document.body.appendChild(overlay);

      const imgEl   = q('.gallery-img', overlay);
      const vidEl   = q('.gallery-video', overlay);
      const caption = q('.gallery-caption', overlay);
      const btnClose= q('.gallery-close', overlay);
      const btnPrev = q('.gallery-prev', overlay);
      const btnNext = q('.gallery-next', overlay);

      let list  = [];
      let index = 0;

      function render(){
        const item = list[index];
        if (!item) return;

        if (item.type === 'video'){
          imgEl.style.display = 'none';
          vidEl.style.display = 'block';
          try{
            vidEl.pause();
            vidEl.removeAttribute('src');
            qa('source', vidEl).forEach(s=>s.remove());
            const s = document.createElement('source');
            s.src = item.src;
            if (/\.mp4/i.test(item.src)) s.type='video/mp4';
            vidEl.appendChild(s);
            vidEl.load();
            vidEl.currentTime = 0;
            vidEl.play().catch(()=>{});
          }catch(e){}
        } else {
          try{
            vidEl.pause();
            vidEl.removeAttribute('src');
            qa('source', vidEl).forEach(s=>s.remove());
          }catch(e){}
          vidEl.style.display = 'none';
          imgEl.style.display = 'block';
          imgEl.src = item.src;
        }

        if (item.caption && item.caption.trim()){
          caption.innerHTML = item.caption;
          caption.style.display = 'block';
        } else {
          caption.innerHTML = '';
          caption.style.display = 'none';
        }
      }

      function open(items, i=0, large=false){
        // Apagar todos los videos antes de abrir la galería grande
        stopAllVideos();

        list  = items.slice();
        index = i || 0;
        overlay.classList.toggle('large', !!large);
        render();
        overlay.classList.add('active');
        document.addEventListener('keydown', onKey);
      }

      function close(){
        overlay.classList.remove('active');
        try{
          vidEl.pause();
          vidEl.removeAttribute('src');
          qa('source', vidEl).forEach(s=>s.remove());
        }catch(e){}
        document.removeEventListener('keydown', onKey);
      }

      function show(i){
        if (!list.length) return;
        index = (i + list.length) % list.length;
        render();
      }

      function onKey(e){
        if (e.key === 'Escape')      close();
        if (e.key === 'ArrowLeft')  show(index-1);
        if (e.key === 'ArrowRight') show(index+1);
      }

      btnClose.addEventListener('click', close);
      btnPrev.addEventListener('click', ()=> show(index-1));
      btnNext.addEventListener('click', ()=> show(index+1));

      overlay.addEventListener('click', (ev)=>{
        if (ev.target === overlay) close();
      });

      return { open, close };
    }

    const gallery = createGalleryOverlay();

    // ---------- ABRIR / CERRAR MODALES DE MARCAS ----------
    document.addEventListener('click', (ev)=>{
      const btn = ev.target.closest('[data-modal]');
      if (btn){
        ev.preventDefault();
        const key = btn.getAttribute('data-modal');
        const overlay = document.getElementById('modal-' + key);
        if (overlay){
          overlay.classList.add('active');
          const v = q('video', overlay);
          if (v){
            try{
              // Apagamos todos los demás videos excepto el que se va a mostrar
              stopAllVideos(v);
              v.setAttribute('playsinline', '');
              v.setAttribute('webkit-playsinline', '');
              v.currentTime = 0;
              v.load && v.load();
              v.play().catch(()=>{});
            }catch(e){}
          }
        }
      }

      const closeBtn = ev.target.closest('[data-close]');
      if (closeBtn){
        const overlay = closeBtn.closest('.modal-overlay');
        if (overlay){
          overlay.classList.remove('active');
          const v = q('video', overlay);
          if (v){
            try{
              v.pause();
              v.currentTime = 0;
            }catch(e){}
          }
        }
      }
    });

    // Cerrar modal haciendo clic fuera de la tarjeta
    qa('.modal-overlay').forEach(o =>
      o.addEventListener('click', (ev) => {
        if (ev.target === o){
          o.classList.remove('active');
          const v = q('video', o);
          if (v){
            try{
              v.pause();
              v.currentTime = 0;
            }catch(e){}
          }
        }
      })
    );

    // ---------- LÓGICA PARA GALERÍAS DE IMÁGENES / VIDEOS ----------
    function looksLikeVideo(url){
      return !!(url && /\.(mp4|webm|ogg)(\?|$)/i.test(url));
    }

    function buildItemsFromGallery(galleryEl){
      const thumbs = qa('img', galleryEl);
      return thumbs.map(img => {
        const dataVideo   = img.dataset.video || '';
        const srcCandidate= dataVideo || img.dataset.full || img.src || '';
        const isVideo     = !!dataVideo || looksLikeVideo(srcCandidate);
        return {
          type: isVideo ? 'video' : 'image',
          src:  srcCandidate,
          caption: img.dataset.caption || img.alt || ''
        };
      });
    }

    // Click en miniaturas dentro de un modal
    document.addEventListener('click', (ev)=>{
      const thumb = ev.target.closest('.modal-gallery img');
      if (!thumb) return;

      ev.stopPropagation();
      const parentGallery = thumb.closest('.modal-gallery');
      const parentModal   = thumb.closest('.modal-overlay');
      const items         = buildItemsFromGallery(parentGallery);
      const idx           = Array.prototype.indexOf.call(parentGallery.querySelectorAll('img'), thumb);
      const isHyatt       = parentModal && parentModal.id === 'modal-hyatt';

      const explicitVideo = thumb.dataset.video;
      const candidate     = explicitVideo || thumb.dataset.full || thumb.src || '';
      const isVideo       = !!explicitVideo || looksLikeVideo(candidate);

      // Caso especial: en Hyatt puedes cambiar el video principal del modal
      if (isHyatt && isVideo){
        const mainVid = q('#hyatt-main-video', parentModal);
        if (mainVid){
          stopAllVideos(mainVid);
          try{
            const src = encodeURI(explicitVideo || candidate);
            qa('source', mainVid).forEach(s => s.remove());
            try{ mainVid.removeAttribute('src'); }catch(e){}
            const ns = document.createElement('source');
            ns.src = src;
            if (/\.mp4/i.test(src)) ns.type='video/mp4';
            mainVid.appendChild(ns);
            if (thumb.dataset.caption) mainVid.dataset.caption = thumb.dataset.caption;
            mainVid.load();
            mainVid.currentTime = 0;
            mainVid.play().catch(()=>{});
          }catch(e){}
          return;
        }
      }

      // Para Zoëtry (y cualquier otra): abrir overlay grande
      const large = parentModal && (parentModal.id === 'modal-zoetry' || parentModal.id === 'modal-hyatt');
      gallery.open(items, idx, large);
    });

    // ---------- DOBLE CLICK EN EL VIDEO PRINCIPAL (Zoëtry / Hyatt) ----------
    function attachDblToMain(id){
      const el = document.getElementById(id);
      if (!el) return;

      el.addEventListener('dblclick', ()=>{
        const parentModal = el.closest('.modal-overlay');
        if (!parentModal) return;

        // Apagar todos los videos, incluido Zoëtry, antes de abrir el grande
        stopAllVideos();

        const items = [];
        const src   = el.currentSrc || el.src || (q('source', el) && q('source', el).src);
        if (src){
          items.push({
            type: 'video',
            src:  src,
            caption: el.dataset.caption || ''
          });
        }
        const galleryEl = parentModal.querySelector('.modal-gallery');
        if (galleryEl){
          items.push(...buildItemsFromGallery(galleryEl));
        }
        const large = parentModal.id === 'modal-zoetry' || parentModal.id === 'modal-hyatt';
        gallery.open(items, 0, large);
      });
    }

    attachDblToMain('hyatt-main-video');
    attachDblToMain('zoetry-main-video');

  })();
  </script>
</body>
</html>
