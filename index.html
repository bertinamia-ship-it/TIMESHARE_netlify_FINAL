<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
  
  <!-- PWA Meta Tags -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="UVC Pitch" />
  <meta name="theme-color" content="#102649" />
  
  <title>UVC Sales Pitch</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      /* Brand Colors */
      --uvc-navy: #102649;
      --uvc-navy-dark: #0a1a35;
      --uvc-navy-light: #1a4d7a;
      --uvc-slate: #475569;
      --uvc-slate-light: #64748b;
      --uvc-light: #f8fafc;
      --uvc-panel: #ffffff;
      --uvc-glass: rgba(255, 255, 255, 0.7);
      
      /* Semantic Colors */
      --uvc-success: #10b981;
      --uvc-success-light: #d1fae5;
      --uvc-warning: #f59e0b;
      --uvc-warning-light: #fef3c7;
      --uvc-error: #ef4444;
      --uvc-error-light: #fee2e2;
      --uvc-info: #3b82f6;
      --uvc-info-light: #dbeafe;
      
      /* Borders & Shadows */
      --uvc-border: rgba(16, 38, 73, 0.08);
      --uvc-border-medium: rgba(16, 38, 73, 0.12);
      --uvc-border-strong: rgba(16, 38, 73, 0.18);
      --uvc-shadow-sm: 0 1px 3px rgba(16, 38, 73, 0.08), 0 1px 2px rgba(16, 38, 73, 0.06);
      --uvc-shadow: 0 4px 6px rgba(16, 38, 73, 0.07), 0 10px 15px rgba(16, 38, 73, 0.1);
      --uvc-shadow-lg: 0 10px 25px rgba(16, 38, 73, 0.1), 0 20px 40px rgba(16, 38, 73, 0.08);
      --uvc-shadow-xl: 0 20px 50px rgba(16, 38, 73, 0.15), 0 30px 60px rgba(16, 38, 73, 0.1);
      
      /* Spacing System */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      
      /* Border Radius */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 20px;
      --radius-full: 999px;
      
      /* Transitions */
      --transition-fast: 0.15s ease;
      --transition-base: 0.2s ease;
      --transition-slow: 0.3s ease;
    }
    /* ================= Futuristic Theme Variables (Opt-In) ================= */
    body.theme-future {
      /* Neon Tech Palette */
      --uvc-navy: #0f1624; /* base dark */
      --uvc-navy-dark: #0b1120;
      --uvc-navy-light: #1e3454;
      --uvc-panel: rgba(18,26,38,0.72);
      --uvc-glass: rgba(40,56,88,0.35);
      --uvc-light: #e9f4ff;
      --uvc-slate: #5e6c84;
      --uvc-slate-light: #7d8aa3;
      --uvc-border: rgba(120, 210, 255, 0.12);
      --uvc-border-medium: rgba(120, 210, 255, 0.2);
      --uvc-border-strong: rgba(120, 210, 255, 0.3);
      --uvc-success: #00d58b;
      --uvc-warning: #ffb347;
      --uvc-error: #ff4d61;
      --uvc-info: #3bb9ff;
      --uvc-success-light: rgba(0,213,139,0.16);
      --uvc-warning-light: rgba(255,179,71,0.18);
      --uvc-error-light: rgba(255,77,97,0.15);
      --uvc-info-light: rgba(59,185,255,0.18);
      --uvc-shadow-sm: 0 2px 4px rgba(0,0,0,0.4), 0 0 0 1px rgba(120,210,255,0.15);
      --uvc-shadow: 0 6px 18px rgba(0,0,0,0.55), 0 0 0 1px rgba(120,210,255,0.25);
      --uvc-shadow-lg: 0 12px 32px rgba(0,0,0,0.6), 0 0 0 1px rgba(120,210,255,0.25);
      --uvc-shadow-xl: 0 30px 70px rgba(0,0,0,0.65), 0 0 0 1px rgba(120,210,255,0.3);
    }

    /* Futuristic animated background */
    body.theme-future {
      background: radial-gradient(circle at 20% 20%, #10253d 0%, #0b1422 40%, #07101c 70%) fixed;
      position: relative;
    }
    body.theme-future::before,
    body.theme-future::after {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: repeating-linear-gradient(90deg, rgba(120,210,255,0.05) 0px, rgba(120,210,255,0.05) 1px, transparent 1px, transparent 140px),
                  radial-gradient(circle at 80% 70%, rgba(0,153,255,0.12), transparent 60%),
                  radial-gradient(circle at 10% 85%, rgba(0,213,139,0.12), transparent 55%);
      mix-blend-mode: screen;
      animation: bgPan 30s linear infinite;
      z-index: -2;
    }
    body.theme-future::after {
      background: radial-gradient(circle at 50% 50%, rgba(0,153,255,0.08), transparent 70%);
      animation: pulseGlow 6s ease-in-out infinite;
      z-index: -3;
      mix-blend-mode: overlay;
    }
    @keyframes bgPan {
      0% { transform: translateX(0); }
      100% { transform: translateX(-600px); }
    }
    @keyframes pulseGlow {
      0%,100% { opacity: 0.3; }
      50% { opacity: 0.55; }
    }

    /* Panels & glass override */
    body.theme-future .home-card,
    body.theme-future .price-checker-panel,
    body.theme-future .pc-section,
    body.theme-future .modal {
      background: linear-gradient(145deg, rgba(18,30,44,0.82) 0%, rgba(12,20,32,0.78) 60%) padding-box,
                  linear-gradient(135deg, rgba(120,210,255,0.35), rgba(0,213,139,0.35)) border-box;
      border: 1px solid rgba(120,210,255,0.25);
      box-shadow: 0 12px 40px rgba(0,0,0,0.6), 0 0 0 1px rgba(120,210,255,0.25), inset 0 1px 0 rgba(255,255,255,0.08);
      color: var(--uvc-light);
    }
    body.theme-future .pc-section:hover {
      border-color: rgba(120,210,255,0.45);
      box-shadow: 0 16px 50px rgba(0,0,0,0.65), 0 0 0 1px rgba(120,210,255,0.4);
    }

    /* Futuristic buttons */
    body.theme-future .primary-btn {
      background: linear-gradient(115deg, #0099ff 0%, #00d58b 50%, #6633ff 100%);
      box-shadow: 0 6px 22px rgba(0,153,255,0.4), 0 2px 6px rgba(0,213,139,0.35);
      border: 1px solid rgba(120,210,255,0.35);
    }
    body.theme-future .primary-btn:hover {
      box-shadow: 0 12px 32px rgba(0,153,255,0.55), 0 4px 14px rgba(0,213,139,0.5);
      filter: brightness(1.08) saturate(1.15);
    }

    body.theme-future .utility-bar,
    body.theme-future .utility-menu,
    body.theme-future .app-header {
      background: linear-gradient(140deg, rgba(20,32,48,0.85), rgba(14,28,44,0.85)) padding-box,
                  linear-gradient(135deg, rgba(120,210,255,0.4), rgba(0,213,139,0.4)) border-box;
      border-bottom: 1px solid rgba(120,210,255,0.25);
    }
    body.theme-future .app-header { box-shadow: 0 4px 22px rgba(0,0,0,0.55); }

    /* Text & accent glows */
    body.theme-future h1, body.theme-future h2, body.theme-future h3, body.theme-future h4, body.theme-future h5 {
      color: var(--uvc-light);
      text-shadow: 0 0 12px rgba(120,210,255,0.35);
    }
    body.theme-future .metric-card strong { text-shadow: 0 0 10px rgba(0,153,255,0.5); }

    /* Inputs */
    body.theme-future input, body.theme-future select, body.theme-future textarea {
      background: rgba(28,42,62,0.65);
      border: 1px solid rgba(120,210,255,0.28);
      color: var(--uvc-light);
    }
    body.theme-future input:focus, body.theme-future select:focus, body.theme-future textarea:focus {
      border-color: rgba(0,153,255,0.65);
      box-shadow: 0 0 0 2px rgba(0,153,255,0.35);
      outline: none;
    }
    body.theme-future ::placeholder { color: rgba(190,220,240,0.55); }

    /* Toast adaptation */
    body.theme-future .toast {
      background: linear-gradient(140deg, rgba(26,40,58,0.92), rgba(18,30,46,0.92));
      border: 1px solid rgba(120,210,255,0.3);
      box-shadow: 0 10px 30px rgba(0,0,0,0.65), 0 0 0 1px rgba(120,210,255,0.25);
      color: var(--uvc-light);
    }
    body.theme-future .toast-message { color: var(--uvc-light); }

    /* Price numbers glow */
    body.theme-future [data-price-target] { color: #7fdcff; text-shadow: 0 0 8px rgba(120,210,255,0.45); }
    body.theme-future [data-price-target="uvc"] { color: #00d58b; text-shadow: 0 0 10px rgba(0,213,139,0.55); }

    /* Admin disabled overlay subtle glow */
    body.theme-future .admin-locked-overlay { background: linear-gradient(180deg, rgba(15,25,38,0.85), rgba(9,15,25,0.9)); border: 1px solid rgba(120,210,255,0.25); }

    /* Scrollbar */
    body.theme-future .app-content::-webkit-scrollbar-thumb { background: linear-gradient(180deg, #0099ff, #00d58b); }
    body.theme-future .app-content::-webkit-scrollbar-track { background: rgba(0,153,255,0.08); }

    /* Futuristic utility button */
    body.theme-future .utility-tab, body.theme-future .utility-action { background: rgba(30,50,70,0.55); border: 1px solid rgba(120,210,255,0.25); color: var(--uvc-light); }
    body.theme-future .utility-tab:hover, body.theme-future .utility-action:hover { background: rgba(40,70,100,0.65); }

    /* Theme toggle button */
    .theme-toggle-btn {
      border: 1px solid var(--uvc-border-medium);
      background: linear-gradient(135deg, #ffffff 0%, #e6f2ff 100%);
      color: var(--uvc-navy);
      padding: 10px 16px;
      border-radius: var(--radius-lg);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: var(--transition-base);
    }
    .theme-toggle-btn:hover { box-shadow: var(--uvc-shadow-sm); transform: translateY(-2px); }
    body.theme-future .theme-toggle-btn {
      background: linear-gradient(135deg, rgba(20,32,48,0.9) 0%, rgba(30,50,70,0.85) 100%);
      color: #7fdcff;
      border: 1px solid rgba(120,210,255,0.35);
      text-shadow: 0 0 8px rgba(120,210,255,0.4);
    }
    body.theme-future .theme-toggle-btn:hover { box-shadow: 0 0 0 1px rgba(120,210,255,0.4), 0 8px 24px rgba(0,0,0,0.6); }
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    html, body {
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Poppins", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      color: var(--uvc-navy);
      font-size: 15px;
      line-height: 1.6;
      min-height: 100vh;
      min-height: -webkit-fill-available;
      height: 100vh;
      overflow: hidden;
      margin: 0;
      padding: 0;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      -webkit-tap-highlight-color: transparent;
      /* iOS safe area */
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    /* Animación de entrada de la página */
    body > .page {
      animation: pageEntry 0.5s ease-out;
    }

    @keyframes pageEntry {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    img {
      max-width: 100%;
      height: auto;
    }

    /* Mejoras de accesibilidad */
    button:focus-visible,
    input:focus-visible,
    select:focus-visible,
    textarea:focus-visible {
      outline: 2px solid var(--uvc-navy);
      outline-offset: 2px;
    }

    /* App Header - Barra superior tipo app nativa */
    .app-header {
      position: sticky;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: linear-gradient(135deg, #0a1a35 0%, #102649 80%);
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding: 0 var(--space-xl);
      z-index: 100;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.14), 0 1px 3px rgba(0, 0, 0, 0.08);
      backdrop-filter: blur(12px) saturate(180%);
      border-bottom: 1px solid rgba(200, 162, 75, 0.45);
    }

    @media (max-width: 768px) {
      .app-header {
        height: 52px;
        padding: 0 12px;
      }
    }

    @media (max-width: 768px) {
      .app-header {
        height: 52px;
        padding: 0 12px;
      }
    }

    .app-logo-container {
      display: none;
    }

    .app-title {
      display: none;
    }

    .app-actions {
      display: flex;
      gap: var(--space-sm);
      align-items: center;
    }

    .fullscreen-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: white;
      width: 44px;
      height: 44px;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 18px;
      backdrop-filter: blur(8px);
    }

    .home-btn {
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(200, 162, 75, 0.45);
      color: #ffffff;
      padding: 0 14px;
      height: 44px;
      border-radius: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(200,162,75,0.2);
    }

    .home-btn:hover {
      background: rgba(200,162,75,0.28);
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(200,162,75,0.25);
    }

    @media (max-width: 768px) {
      .home-btn {
        padding: 0 10px;
        height: 38px;
        font-size: 12px;
      }
    }

    @media (max-width: 768px) {
      .home-btn {
        padding: 0 10px;
        height: 38px;
        font-size: 12px;
      }
    }

    .fullscreen-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.25);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    @media (max-width: 768px) {
      .fullscreen-btn {
        width: 38px;
        height: 38px;
        font-size: 16px;
      }
    }

    @media (max-width: 768px) {
      .fullscreen-btn {
        width: 38px;
        height: 38px;
        font-size: 16px;
      }
    }

    .fullscreen-btn:active {
      transform: translateY(0);
    }

    .app-content {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      padding: 24px;
      background: transparent;
      -webkit-overflow-scrolling: touch;
      width: 100%;
      max-width: 100%;
    }

    /* Scrollbar profesional estilizado */
    .app-content::-webkit-scrollbar {
      width: 10px;
    }

    .app-content::-webkit-scrollbar-track {
      background: rgba(16, 38, 73, 0.03);
      border-radius: 10px;
    }

    .app-content::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, rgba(16, 38, 73, 0.15), rgba(16, 38, 73, 0.25));
      border-radius: 10px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      transition: all 0.2s ease;
    }

    .app-content::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, rgba(16, 38, 73, 0.25), rgba(16, 38, 73, 0.35));
      border-color: rgba(255, 255, 255, 0.3);
    }
    
    .home-card::-webkit-scrollbar,
    .modal::-webkit-scrollbar {
      width: 8px;
    }
    
    .home-card::-webkit-scrollbar-thumb,
    .modal::-webkit-scrollbar-thumb {
      background: rgba(16, 38, 73, 0.15);
      border-radius: 8px;
    }

    /* Sistema de notificaciones toast */
    .toast-container {
      position: fixed;
      top: 80px;
      right: 24px;
      z-index: 10000;
      display: flex;
      flex-direction: column;
      gap: 12px;
      pointer-events: none;
    }

    .toast {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-radius: 16px;
      padding: 16px 20px;
      box-shadow: 
        0 12px 32px rgba(16, 38, 73, 0.15),
        0 4px 12px rgba(16, 38, 73, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(16, 38, 73, 0.1);
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 280px;
      max-width: 400px;
      pointer-events: auto;
      animation: toastSlideIn 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      transform-origin: right center;
    }

    .toast.toast-exit {
      animation: toastSlideOut 0.3s cubic-bezier(0.4, 0, 0.6, 1) forwards;
    }

    @keyframes toastSlideIn {
      from {
        opacity: 0;
        transform: translateX(100%) scale(0.8);
      }
      to {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }

    @keyframes toastSlideOut {
      to {
        opacity: 0;
        transform: translateX(120%) scale(0.9);
      }
    }

    .toast-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-size: 14px;
      font-weight: 700;
    }

    .toast.success .toast-icon {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
    }

    .toast.error .toast-icon {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
    }

    .toast.info .toast-icon {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
    }

    .toast-message {
      flex: 1;
      font-size: 14px;
      font-weight: 600;
      color: #1e3a5f;
      line-height: 1.4;
    }

    .toast-close {
      width: 20px;
      height: 20px;
      border: none;
      background: rgba(30, 58, 95, 0.1);
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #1e3a5f;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .toast-close:hover {
      background: rgba(30, 58, 95, 0.2);
      transform: scale(1.1);
    }

    /* Reduce motion para usuarios que lo prefieren */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }

    .page {
      width: 100%;
      max-width: 100%;
      height: 100vh;
      height: -webkit-fill-available;
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      border-radius: 0;
      box-shadow: none;
      padding: 0;
      position: relative;
      display: flex;
      flex-direction: column;
      margin: 0;
      border: none;
      overflow-y: auto;
      overflow-x: hidden;
      transition: box-shadow var(--transition-slow);
    }

    .utility-bar {
      position: relative;
      top: 0;
      right: 0;
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: var(--space-sm);
      z-index: 25;
    }

    .utility-tab {
      border: none;
      background: rgba(255, 255, 255, 0.15);
      color: #fff;
      border-radius: var(--radius-md);
      padding: 10px 16px;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      box-shadow: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      transition: all var(--transition-base);
    }

    .utility-tab:hover {
      transform: translateY(0);
      background: rgba(255, 255, 255, 0.25);
      box-shadow: none;
    }

    .utility-tab:active {
      transform: translateY(0);
    }

    .utility-tab span {
      pointer-events: none;
    }

    .utility-menu {
      position: absolute;
      top: 50px;
      right: var(--space-md);
      margin-top: var(--space-sm);
      background: var(--uvc-panel);
      border-radius: var(--radius-lg);
      box-shadow: var(--uvc-shadow-lg);
      padding: var(--space-md);
      width: 210px;
      display: none;
      flex-direction: column;
      gap: var(--space-sm);
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity var(--transition-base), transform var(--transition-base);
    }

    .utility-menu.active {
      display: flex;
      animation: slideIn 0.25s ease forwards;
    }

    @keyframes slideIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .utility-menu {
        position: fixed;
        top: auto;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        border-radius: 20px 20px 0 0;
        padding: 20px 16px;
        max-height: 60vh;
        overflow-y: auto;
      }
      
      .utility-tab span:first-child {
        display: none;
      }
    }

    .close-pitch-btn {
      position: fixed;
      bottom: var(--space-lg);
      right: var(--space-lg);
      width: 56px;
      height: 56px;
      border: none;
      background: var(--uvc-error);
      color: #fff;
      border-radius: 50%;
      font-size: 28px;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 16px rgba(239, 68, 68, 0.4);
      transition: all var(--transition-base);
      z-index: 999;
    }

    .close-pitch-btn:hover {
      background: #dc2626;
      transform: scale(1.1);
      box-shadow: 0 8px 24px rgba(239, 68, 68, 0.5);
    }

    .close-pitch-btn:active {
      transform: scale(1.05);
    }

    @media (max-width: 720px) {
      .close-pitch-btn {
        width: 48px;
        height: 48px;
        font-size: 24px;
        bottom: calc(var(--space-lg) + env(safe-area-inset-bottom));
        right: var(--space-md);
      }
    }

    .utility-menu-title {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: var(--uvc-slate-light);
      letter-spacing: 0.08em;
      margin-bottom: var(--space-xs);
    }

    .utility-action {
      border: none;
      background: var(--uvc-navy);
      color: #fff;
      border-radius: var(--radius-md);
      padding: 12px var(--space-md);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      text-align: left;
      transition: all var(--transition-base);
      box-shadow: var(--uvc-shadow-sm);
    }

    .utility-action:hover {
      transform: translateY(-2px);
      box-shadow: var(--uvc-shadow);
      background: var(--uvc-navy-light);
    }

    .utility-action:active {
      transform: translateY(0);
    }

    .lang-pill-group {
      display: inline-flex;
      background: rgba(255,255,255,0.7);
      border: 1px solid var(--uvc-border);
      border-radius: var(--radius-full);
      overflow: hidden;
      box-shadow: var(--uvc-shadow-sm);
    }

    .lang-pill {
      border: none;
      background: transparent;
      padding: var(--space-sm) var(--space-md);
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      color: var(--uvc-slate);
      transition: all var(--transition-base);
      letter-spacing: 0.05em;
    }

    .lang-pill:hover:not(.active) {
      background: rgba(16, 38, 73, 0.05);
    }

    .lang-pill.active {
      background: var(--uvc-navy);
      color: #fff;
      box-shadow: var(--uvc-shadow-sm);
    }

    .price-checker-panel {
      position: absolute;
      top: 110px;
      right: 24px;
      width: min(340px, 90vw);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-radius: 20px;
      box-shadow: 
        0 20px 60px rgba(16, 38, 73, 0.15),
        0 8px 24px rgba(16, 38, 73, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      padding: 24px;
      z-index: 960;
      transform-origin: top right;
      transform: scale(0.95) translateY(-10px);
      opacity: 0;
      pointer-events: none;
      transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .price-checker-panel.active {
      opacity: 1;
      transform: scale(1) translateY(0);
      pointer-events: auto;
    }

    @media (max-width: 768px) {
      .price-checker-panel {
        position: fixed;
        top: auto;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        max-height: 85vh;
        border-radius: 24px 24px 0 0;
        padding: 20px 16px;
        transform: translateY(100%);
      }
      .price-checker-panel.active {
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .price-checker-panel {
        position: fixed;
        top: auto;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        max-height: 80vh;
        border-radius: 24px 24px 0 0;
        padding: 20px 16px;
        transform: translateY(100%);
      }
      .price-checker-panel.active {
        transform: translateY(0);
      }
    }

    @keyframes priceEnter {
      from {
        opacity: 0;
        transform: scale(0.92) translateY(-8px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    .pc-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 12px;
    }

    .pc-title {
      font-size: 16px;
      font-weight: 600;
      color: #102649;
    }

    .pc-subtitle {
      font-size: 12px;
      color: #6b7b9c;
    }

    .pc-close {
      border: none;
      background: rgba(16, 38, 73, 0.08);
      width: 32px;
      height: 32px;
      border-radius: 999px;
      font-size: 18px;
      cursor: pointer;
    }

    .pc-row {
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 8px;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(16, 38, 73, 0.08);
    }

    .pc-row:last-child {
      border-bottom: none;
    }

    .pc-price {
      font-size: 16px;
      font-weight: 600;
      color: #102649;
      justify-self: flex-end;
    }

    .pc-tag {
      font-size: 11px;
      color: #6b7b9c;
    }

    .pc-row.highlight {
      background: rgba(16, 38, 73, 0.05);
      border-radius: 14px;
      padding: 10px;
      margin: 6px 0 0;
    }

    .pc-section {
      border: 1px solid rgba(30,58,95,0.15);
      border-radius: 18px;
      padding: 18px;
      margin-bottom: 16px;
      background: linear-gradient(135deg, #ffffff 0%, #f8faff 100%);
      box-shadow: 
        0 2px 8px rgba(30, 58, 95, 0.06),
        0 4px 16px rgba(30, 58, 95, 0.04);
      transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .pc-section.loading::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.6),
        transparent
      );
      animation: shimmer 1.5s infinite;
    }
    
    @keyframes shimmer {
      to {
        left: 100%;
      }
    }
    
    .pc-section:hover {
      box-shadow: 
        0 8px 24px rgba(30, 58, 95, 0.1),
        0 4px 12px rgba(30, 58, 95, 0.08);
      transform: translateY(-3px) scale(1.01);
      border-color: rgba(30,58,95,0.2);
    }

    @media (max-width: 768px) {
      .pc-section {
        padding: 14px;
        margin-bottom: 12px;
        border-radius: 14px;
      }
      .pc-section-title {
        font-size: 14px;
      }
      .pc-section-uvc {
        font-size: 16px;
      }
    }

    @media (max-width: 768px) {
      .pc-section {
        padding: 14px;
        margin-bottom: 12px;
        border-radius: 14px;
      }
      .pc-section-title {
        font-size: 14px;
      }
      .pc-section-uvc {
        font-size: 16px;
      }
    }

    .pc-section:last-of-type {
      margin-bottom: 0;
    }

    .pc-section-head {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      align-items: center;
      margin-bottom: 8px;
    }

    .pc-section-title {
      font-size: 15px;
      font-weight: 700;
      color: #102649;
    }

    .pc-section-meta {
      font-size: 12px;
      color: #6b7b9c;
    }

    .pc-section-uvc {
      font-size: 18px;
      font-weight: 700;
      color: #C8A24B;
      text-align: right;
    }

    .pc-row-logo {
      width: 48px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .pc-row-logo img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .pc-note {
      font-size: 11px;
      color: #6b7b9c;
      text-align: left;
      margin-top: 10px;
    }

    .home-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #0a1a35 0%, #102649 50%, #1a4d7a 100%);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 24px;
      z-index: 1200;
      backdrop-filter: blur(20px) saturate(180%);
      animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes fadeIn {
      from { 
        opacity: 0;
        transform: scale(0.95);
      }
      to { 
        opacity: 1;
        transform: scale(1);
      }
    }

    .home-screen.active {
      display: flex;
    }

    .home-card {
      width: min(1100px, 95vw);
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(40px) saturate(180%);
      -webkit-backdrop-filter: blur(40px) saturate(180%);
      border-radius: 28px;
      padding: 48px;
      box-shadow: 
        0 32px 64px rgba(10, 26, 53, 0.15),
        0 16px 32px rgba(10, 26, 53, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.6);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      gap: 48px;
      max-height: 90vh;
      overflow-y: auto;
      animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.92) translateY(20px);
        opacity: 0;
      }
      to {
        transform: scale(1) translateY(0);
        opacity: 1;
      }
    }

    @media (max-width: 768px) {
      .home-card {
        padding: 28px 20px;
        gap: 28px;
        border-radius: 20px;
        grid-template-columns: 1fr;
        max-height: calc(100vh - 100px);
      }

      .home-hero h1 {
        font-size: 24px;
      }

      .home-hero span {
        font-size: 12px;
      }

      .home-hero img {
        max-width: 200px;
      }
    }

    .home-left h1 {
      margin: 0 0 12px;
      font-size: 32px;
      color: #0a1a35;
      font-weight: 800;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }

    .home-hero {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 28px;
      padding: 32px 24px;
    }

    .home-hero img {
      max-width: 280px;
      width: 100%;
      filter: drop-shadow(0 20px 40px rgba(16, 38, 73, 0.15));
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .home-hero img:hover {
      transform: scale(1.03) translateY(-4px);
      filter: drop-shadow(0 25px 50px rgba(16, 38, 73, 0.2));
    }

    .home-hero h1 {
      margin: 0;
      font-size: 28px;
      color: var(--uvc-navy);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-weight: 700;
    }

    .home-hero span {
      font-size: 14px;
      color: var(--uvc-slate);
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }
    .primary-btn {
      border: none;
      background: linear-gradient(135deg, #102649 0%, #C8A24B 100%);
      color: #fff;
      padding: 16px 32px;
      border-radius: 16px;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 
        0 4px 16px rgba(16, 38, 73, 0.2),
        0 8px 32px rgba(200, 162, 75, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      letter-spacing: 0.05em;
      text-transform: uppercase;
      position: relative;
      overflow: hidden;
      transform: translateZ(0);
      will-change: transform, box-shadow;
    }

    .primary-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .primary-btn:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 
        0 12px 28px rgba(16, 38, 73, 0.25),
        0 20px 48px rgba(16, 38, 73, 0.18),
        inset 0 1px 0 rgba(255, 255, 255, 0.25);
    }

    .primary-btn:hover::before {
      opacity: 1;
    }

    .primary-btn:active {
      transform: translateY(0);
    }

    .start-panel {
      margin: var(--space-md) 0 var(--space-lg);
    }

    .start-ready {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
      border-radius: 16px;
      border: 1px solid rgba(59, 130, 246, 0.15);
      padding: 20px 24px;
      font-size: 14px;
      color: #334155;
      line-height: 1.7;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.08);
    }

    .sale-overlay {
      position: fixed;
      inset: 0;
      background: rgba(10, 26, 53, 0.6);
      backdrop-filter: blur(12px) saturate(120%);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1500;
      animation: fadeIn 0.25s ease;
    }

    .sale-overlay.active {
      display: flex;
    }

    .sale-card {
      width: min(480px, 95vw);
      background: var(--uvc-panel);
      border-radius: var(--radius-xl);
      padding: var(--space-xl);
      box-shadow: var(--uvc-shadow-lg);
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      animation: scaleIn var(--transition-slow) ease;
    }

    .sale-card h3 {
      margin: 0;
      font-size: 20px;
      color: var(--uvc-navy-dark);
      font-weight: 700;
    }

    .sale-card p {
      margin: 0;
      font-size: 14px;
      color: var(--uvc-slate);
      line-height: 1.5;
    }

    .sale-choice-buttons {
      display: flex;
      gap: var(--space-md);
    }

    .sale-choice-buttons button {
      flex: 1;
      border: none;
      border-radius: var(--radius-md);
      padding: var(--space-md);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      color: #fff;
      transition: all var(--transition-base);
    }

    .sale-choice-buttons button:hover {
      transform: translateY(-2px);
      box-shadow: var(--uvc-shadow-sm);
    }

    .sale-choice-buttons button[data-choice="win"] { 
      background: var(--uvc-success); 
    }
    
    .sale-choice-buttons button[data-choice="win"]:hover { 
      background: #059669; 
    }
    
    .sale-choice-buttons button[data-choice="loss"] { 
      background: var(--uvc-warning); 
    }
    
    .sale-choice-buttons button[data-choice="loss"]:hover { 
      background: #d97706; 
    }

    .sale-choice.hidden {
      display: none;
    }

    .sale-staff {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 24px;
      padding: 20px;
      background: #f8f9fc;
      border-radius: 16px;
      border: 2px solid #d0d9eb;
    }

    .sale-staff-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .sale-staff-grid label {
      font-size: 14px;
      font-weight: 700;
      color: #0e2148;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .sale-staff-grid input {
      width: 100%;
      border: 3px solid #0f2f72 !important;
      border-radius: 12px;
      padding: 16px 18px;
      font-size: 18px;
      background: #ffffff !important;
      font-weight: 600;
      color: #000 !important;
      min-height: 56px;
      box-sizing: border-box;
    }

    .sale-staff-grid input:focus {
      outline: none;
      border-color: #d32f2f !important;
      box-shadow: 0 0 0 4px rgba(211, 47, 47, 0.2);
    }

    .sale-staff-grid input::placeholder {
      color: #6b7b9c;
      opacity: 1;
    }


    .sale-staff-hint {
      font-size: 13px;
      color: #5a6b8c;
      font-weight: 500;
      text-align: center;
      padding: 8px;
      background: #e8ecf5;
      border-radius: 8px;
    }

    .sale-staff-error {
      font-size: 12px;
      color: #d4444f;
      min-height: 16px;
    }

    .sale-form {
      display: none;
      flex-direction: column;
      gap: 12px;
    }

    .sale-form.active {
      display: flex;
    }

    .sale-field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .sale-field label {
      font-size: 13px;
      color: var(--uvc-navy-dark);
      font-weight: 600;
      margin-bottom: var(--space-xs);
      display: block;
    }

    .sale-field select,
    .sale-field textarea {
      border: 1px solid var(--uvc-border-medium);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      font-size: 14px;
      font-family: inherit;
      transition: border-color var(--transition-base), box-shadow var(--transition-base);
      width: 100%;
    }

    .sale-field select:focus,
    .sale-field textarea:focus {
      outline: none;
      border-color: var(--uvc-navy);
      box-shadow: 0 0 0 3px rgba(16, 38, 73, 0.1);
    }

    .sale-field textarea {
      min-height: 80px;
      resize: vertical;
    }

    .sale-actions {
      display: flex;
      gap: var(--space-md);
      margin-top: var(--space-sm);
    }

    .sale-btn {
      flex: 1;
      border: none;
      border-radius: var(--radius-md);
      padding: 12px var(--space-md);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      color: #fff;
      transition: all var(--transition-base);
    }

    .sale-btn:hover {
      transform: translateY(-1px);
      box-shadow: var(--uvc-shadow-sm);
    }

    .sale-btn:active {
      transform: translateY(0);
    }

    .sale-btn.primary { 
      background: var(--uvc-navy); 
    }
    
    .sale-btn.primary:hover { 
      background: var(--uvc-navy-dark); 
    }
    
    .sale-btn.secondary { 
      background: var(--uvc-slate-light); 
      color: var(--uvc-navy); 
    }

    .sale-stats {
      display: flex;
      gap: var(--space-md);
      font-size: 13px;
      color: var(--uvc-slate);
    }

    .sale-stats div {
      background: var(--uvc-light);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      flex: 1;
      text-align: center;
      transition: transform var(--transition-base), box-shadow var(--transition-base);
    }

    .sale-stats div:hover {
      transform: translateY(-2px);
      box-shadow: var(--uvc-shadow-sm);
    }

    .sale-stats strong {
      display: block;
      font-size: 18px;
      color: var(--uvc-navy-dark);
      font-weight: 700;
    }

    .sales-report {
      margin-top: var(--space-lg);
      border: 1px solid var(--uvc-border);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-md);
      align-items: center;
      background: linear-gradient(135deg, #fafbff 0%, #f5f7fb 100%);
    }

    .sales-report span {
      font-size: 13px;
      color: var(--uvc-navy);
      font-weight: 500;
    }

    .sales-report button {
      border: none;
      background: var(--uvc-navy);
      color: #fff;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-md);
      font-size: 13px;
      cursor: pointer;
      transition: all var(--transition-base);
      font-weight: 600;
    }

    .sales-report button:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: var(--uvc-shadow-sm);
      background: var(--uvc-navy-dark);
    }

    .sales-report button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .sales-report .reset-btn {
      background: var(--uvc-error);
    }

    .sales-report .reset-btn:hover:not(:disabled) {
      background: #dc2626;
    }

    .relock-btn {
      border: 1px solid var(--uvc-border-medium);
      background: var(--uvc-panel);
      color: var(--uvc-navy);
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-md);
      font-size: 13px;
      cursor: pointer;
      transition: all var(--transition-base);
      font-weight: 600;
    }

    .relock-btn:hover {
      background: var(--uvc-light);
      border-color: var(--uvc-navy);
      transform: translateY(-1px);
      box-shadow: var(--uvc-shadow-sm);
    }

    .home-config:not(.locked) .relock-btn {
      display: inline-flex;
    }

    .home-config {
      border: 1px solid var(--uvc-border);
      border-radius: var(--radius-xl);
      padding: var(--space-xl);
      background: linear-gradient(180deg, #f8faff, #eef2ff);
      position: relative;
      box-shadow: var(--uvc-shadow-sm);
    }

    .home-config > * {
      position: relative;
      z-index: 1;
    }

    .config-head {
      display: flex;
      justify-content: space-between;
      gap: var(--space-md);
      align-items: flex-end;
      margin-bottom: var(--space-lg);
    }

    .config-head h3 {
      margin: 0;
      font-size: 18px;
      color: var(--uvc-navy);
      font-weight: 700;
    }

    .config-head p {
      margin: var(--space-xs) 0 0;
      font-size: 12px;
      color: var(--uvc-slate-light);
    }

    .pin-form {
      display: flex;
      gap: var(--space-sm);
    }

    .pin-form input {
      border: 1px solid var(--uvc-border-medium);
      border-radius: var(--radius-md);
      padding: var(--space-sm) var(--space-md);
      width: 110px;
      font-size: 14px;
      transition: border-color var(--transition-base), box-shadow var(--transition-base);
    }

    .pin-form input:focus {
      outline: none;
      border-color: var(--uvc-navy);
      box-shadow: 0 0 0 3px rgba(16, 38, 73, 0.1);
    }

    .pin-form button {
      border: none;
      background: var(--uvc-navy);
      color: #fff;
      border-radius: var(--radius-md);
      padding: var(--space-sm) var(--space-md);
      cursor: pointer;
      font-weight: 600;
      transition: all var(--transition-base);
    }

    .pin-form button:hover {
      background: var(--uvc-navy-dark);
      transform: translateY(-1px);
      box-shadow: var(--uvc-shadow-sm);
    }

    .pin-status {
      font-size: 12px;
      margin-top: var(--space-sm);
      color: var(--uvc-error);
      font-weight: 500;
    }

    .config-body {
      display: flex;
      flex-direction: column;
      gap: var(--space-lg);
    }

    .config-properties {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: var(--space-lg);
    }

    .config-property {
      border: 1px solid var(--uvc-border);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      background: var(--uvc-panel);
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      transition: transform var(--transition-base), box-shadow var(--transition-base);
    }

    .config-property:hover {
      transform: translateY(-2px);
      box-shadow: var(--uvc-shadow-sm);
    }

    .config-property-title {
      font-size: 15px;
      font-weight: 700;
      color: var(--uvc-navy);
      margin: 0 0 var(--space-xs);
    }

    .config-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: var(--space-md);
    }

    .config-field {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .config-field label {
      font-size: 12px;
      color: #4a5672;
      font-weight: 600;
    }

    .config-field input {
      border: 1px solid #c5d0f0;
      border-radius: 12px;
      padding: 8px 10px;
      font-size: 14px;
      background: #fff;
    }

    .staff-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }

    .staff-column span {
      font-size: 12px;
      font-weight: 600;
      color: #4a5672;
      margin-bottom: 4px;
      display: inline-block;
    }

    .staff-column textarea {
      border: 1px solid #c5d0f0;
      border-radius: 12px;
      padding: 10px;
      min-height: 110px;
      resize: vertical;
      font-size: 13px;
      font-family: inherit;
      background: #fff;
    }

    .config-field.full {
      grid-column: 1 / -1;
    }

    .config-save-btn {
      margin-top: 4px;
      padding: 10px 16px;
      border-radius: 999px;
      border: none;
      background: #1f7c4d;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
      align-self: flex-start;
    }

    .config-save-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .config-save-btn:not(:disabled):hover {
      background: #17603b;
    }

    .config-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
    }

    .config-summary-item {
      background: #fff;
      border-radius: 16px;
      padding: 10px 12px;
      border: 1px solid #dfe3fb;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
      color: #1f335b;
    }

    .config-locked-message {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 30px 20px;
      gap: 12px;
      color: #1f335b;
    }

    .config-locked-message .lock-icon {
      font-size: 28px;
    }

    .home-config.locked::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(240,243,255,0.92);
      border-radius: 24px;
      pointer-events: none;
      z-index: 0;
    }

    .home-config.locked .config-body,
    .home-config.locked .config-summary,
    .home-config.locked .admin-tabs,
    .home-config.locked .admin-section {
      display: none;
    }

    .home-config.locked .config-locked-message {
      display: flex;
    }

    .lang-callout {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .home-config.locked .lang-callout {
      display: none;
    }

    .analytics-panel {
      margin-top: 24px;
      display: flex;
      flex-direction: column;
      gap: 0;
    }

    .admin-tabs {
      display: flex;
      gap: var(--space-sm);
      border-bottom: 3px solid var(--uvc-border-strong);
      padding: 0 var(--space-sm);
      background: var(--uvc-light);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    }

    .admin-tab-btn {
      padding: var(--space-md) var(--space-xl);
      border: none;
      background: transparent;
      color: var(--uvc-slate);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      border-radius: var(--radius-md) var(--radius-md) 0 0;
      transition: all var(--transition-base);
      position: relative;
      top: 3px;
    }

    .admin-tab-btn:hover {
      background: rgba(16, 38, 73, 0.05);
      color: var(--uvc-navy);
      transform: translateY(-2px);
    }

    .admin-tab-btn.active {
      background: var(--uvc-panel);
      color: var(--uvc-navy);
      border-bottom: 3px solid var(--uvc-navy);
      font-weight: 700;
      box-shadow: 0 -2px 8px rgba(16, 38, 73, 0.08);
    }

    .admin-section {
      display: none;
      border: 2px solid var(--uvc-border-strong);
      border-top: none;
      border-radius: 0 0 var(--radius-xl) var(--radius-xl);
      padding: var(--space-2xl);
      background: linear-gradient(135deg, var(--uvc-panel) 0%, var(--uvc-light) 100%);
      box-shadow: var(--uvc-shadow-sm);
      min-height: 500px;
    }

    .admin-section.active {
      display: block;
      animation: fadeInSection var(--transition-slow) ease;
    }

    @keyframes fadeInSection {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .admin-section h3 {
      margin: 0 0 var(--space-xl) 0;
      font-size: 24px;
      font-weight: 700;
      color: var(--uvc-navy);
      padding-bottom: var(--space-lg);
      border-bottom: 2px solid var(--uvc-border-medium);
    }

    .analytics-header {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: center;
      border-bottom: 2px solid #e0e7f5;
      padding-bottom: 20px;
      margin-bottom: 8px;
    }

    .analytics-header img {
      width: 120px;
      height: auto;
    }

    .analytics-names {
      flex: 1;
      font-size: 12px;
      font-weight: 600;
      color: #1f335b;
    }

    .analytics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 18px;
    }

    .metric-card {
      border: 2px solid #d5dff0;
      border-radius: 18px;
      padding: 20px 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .metric-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(15, 47, 114, 0.12);
    }

    .metric-card span {
      font-size: 13px;
      font-weight: 600;
      color: #5a678a;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .metric-card strong {
      font-size: 28px;
      font-weight: 700;
      color: #0f2654;
    }

    .metric-card small {
      font-size: 12px;
      color: #6b7b9c;
      margin-top: -2px;
    }

    .period-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      padding: 20px;
      background: rgba(15, 47, 114, 0.03);
      border-radius: 16px;
    }

    .period-card {
      border: 2px solid #dce4f5;
      border-radius: 16px;
      padding: 16px 18px;
      background: #ffffff;
      transition: border-color 0.2s ease;
    }

    .period-card:hover {
      border-color: #0f2f72;
    }

    .period-card span {
      font-size: 12px;
      font-weight: 600;
      color: #5e6b8f;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      display: block;
    }

    .period-card strong {
      display: block;
      font-size: 22px;
      font-weight: 700;
      color: #0f2654;
      margin-top: 8px;
    }

    .ranking-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
      margin-top: 8px;
    }

    .ranking-card {
      border: 1px solid #e0e5fb;
      border-radius: 16px;
      padding: 12px;
      background: #fff;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .ranking-card h4 {
      margin: 0;
      font-size: 14px;
      color: #0f2654;
    }

    .ranking-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .ranking-list li {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid #eef1ff;
      background: #f9faff;
    }

    .ranking-list .ranking-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      color: #0e2148;
    }

    .ranking-list small {
      font-size: 11px;
      color: #556180;
    }

    .top-card {
      border: 1px solid #dfe3fb;
      border-radius: 16px;
      padding: 12px;
      background: linear-gradient(180deg, #f7f9ff, #ecf1ff);
    }

    .top-card h4 {
      margin: 0;
      font-size: 13px;
      color: #0f2654;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .top-card .top-name {
      font-size: 18px;
      color: #0e2148;
      font-weight: 600;
      margin-top: 4px;
    }

    .top-card .top-amount {
      font-size: 14px;
      color: #4d5a7b;
    }

    .comparison-card {
      border: 1px solid #dfe3fb;
      border-radius: 16px;
      padding: 12px;
      background: #fff;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .comparison-card h4 {
      margin: 0;
      font-size: 14px;
      color: #0f2654;
    }

    .comparison-row {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: #4a5672;
    }

    .comparison-bar {
      flex: 1;
      height: 10px;
      background: #eef1ff;
      border-radius: 999px;
      overflow: hidden;
    }

    .comparison-fill {
      height: 100%;
      background: linear-gradient(90deg, #274b91, #5d85ff);
      width: 0%;
      transition: width 0.4s ease;
    }

    .comparison-row strong {
      font-size: 13px;
      color: #0f2654;
    }

    @media (max-width: 600px) {
      .utility-bar {
        top: 12px;
        right: 14px;
      }
      .price-checker-panel {
        right: 14px;
        width: calc(100% - 28px);
      }
    }

    /* ------------ HEADER SUPERIOR ------------ */

    .top {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      margin-bottom: 4px;
    }

    .uvc-box {
      text-align: center;
    }

    .uvc-logo {
      max-width: 360px;
      max-height: 105px;
      width: 100%;
      object-fit: contain;
      margin: 0 auto;
      display: block;
    }

    .uvc-subtitle {
      display: none;
    }

    /* ----------- TÍTULOS DE SECCIÓN ----------- */

    /* ----------- CONTENEDOR 3 COLUMNAS ----------- */

    .columns {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      column-gap: 24px;
      flex: 1;
      align-items: stretch;
      width: 100%;
      max-width: 100%;
      margin: 0;
    }

    /* Desktop grande (más de 1400px) */
    @media (min-width: 1400px) {
      .app-content {
        padding: 32px 40px;
      }
      .columns {
        column-gap: 32px;
        max-width: 1600px;
        margin: 0 auto;
      }
      .col-inner {
        padding: 28px 24px;
      }
      .modal {
        width: min(1300px, 90vw);
      }
      .home-card {
        max-width: 1200px;
        padding: 48px;
      }
    }

    /* Desktop grande (más de 1400px) */
    @media (min-width: 1400px) {
      .app-content {
        padding: 32px 40px;
      }
      .columns {
        column-gap: 32px;
        max-width: 1600px;
        margin: 0 auto;
      }
      .col-inner {
        padding: 28px 24px;
      }
      .modal {
        width: min(1300px, 90vw);
        padding: 36px;
      }
      .home-card {
        max-width: 1200px;
        padding: 48px;
      }
    }

    /* Laptops (1025px - 1399px) */
    @media (min-width: 1025px) and (max-width: 1399px) {
      .app-content {
        padding: 28px 32px;
      }
      .columns {
        column-gap: 28px;
      }
      .col-inner {
        padding: 26px 22px;
      }
      .modal {
        width: min(1200px, 88vw);
        padding: 32px;
      }
    }

    /* iPad Pro y tablets grandes (768px - 1024px) */
    @media (min-width: 768px) and (max-width: 1024px) {
      .app-content { 
        padding: 28px 24px; 
      }
      .columns { 
        grid-template-columns: repeat(3, 1fr);
        column-gap: 24px;
      }
      .col-inner {
        padding: 24px 20px;
      }
      .uvc-title-ring { 
        height: 76px;
        padding: 12px 26px;
      }
      .home-card { 
        grid-template-columns: repeat(2, 1fr); 
        padding: 40px; 
        gap: 40px;
        max-width: 100%;
        width: 95vw;
      }
      .price-checker-panel { 
        top: 76px; 
        right: 20px; 
        width: 360px; 
      }
      .modal {
        width: 92vw;
        max-width: 1100px;
        padding: 28px;
      }
      .promo-hero {
        grid-template-columns: 1.3fr 0.7fr;
        gap: 24px;
      }
      .admin-tab-btn {
        padding: 14px 24px;
        font-size: 13px;
      }
      .app-header {
        height: 60px;
        padding: 0 24px;
      }
      .benefit-list li {
        padding: 12px 16px;
        font-size: 14px;
      }
      .metric-card {
        padding: 20px;
      }
    }

    /* Tablets medianos (600px - 767px) */
    @media (max-width: 767px) {
      .app-content { 
        padding: 16px; 
      }
      .columns { 
        grid-template-columns: 1fr; 
        row-gap: 16px; 
      }
      .col-inner {
        padding: 18px;
      }
      .home-card { 
        grid-template-columns: 1fr; 
        padding: 28px 20px; 
        gap: 28px;
      }
      .modal {
        width: min(700px, 92vw);
        padding: 20px 24px 24px;
      }
      .promo-hero {
        grid-template-columns: 1fr;
        gap: 20px;
      }
    }

    @media (max-width: 720px) {
      :root {
        --space-lg: 20px;
        --space-xl: 28px;
      }
      body {
        font-size: 14px;
      }
      .app-content { 
        padding: 20px 16px 80px;
      }
      .columns { 
        grid-template-columns: 1fr; 
        row-gap: 20px; 
      }
      .col-title { 
        font-size: 10px; 
        letter-spacing: 0.1em;
        margin-bottom: 12px;
      }
      .col-inner { 
        padding: 20px 16px;
        border-radius: 16px;
        margin-bottom: 8px;
      }
      .home-hero {
        padding: 28px 20px;
        gap: 24px;
      }
      .home-hero img { 
        max-width: 220px; 
      }
      .home-left h1 {
        font-size: 26px;
        line-height: 1.3;
      }
      .home-hero h1 {
        font-size: 22px;
        line-height: 1.3;
      }
      .home-hero span {
        font-size: 12px;
      }
      .home-card {
        padding: 28px 20px;
        gap: 28px;
        border-radius: 20px;
      }
      .primary-btn { 
        width: 100%; 
        padding: 16px 28px;
        font-size: 15px;
      }
      .price-checker-panel { 
        position: fixed; 
        top: auto; 
        bottom: 20px; 
        right: 16px; 
        left: 16px; 
        width: auto;
        max-height: 70vh;
      }
      .admin-tab-btn {
        padding: 12px 16px;
        font-size: 12px;
        white-space: nowrap;
      }
      .admin-section {
        padding: 24px 16px;
      }
      .app-header {
        height: 56px;
        padding: 0 16px;
      }
      .fullscreen-btn {
        width: 42px;
        height: 42px;
        font-size: 17px;
      }
      .modal {
        width: calc(100vw - 32px);
        max-height: calc(100vh - 60px);
        padding: 20px 20px 24px;
        border-radius: 20px;
      }
      .modal-header {
        margin-bottom: 16px;
        padding-bottom: 16px;
      }
      .modal-header h2 {
        font-size: 19px;
      }
      .uvc-title-ring {
        height: 68px;
        padding: 10px 22px;
      }
      .promo-thumb-grid {
        grid-template-columns: 1fr;
        gap: 14px;
      }
      .promo-filters {
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 4px;
      }
      .promo-filter-btn {
        font-size: 11px;
        padding: 8px 14px;
      }
      .first-layout {
        grid-template-columns: 1fr;
        gap: 16px;
      }
      .benefit-list li {
        padding: 10px 12px;
        font-size: 13px;
        margin-bottom: 8px;
      }
      .note-box {
        padding: 12px;
        font-size: 11px;
        line-height: 1.5;
      }
      .metric-card {
        padding: 16px;
      }
      .config-grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }
    }

    .col {
      position: relative;
      padding: 8px 4px 8px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    /* líneas verticales columna central */
    .col:nth-child(2)::before,
    .col:nth-child(2)::after {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      width: 1px;
      background: linear-gradient(
        to bottom,
        rgba(184,196,224,0),
        rgba(184,196,224,0.9),
        rgba(184,196,224,0)
      );
    }

    .col:nth-child(2)::before {
      left: -12px;
    }

    .col:nth-child(2)::after {
      right: -12px;
    }

    .col-inner {
      border-radius: 20px;
      padding: 24px 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(16, 38, 73, 0.08);
      height: 100%;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(16, 38, 73, 0.05), 0 10px 20px rgba(16, 38, 73, 0.08);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .col-inner:hover {
      box-shadow: 0 8px 16px rgba(16, 38, 73, 0.08), 0 20px 40px rgba(16, 38, 73, 0.12);
      transform: translateY(-3px);
      border-color: rgba(16, 38, 73, 0.12);
    }

    .col-title {
      text-align: center;
      font-size: 11px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--uvc-slate);
      margin-bottom: 16px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
      width: 100%;
    }

    .uvc-title {
      padding-bottom: 4px;
    }

    .uvc-title-ring {
      width: min(100%, 320px);
      height: 78px;
      border-radius: 999px;
      border: 1px solid rgba(16, 38, 73, 0.08);
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      box-shadow: 0 4px 12px rgba(16, 38, 73, 0.08), 0 8px 24px rgba(16, 38, 73, 0.06), inset 0 1px 2px rgba(255, 255, 255, 0.8);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 26px;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .uvc-title-ring:hover {
      box-shadow: 0 8px 20px rgba(16, 38, 73, 0.12), 0 12px 32px rgba(16, 38, 73, 0.08), inset 0 1px 2px rgba(255, 255, 255, 0.8);
      transform: translateY(-2px) scale(1.02);
    }

    .uvc-title-ring img {
      width: 105%;
      height: 100%;
      object-fit: contain;
      transform: translateX(1%);
    }

    .col-title-link {
      background: transparent;
      border: none;
      padding: 0;
      width: 100%;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .col-title-link:focus-visible {
      outline: 2px solid #102649;
      outline-offset: 4px;
    }

    .col-title-button {
      background: transparent;
      border: none;
      padding: 0;
      width: 100%;
      cursor: pointer;
      color: inherit;
      font: inherit;
    }

    .col-title-button:focus-visible {
      outline: 2px dashed rgba(16, 38, 73, 0.5);
      outline-offset: 4px;
    }

    /* Efectos hover para imágenes de marca */
    .brand-logo {
      cursor: pointer;
      transition: all var(--transition-base);
      filter: grayscale(0%);
    }

    .brand-logo:hover {
      transform: scale(1.05);
      filter: brightness(1.1) drop-shadow(0 4px 8px rgba(0,0,0,0.15));
    }

    .brand-logo:active {
      transform: scale(1.02);
    }

    @media (max-width: 600px) {
      .uvc-title-ring,
      .uexperience-banner,
      .worldwide-ring {
        width: 95%;
        height: 60px;
        padding: 8px 16px;
      }
      .utility-bar {
        top: 12px;
        right: 12px;
      }
      .utility-tab {
        padding: 8px 12px;
        font-size: 11px;
      }
      .config-grid {
        grid-template-columns: 1fr;
      }
      .breakeven-grid {
        grid-template-columns: 1fr;
      }
      .metric-card {
        min-width: 100%;
      }
    }

    @media (max-width: 480px) {
      .app-header {
        height: 52px;
      }
      .app-content {
        padding: 18px 14px 70px;
      }
      .home-hero img {
        max-width: 180px;
      }
      .home-left h1 {
        font-size: 22px;
      }
      .col-inner {
        padding: 18px 14px;
      }
      .modal {
        border-radius: 18px;
        padding: 18px 18px 20px;
      }
      .promo-hero-media {
        min-height: 260px;
        border-radius: 20px;
      }
      .start-ready {
        padding: 16px 18px;
        font-size: 13px;
      }
      .sale-card {
        padding: 24px 20px;
      }
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border: 0;
    }

    .uexperience-banner {
      width: min(100%, 330px);
      height: 80px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 28px;
      border-radius: 999px;
      border: 1px solid rgba(20, 42, 92, 0.22);
      background: linear-gradient(130deg, #fef8ff, #eff4ff);
      box-shadow: 0 17px 34px rgba(13, 32, 74, 0.19);
      overflow: hidden;
    }

    .uex-logo {
      width: 110%;
      height: auto;
      object-fit: contain;
      filter: drop-shadow(0 12px 18px rgba(12, 32, 70, 0.15));
      transform: translateX(1%);
    }

    .worldwide-title {
      display: flex;
      justify-content: center;
      margin-bottom: 12px;
    }

    .worldwide-ring {
      width: min(100%, 320px);
      height: 78px;
      border-radius: 999px;
      border: 1px solid rgba(14, 38, 83, 0.25);
      background: linear-gradient(135deg, #f7fbff, #ecf3ff);
      box-shadow: 0 12px 30px rgba(10, 32, 64, 0.18);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 10px 26px;
    }

    .worldwide-icon {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(0,67,115,0.2));
      border: 1px solid rgba(16, 54, 104, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .worldwide-icon svg {
      width: 68%;
      height: 68%;
      display: block;
    }

    .worldwide-icon circle,
    .worldwide-icon path {
      stroke: rgba(8, 40, 82, 0.9);
      fill: none;
      stroke-width: 1.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    .worldwide-wordmark {
      font-size: 14px;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: #0d264e;
      white-space: nowrap;
    }

    .divider {
      height: 1px;
      margin: 10px 0;
      background: linear-gradient(90deg, transparent, #cbd3e6, transparent);
    }
      .pc-refresh {
        border: none;
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        color: white;
        display: flex;
        align-items: center;
        gap: 6px;
        transition: all 0.3s;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.25);
      }

      .pc-refresh:hover {
        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.35);
      }

      .pc-refresh:active {
        transform: translateY(0);
      }

      .pc-refresh:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none !important;
      }

      .pc-refresh-icon {
        display: inline-block;
        transition: transform 0.5s ease;
      }

      .pc-refresh-icon.spinning {
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }

      .pc-header-actions {
        display: flex;
        gap: 8px;
        align-items: center;
      }


    /* ---- COLUMNA 1: ALL INCLUSIVE RESORTS ---- */

    .first-layout {
      display: grid;
      grid-template-columns: 190px minmax(0, 1fr);
      column-gap: 12px;
      flex: 1;
      align-items: stretch;
    }

    .logo-stack {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 8px;
    }

    .logo-stack img {
      max-width: 190px;
      max-height: 80px;
      object-fit: contain;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      border-radius: 8px;
    }

    .benefits li {
      margin: 0;
      font-weight: 600;
      color: #1a2b45;
    }

    .benefit-link {
      color: inherit;
      text-decoration: none;
      cursor: pointer;
      transition: all var(--transition-base);
      display: inline-block;
      position: relative;
    }

    .benefit-link::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--uvc-navy);
      transition: width var(--transition-base);
    }

    .benefit-link:hover {
      color: var(--uvc-navy);
      transform: translateX(4px);
    }

    .benefit-link:hover::after {
      width: 100%;
    }

    .logo-stack img:hover {
      transform: scale(1.05) translateY(-2px);
      box-shadow: 0 8px 20px rgba(30, 58, 95, 0.25);
    }

    .allinclusive-notes {
      font-size: 11px;
      color: #7a869f;
      text-align: center;
      margin-top: 10px;
    }

    .benefits {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      font-size: 18px;
      line-height: 1.6;
      text-align: left;
    }

    .promo-launch {
      margin-top: 18px;
      width: 100%;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
      color: #fff;
      font-size: 13px;
      font-weight: 700;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      padding: 14px 16px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 8px 24px rgba(30, 58, 95, 0.35), 0 4px 12px rgba(0, 0, 0, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .promo-launch:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px rgba(30, 58, 95, 0.45), 0 6px 16px rgba(0, 0, 0, 0.25);
      background: linear-gradient(135deg, #2c5282 0%, #3d6aa3 100%);
    }

    /* ---- COLUMNA 2: WORLDWIDE ---- */

    .worldwide-inner {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .center-list {
      list-style: none;
      padding: 0;
      margin: 0 0 6px;
      font-size: 13px;
      text-align: center;
    }

    .center-list li {
      margin-bottom: 3px;
    }

    .logo-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px 16px;
      justify-items: center;
      margin-top: 8px;
    }

    .logo-grid img {
      max-width: 140px;
      max-height: 75px;
      object-fit: contain;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .logo-grid img:hover {
      transform: scale(1.06);
      box-shadow: 0 12px 26px rgba(0,0,0,0.22);
    }

    .hyatt-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      margin-top: 18px;
      font-size: 13px;
      color: #1f335b;
      font-weight: 500;
    }

    .hyatt-logo {
      max-width: 110px;
      max-height: 110px;
      object-fit: contain;
      cursor: pointer;
    }

    .hyatt-text div {
      line-height: 1.3;
    }

    .worldwide-inner .center-list {
      margin-top: 18px;
      margin-bottom: 12px;
    }

    .worldwide-inner .logo-grid {
      margin-top: 18px;
    }

    .worldwide-inner .hyatt-row {
      margin-top: 26px;
    }

    .worldwide-notes {
      margin-top: auto;
      font-size: 11px;
      color: #7a869f;
      text-align: center;
    }

    .worldwide-notes p {
      margin: 2px 0;
    }

    /* ---- COLUMNA 3: U EXPERIENCE ---- */

    .section-label {
      text-align: center;
      font-size: 13px;
      font-weight: 600;
      margin: 4px 0 8px;
    }

    .note {
      font-size: 10.5px;
      text-align: center;
      margin-top: auto;
      color: #687a97;
    }

    .simulator-panel {
      margin: 40px 0 24px;
      background: linear-gradient(135deg, #ffffff 0%, #f8fafb 100%);
      border-radius: 24px;
      padding: 0;
      color: var(--uvc-navy);
      box-shadow: 0 12px 48px rgba(16, 38, 73, 0.08), 0 2px 12px rgba(16, 38, 73, 0.04);
      border: 2px solid #e8ecf1;
    }

    .simulator-panel.flash {
      animation: breakevenPulse 1s ease;
    }

    .simulator-head {
      display: flex;
      align-items: center;
      gap: 18px;
      padding: 28px 36px 24px;
      background: linear-gradient(135deg, var(--uvc-navy) 0%, #1a4d7a 100%);
      border-radius: 24px 24px 0 0;
      border-bottom: 3px solid #29a37d;
    }

    .simulator-head img {
      width: 64px;
      height: 64px;
      object-fit: contain;
      filter: brightness(0) invert(1) drop-shadow(0 4px 12px rgba(255,255,255,0.15));
    }

    .simulator-head h3 {
      margin: 0;
      font-size: 24px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #fff;
    }

    .simulator-head span {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.75);
    }

    .simulator-tabs {
      display: flex;
      gap: 0;
      flex-wrap: wrap;
      padding: 0 36px;
      background: #f8fafb;
      border-bottom: 2px solid #e8ecf1;
    }

    .simulator-tabs button {
      border: none;
      background: transparent;
      color: #5d6b7e;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 12px;
      font-weight: 600;
      padding: 18px 32px;
      border-radius: 0;
      cursor: pointer;
      transition: all 0.3s ease;
      border-bottom: 3px solid transparent;
      position: relative;
    }
    
    .simulator-tabs button:hover {
      color: var(--uvc-navy);
      background: rgba(16, 38, 73, 0.03);
    }

    .simulator-tabs button.active {
      background: #ffffff;
      color: var(--uvc-navy);
      font-weight: 700;
      border-bottom: 3px solid #29a37d;
    }
    
    .simulator-tabs button.active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #29a37d, #1a8f68);
      box-shadow: 0 2px 8px rgba(41, 163, 125, 0.4);
    }

    .simulator-view {
      display: none;
      padding: 36px;
      background: #ffffff;
      border-radius: 0 0 24px 24px;
      animation: fadeInView var(--transition-slow) ease;
    }

    .simulator-view.active {
      display: block;
    }

    @keyframes fadeInView {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .breakeven-section {
      margin: 28px 0 18px;
      padding: 2px;
      border-radius: 28px;
      background: linear-gradient(120deg, rgba(15, 90, 150, 0.25), rgba(41, 163, 125, 0.2));
      position: relative;
      overflow: hidden;
    }

    .breakeven-section::before {
      content: '';
      position: absolute;
      inset: 15% auto auto 65%;
      width: 320px;
      height: 320px;
      background: radial-gradient(circle, rgba(255,255,255,0.25), transparent 60%);
      filter: blur(2px);
      pointer-events: none;
      opacity: 0.5;
    }

    .breakeven-section.flash .breakeven-card {
      animation: breakevenPulse 1.2s ease;
    }

    @keyframes breakevenPulse {
      0% { box-shadow: 0 0 0 rgba(47, 130, 187, 0.0); }
      40% { box-shadow: 0 0 0 12px rgba(47, 130, 187, 0.18); }
      100% { box-shadow: 0 0 0 rgba(47, 130, 187, 0.0); }
    }

    .breakeven-card {
      background: linear-gradient(135deg, #fcfdff, #f1f6ff);
      border-radius: 24px;
      padding: 20px 24px;
      box-shadow: 0 25px 70px rgba(14, 33, 79, 0.18);
      display: flex;
      flex-direction: column;
      gap: 16px;
      position: relative;
      z-index: 1;
    }

    .breakeven-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 12px;
      align-items: flex-start;
    }

    .breakeven-headline {
      flex: 1;
      min-width: 260px;
    }

    .breakeven-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .breakeven-header h2 {
      margin: 0;
      font-size: 20px;
      color: #0f1b3d;
    }

    .breakeven-header p {
      margin: 3px 0 0;
      color: #54638a;
      font-size: 13px;
    }


    .breakeven-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      align-items: start;
    }

    @media (max-width: 1024px){
      .breakeven-grid {
        grid-template-columns: 1fr;
        gap: 24px;
      }
    }

    .breakeven-form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    @media (max-width: 768px) {
      .breakeven-form {
        grid-template-columns: 1fr;
      }
    }

    .breakeven-form-group {
      border: 1px solid rgba(15, 40, 92, 0.08);
      border-radius: 14px;
      padding: 10px 12px;
      background: #f9fbff;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 8px 12px;
    }

    .breakeven-form-group h4 {
      grid-column: 1 / -1;
      margin: 0 0 4px;
      font-size: 12px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #5c6b8f;
    }

    .breakeven-form label {
      display: flex;
      flex-direction: column;
      gap: 3px;
      font-size: 11px;
      font-weight: 600;
      color: #1f335b;
    }

    .breakeven-form input {
      border: 1px solid #cdd6f0;
      border-radius: 10px;
      padding: 8px 10px;
      font-size: 14px;
      background: #fff;
    }

    .breakeven-inline-note {
      grid-column: 1 / -1;
      font-size: 12px;
      color: #5b6b8f;
    }

    .breakeven-results {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .breakeven-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .breakeven-stats > div {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafb 100%);
      padding: 14px 18px;
      border-radius: 14px;
      border: 2px solid #e8ecf1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .breakeven-stats > div:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(16, 38, 73, 0.12);
      border-color: var(--uvc-navy);
    }

    .breakeven-stats span {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #6b7785;
    }

    .breakeven-stats strong {
      font-size: 22px;
      font-weight: 800;
      color: var(--uvc-navy);
      letter-spacing: -0.02em;
    }

    .breakeven-stats > div:nth-child(3) strong,
    .breakeven-stats > div:nth-child(4) strong {
      color: #29a37d;
    }

    .breakeven-stats > div:nth-child(5) {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, var(--uvc-navy) 0%, #1a4d7a 100%);
      border-color: var(--uvc-navy);
    }

    .breakeven-stats > div:nth-child(5) span {
      color: rgba(255,255,255,0.85);
    }

    .breakeven-stats > div:nth-child(5) strong {
      color: #fff;
      font-size: 26px;
    }

    .breakeven-incentives {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }

    .incentive-card {
      background: #ffffff;
      border-radius: 16px;
      padding: 12px 14px;
      box-shadow: 0 10px 24px rgba(12,36,68,0.15);
      border: 1px solid rgba(15,40,92,0.08);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .incentive-card span {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #63708f;
    }

    .incentive-card strong {
      font-size: 22px;
      color: #0f1b3d;
    }

    .breakeven-roi {
      margin-top: 12px;
      background: rgba(6,18,46,0.9);
      color: #fff;
      border-radius: 24px;
      padding: 16px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
      align-items: center;
      box-shadow: 0 18px 40px rgba(6, 18, 46, 0.4);
    }

    .roi-summary {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .roi-summary span {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.7);
    }

    .roi-summary strong {
      font-size: 22px;
      font-weight: 700;
    }

    .breakeven-roi-note {
      grid-column: 1 / -1;
      margin: 4px 0 0;
      font-size: 13px;
      color: rgba(255,255,255,0.8);
    }

    .breakeven-visuals {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .breakeven-chart {
      position: relative;
      background: linear-gradient(135deg, var(--uvc-navy) 0%, #1a4d7a 50%, #2c6b9e 100%);
      border-radius: 18px;
      padding: 24px 20px;
      min-height: 280px;
      overflow: hidden;
      color: #fff;
      box-shadow: 0 12px 40px rgba(16, 38, 73, 0.25);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .breakeven-chart::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(41, 163, 125, 0.15), transparent 60%),
                  radial-gradient(circle at bottom left, rgba(47, 130, 187, 0.12), transparent 50%);
      pointer-events: none;
    }

    .breakeven-chart::after {
      content: '';
      position: absolute;
      inset: 80px 28px 40px;
      border-radius: 12px;
      border-bottom: 2px solid rgba(255,255,255,0.2);
      border-left: 2px solid rgba(255,255,255,0.2);
      pointer-events: none;
    }

    .breakeven-bars {
      position: relative;
      display: flex;
      align-items: flex-end;
      gap: 16px;
      height: 180px;
      margin-top: 16px;
      padding: 0 8px;
      z-index: 1;
    }

    .be-bar {
      flex: 1;
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.85));
      border-radius: 10px 10px 0 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      padding: 12px 8px 10px;
      min-width: 55px;
      position: relative;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.15), 0 4px 12px rgba(0,0,0,0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(8px);
    }
    
    .be-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 100%;
      background: linear-gradient(180deg, #29a37d, transparent);
      border-radius: 2px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .be-bar:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 -8px 32px rgba(0,0,0,0.2), 0 8px 20px rgba(0,0,0,0.15);
    }
    
    .be-bar:hover::before {
      opacity: 1;
    }

    .be-bar strong {
      font-size: 14px;
      font-weight: 800;
      color: var(--uvc-navy);
      margin-bottom: 4px;
      text-align: center;
      letter-spacing: -0.01em;
    }

    .be-bar span {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      opacity: 0.8;
      text-align: center;
      color: var(--uvc-navy);
    }

    .be-bar.hit {
      background: linear-gradient(180deg, #29a37d, #1a8f68);
      color: white;
      box-shadow: 0 -6px 28px rgba(41, 163, 125, 0.4), 0 4px 16px rgba(41, 163, 125, 0.3);
    }
    
    .be-bar.hit::before {
      background: linear-gradient(180deg, rgba(255,255,255,0.6), transparent);
      opacity: 1;
    }

    .be-bar.hit strong,
    .be-bar.hit span {
      color: white;
      opacity: 1;
    }

    .breakeven-marker {
      position: absolute;
      left: 28px;
      right: 28px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 12px;
      height: 3px;
      background: linear-gradient(90deg, #ffc107, #ff9800);
      box-shadow: 0 0 16px rgba(255, 193, 7, 0.6), 0 2px 8px rgba(255, 152, 0, 0.4);
      transition: bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 2;
    }

    .breakeven-marker::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 12px;
      height: 12px;
      background: #ffc107;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 0 12px rgba(255, 193, 7, 0.8);
    }

    .breakeven-marker span {
      position: absolute;
      left: 20px;
      top: -28px;
      background: linear-gradient(135deg, #ffc107, #ff9800);
      color: white;
      padding: 6px 14px;
      border-radius: 8px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      white-space: nowrap;
      box-shadow: 0 4px 12px rgba(255, 152, 0, 0.4);
    }

    .breakeven-marker span::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 10px;
      width: 8px;
      height: 8px;
      background: #ff9800;
      transform: rotate(45deg);
    }

    .simple-calc {
      background: linear-gradient(135deg, var(--uvc-navy) 0%, #1a4d7a 100%);
      color: #fff;
      border-radius: 20px;
      padding: 28px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      box-shadow: var(--uvc-shadow);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .simple-calc h3 {
      margin: 0;
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.9);
    }

    .quickcalc-display {
      background: rgba(255,255,255,0.1);
      border-radius: 14px;
      padding: 24px 20px;
      font-size: 32px;
      font-weight: 700;
      text-align: right;
      color: #fff;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      border: 1px solid rgba(255,255,255,0.15);
      backdrop-filter: blur(4px);
    }

    .quickcalc-buttons {
      display: grid;
      grid-template-columns: repeat(4, minmax(60px, 1fr));
      gap: 10px;
    }

    .quickcalc-btn {
      border: none;
      border-radius: 14px;
      padding: 14px;
      font-size: 16px;
      font-weight: 600;
      background: rgba(255,255,255,0.08);
      color: #fff;
      cursor: pointer;
      transition: transform 0.15s ease, background 0.2s ease;
    }

    .quickcalc-btn:hover {
      transform: translateY(-1px);
      background: rgba(255,255,255,0.16);
    }

    .quickcalc-btn.light {
      background: rgba(255,255,255,0.14);
    }

    .quickcalc-btn.operator {
      background: linear-gradient(135deg, #27ffd4, #1ed5f5);
      color: #041126;
    }

    .quickcalc-btn.equal {
      grid-column: span 2;
      background: linear-gradient(135deg, #ffe76a, #ffb347);
      color: #1c1405;
      font-size: 18px;
      box-shadow: 0 12px 24px rgba(255, 204, 0, 0.4);
    }

    .quickcalc-btn.wide {
      grid-column: span 2;
    }

    .quickcalc-result {
      font-size: 18px;
      font-weight: 600;
      text-align: right;
    }

    .simple-calc small {
      color: rgba(255,255,255,0.6);
    }

    .incentive-section {
      margin: 18px 0 30px;
      padding: 26px;
      border-radius: 28px;
      background: linear-gradient(135deg, #08142b, #111f3c);
      color: #fff;
      box-shadow: 0 22px 60px rgba(5, 10, 28, 0.6);
    }

    .incentive-section h3 {
      margin: 0 0 8px;
      font-size: 22px;
      letter-spacing: 0.03em;
    }

    .incentive-section p {
      margin: 0 0 18px;
      color: rgba(255,255,255,0.75);
      font-size: 14px;
    }

    .incentive-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 18px;
      align-items: center;
    }

    .incentive-form {
      background: rgba(255,255,255,0.04);
      border-radius: 20px;
      padding: 18px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      border: 1px solid rgba(255,255,255,0.08);
    }

    .incentive-form label {
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.7);
    }

    .incentive-form input {
      margin-top: 6px;
      border: none;
      border-radius: 14px;
      padding: 12px;
      font-size: 18px;
      font-weight: 600;
      background: rgba(255,255,255,0.9);
      color: #08142b;
    }

    .incentive-form small {
      color: rgba(255,255,255,0.6);
      font-size: 12px;
    }

    .incentive-results {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }

    .incentive-results .card {
      background: rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .incentive-results span {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.7);
    }

    .incentive-results strong {
      font-size: 22px;
      font-weight: 700;
    }

    .incentive-visuals {
      margin-top: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }

    .incentive-chart {
      background: linear-gradient(135deg, #061026, #14294a);
      border-radius: 24px;
      padding: 20px 24px 32px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);
      position: relative;
      overflow: hidden;
    }

    .incentive-chart::after {
      content: '';
      position: absolute;
      inset: 25px 24px 60px;
      border-radius: 18px;
      border: 1px dashed rgba(255,255,255,0.12);
      pointer-events: none;
    }

    .incentive-chart-bars {
      display: flex;
      gap: 22px;
      align-items: flex-end;
      height: 200px;
      margin-top: 18px;
    }

    .incentive-bar {
      flex: 1;
      border-radius: 18px 18px 10px 10px;
      padding: 14px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      min-width: 72px;
      transition: height 0.45s ease;
    }

    .incentive-bar[data-bar="investment"] {
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.25));
      box-shadow: 0 18px 30px rgba(0,0,0,0.35);
      color: #0a162e;
    }

    .incentive-bar[data-bar="returned"] {
      background: linear-gradient(180deg, #4ff2d2, #19a784);
      box-shadow: 0 18px 30px rgba(4, 53, 63, 0.4);
      color: #05141b;
    }

    .incentive-bar strong {
      font-size: 18px;
    }

    .incentive-bar span {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.85;
      margin-top: 6px;
    }

    .promotions-modal {
      max-width: 1400px;
    }

    @media (min-width: 768px) {
      .promotions-modal {
        width: 95vw;
      }
    }

    .promotions-body {
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    .promo-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .promo-filter-btn {
      border: 1px solid var(--uvc-border-medium);
      background: #fff;
      color: var(--uvc-navy);
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .promo-filter-btn:hover {
      background: var(--uvc-light);
      transform: translateY(-1px);
      box-shadow: var(--uvc-shadow-sm);
    }

    .promo-filter-btn.active {
      background: var(--uvc-navy);
      color: #fff;
      border-color: var(--uvc-navy);
      box-shadow: var(--uvc-shadow-sm);
    }

    .promo-hero {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 24px;
      align-items: stretch;
    }

    @media (max-width: 960px) {
      .promo-hero {
        grid-template-columns: 1fr;
      }
    }

    .promo-hero-media {
      position: relative;
      overflow: hidden;
      border-radius: 32px;
      min-height: 320px;
      background: #010913;
      box-shadow: 0 25px 60px rgba(5, 18, 44, 0.35);
    }

    .promo-hero-price {
      position: absolute;
      top: 16px;
      right: 16px;
      background: linear-gradient(135deg, #29a37d, #1a8f68);
      color: #fff;
      padding: 10px 14px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 800;
      letter-spacing: 0.02em;
      box-shadow: 0 10px 24px rgba(41,163,125,0.35);
    }

    .promo-hero-nav {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 8px;
      pointer-events: none;
    }

    .promo-hero-btn {
      pointer-events: auto;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: rgba(0,0,0,0.45);
      color: #fff;
      font-weight: 800;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: background var(--transition-base), transform var(--transition-base);
    }

    .promo-hero-btn:hover { background: rgba(0,0,0,0.6); transform: scale(1.05); }
    .promo-hero-btn:active { transform: scale(0.98); }

    .promo-hero-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .promo-hero-tagbar {
      position: absolute;
      left: 24px;
      right: 24px;
      bottom: 24px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .promo-pill {
      padding: 8px 16px;
      border-radius: 999px;
      background: rgba(2, 19, 30, 0.8);
      border: 1px solid rgba(255,255,255,0.25);
      color: #fff;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .promo-hero-details {
      border-radius: 32px;
      padding: 28px;
      background: linear-gradient(135deg, #081425, #112b60);
      color: #f5f7ff;
      display: grid;
      grid-template-columns: 140px minmax(0, 1fr);
      gap: 24px;
      align-items: center;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08);
    }

    @media (max-width: 640px) {
      .promo-hero-details {
        grid-template-columns: 1fr;
        text-align: center;
      }
    }

    .promo-logo-ring {
      width: 130px;
      height: 130px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2), transparent 70%);
      border: 2px solid rgba(255,255,255,0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
    }

    .promo-logo-ring img {
      width: 80px;
      height: 80px;
      object-fit: contain;
    }

    .promo-hero-eyebrow {
      text-transform: uppercase;
      letter-spacing: 0.34em;
      font-size: 11px;
      color: rgba(255,255,255,0.75);
      margin: 0 0 6px;
    }

    .promo-hero-details h3 {
      margin: 0;
      font-size: 28px;
      letter-spacing: -0.01em;
    }

    .promo-hero-details p {
      margin: 8px 0 16px;
      color: rgba(255,255,255,0.85);
      line-height: 1.5;
    }

    .promo-legal {
      margin-top: 10px;
      font-size: 12px;
      line-height: 1.4;
      color: rgba(255,255,255,0.7);
    }

    .promo-hero-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 16px;
    }

    .promo-stat-label {
      display: block;
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.6);
      margin-bottom: 6px;
    }

    .promo-thumb-heading {
      font-size: 13px;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: #5a6c9a;
    }

    .promo-thumb-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 18px;
    }

    .promo-thumb {
      border-radius: 16px;
      border: 1px solid rgba(9, 30, 66, 0.15);
      background: #ffffff;
      box-shadow: 0 10px 24px rgba(9, 30, 66, 0.1);
      text-align: left;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      display: grid;
      grid-template-rows: 140px auto;
    }

    .promo-thumb-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      background: #eef2f9;
    }

    .promo-thumb-content {
      padding: 12px 14px 14px;
    }

    .promo-thumb::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(0, 41, 94, 0.08), rgba(26, 122, 171, 0.18));
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .promo-thumb span {
      display: block;
      font-size: 11px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: #7383b7;
      margin-bottom: 4px;
    }

    .promo-thumb strong {
      display: block;
      font-size: 16px;
      color: #0c1a3d;
      position: relative;
      z-index: 1;
    }

    .promo-thumb small {
      display: block;
      font-size: 12px;
      color: #536083;
      margin-top: 4px;
      position: relative;
      z-index: 1;
    }

    .promo-thumb.active,
    .promo-thumb:hover {
      border-color: rgba(0, 122, 193, 0.4);
      transform: translateY(-4px);
      box-shadow: 0 18px 36px rgba(9, 30, 66, 0.25);
    }

    .promo-thumb.active::after,
    .promo-thumb:hover::after {
      opacity: 1;
    }


    .incentive-chart-marker {
      position: absolute;
      left: 24px;
      right: 24px;
      border-top: 3px solid rgba(255,255,255,0.95);
      box-shadow: 0 -2px 12px rgba(255,255,255,0.55);
      display: flex;
      justify-content: flex-end;
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.95);
      padding-top: 4px;
      pointer-events: none;
    }

    .incentive-chart-marker span {
      background: rgba(255,255,255,0.12);
      padding: 4px 8px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 11px;
    }

    .incentive-chart-baseline {
      position: absolute;
      left: 24px;
      right: 24px;
      border-top: 2px dashed rgba(255,255,255,0.45);
      display: flex;
      justify-content: flex-end;
      font-size: 11px;
      letter-spacing: 0.08em;
      color: rgba(255,255,255,0.65);
      padding-top: 2px;
      pointer-events: none;
    }

    .incentive-chart-baseline span {
      background: rgba(255,255,255,0.08);
      padding: 3px 6px;
      border-radius: 999px;
    }


    .cruises-logos,
    .flights-logos {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      justify-items: center;
    }

    .cruises-logos {
      gap: 18px 20px;
      margin-top: 6px;
      grid-auto-rows: minmax(72px, auto);
    }

    .flights-logos {
      gap: 12px 16px;
      margin-top: 10px;
    }

    .cruises-logos img {
      height: 64px;
      width: auto;
      max-width: 140px;
      object-fit: contain;
      display: block;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .flights-logos img {
      max-width: 145px;
      max-height: 65px;
      object-fit: contain;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .cruises-logos img:hover,
    .flights-logos img:hover {
      transform: scale(1.06);
      box-shadow: 0 12px 26px rgba(0,0,0,0.22);
    }

    /* ICONOS: mundito, barco, avión */

    .columns-header div:nth-child(2)::before {
      content: "🌍";
      display: inline-block;
      margin-right: 6px;
      font-size: 1.05em;
      animation: floatIcon 4s ease-in-out infinite;
    }

    .cruises-label::before {
      content: "🚢";
      display: inline-block;
      margin-right: 6px;
      animation: floatIcon 3.5s ease-in-out infinite;
    }

    .flights-label::before {
      content: "✈️";
      display: inline-block;
      margin-right: 6px;
      animation: flyIcon 5s ease-in-out infinite;
    }

    @keyframes floatIcon {
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-3px); }
      100% { transform: translateY(0); }
    }

    @keyframes flyIcon {
      0%   { transform: translate(0,0); }
      50%  { transform: translate(4px,-4px); }
      100% { transform: translate(0,0); }
    }

    /* ---------- BREAKPOINTS GRANDES (LAPTOP / IPAD) ---------- */

    @media (max-width: 1200px) {
      .page {
        padding: 16px;
        margin: 12px;
      }
      .columns {
        column-gap: 18px;
      }
    }

    /* ---------- TABLET / IPAD VERTICAL Y PANTALLAS MEDIAS ---------- */

    @media (max-width: 1024px) {
      .page {
        border-radius: 20px;
        box-shadow: 0 12px 40px rgba(0,0,0,0.14);
      }
      .columns {
        grid-template-columns: repeat(2, 1fr);
        row-gap: 16px;
      }
      .col:nth-child(2)::before,
      .col:nth-child(2)::after {
        display: none;
      }
      .first-layout {
        grid-template-columns: 1fr 1fr;
      }
      .logo-stack img {
        max-width: 160px;
      }
    }

    /* ---------- CELULARES / IPAD MINI VERTICAL ---------- */

    @media (max-width: 900px) {
      body {
        align-items: stretch;
      }
      .page {
        padding: 12px;
        margin: 8px;
        border-radius: 12px;
        box-shadow: 0 8px 26px rgba(0,0,0,0.16);
      }
      .columns-header {
        grid-template-columns: 1fr;
        gap: 4px;
      }
      .columns {
        grid-template-columns: 1fr;
        column-gap: 12px;
        row-gap: 12px;
      }
      .first-layout {
        grid-template-columns: 1fr;
        row-gap: 10px;
      }
      .logo-stack {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
      }
      .logo-stack img {
        max-width: 130px;
        max-height: 60px;
      }
      .benefits {
        font-size: 16px;
      }
      .logo-grid img,
      .cruises-logos img,
      .flights-logos img {
        max-width: 120px;
        max-height: 70px;
      }
      .modal {
        width: 96vw;
        padding: 12px;
        border-radius: 16px;
      }
      .modal-header h2 {
        font-size: 17px;
      }
      .modal-description {
        font-size: 12px;
      }
    }

    @media (max-width: 768px) {
      .home-card {
        padding: 28px 20px;
        gap: 28px;
        border-radius: 20px;
        grid-template-columns: 1fr;
        max-height: calc(100vh - 100px);
      }

      .home-hero h1 {
        font-size: 28px;
      }

      .home-hero span {
        font-size: 12px;
      }
    }

    @media (max-width: 600px) {
      .page {
        border-radius: 0;
        margin: 0;
        min-height: 100vh;
      }

      .toast-container {
        right: 12px;
        left: 12px;
        top: 60px;
      }

      .toast {
        min-width: auto;
        max-width: 100%;
        padding: 12px 16px;
        font-size: 13px;
      }

      .home-card {
        padding: 20px 16px;
        gap: 20px;
        border-radius: 16px;
      }

      .home-hero h1 {
        font-size: 22px;
      }

      .home-hero img {
        max-width: 160px;
      }

      .primary-btn {
        padding: 14px 20px;
        font-size: 13px;
        width: 100%;
      }

      .app-actions {
        gap: 6px;
      }
    }

    /* ------------------ MODALES INTERACTIVOS ------------------ */

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(10, 20, 40, 0.65);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
      backdrop-filter: blur(10px) saturate(150%);
      -webkit-backdrop-filter: blur(10px) saturate(150%);
      transition: backdrop-filter 0.3s ease;
    }

    .modal-overlay.active {
      display: flex;
      animation: overlayFadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes overlayFadeIn {
      from {
        opacity: 0;
        backdrop-filter: blur(0px);
      }
      to {
        opacity: 1;
        backdrop-filter: blur(10px) saturate(150%);
      }
    }

    .modal {
      width: min(1200px, 95vw);
      max-height: calc(100vh - 40px);
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(40px) saturate(180%);
      -webkit-backdrop-filter: blur(40px) saturate(180%);
      border-radius: 28px;
      border: 1px solid rgba(255, 255, 255, 0.5);
      box-shadow: 
        0 32px 64px rgba(10, 26, 53, 0.2), 
        0 16px 32px rgba(10, 26, 53, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.9);
      padding: 24px 28px 28px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      animation: modalIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      transform-origin: center center;
    }

    @media (max-width: 768px) {
      .modal {
        width: 100vw;
        max-height: 100vh;
        border-radius: 0;
        padding: 20px 16px;
      }
      .modal-header h2 {
        font-size: 18px;
      }
    }

    @keyframes modalIn {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @media (max-width: 768px) {
      .modal {
        width: 100vw;
        max-height: 100vh;
        border-radius: 0;
        padding: 20px 16px;
      }
      .modal-header h2 {
        font-size: 18px;
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      gap: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(16, 38, 73, 0.08);
    }

    .modal-header h2 {
      font-size: 22px;
      font-weight: 700;
      margin: 0;
      color: #0a1a35;
      letter-spacing: -0.01em;
    }

    .modal-close {
      border: none;
      background: rgba(16, 38, 73, 0.06);
      border-radius: 999px;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      color: #475569;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .modal-close:hover {
      background: rgba(16, 38, 73, 0.1);
      color: #0a1a35;
      transform: scale(1.05);
    }

    .modal-close:active {
      transform: scale(0.95);
    }

    .modal-body {
      display: flex;
      flex-direction: column;
      gap: 12px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .modal-media {
      width: 100%;
      border-radius: 18px;
      overflow: hidden;
      background: #000;
    }

    .modal-media video {
      width: 100%;
      height: auto;
      max-height: calc(80vh);
      display: block;
      object-fit: cover;
    }

    .modal-media iframe {
      width: 100%;
      height: auto;
      max-height: calc(70vh);
      display: block;
      border: 0;
    }

    .modal-video-fallback {
      margin-top: 10px;
      text-align: center;
    }

    .modal-video-fallback a {
      display: inline-block;
      background: #ff0000;
      color: #fff;
      padding: 8px 14px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
    }

    .modal-video-fallback a:hover {
      background: #e20000;
    }

    .video-wrapper {
      position: relative;
      width: 100%;
      padding-top: 56.25%;
      background: #000;
      border-radius: 12px;
      overflow: hidden;
    }

    .video-wrapper iframe,
    .video-wrapper video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: block;
      border: 0;
    }

    .modal-gallery {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .modal-gallery img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 12px;
      cursor: pointer;
    }

    .modal-description {
      font-size: 13px;
      color: #4b5875;
      line-height: 1.5;
    }

    /* Galería overlay */
    #gallery-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(10, 20, 40, 0.85);
      z-index: 2000;
    }

    #gallery-overlay.active {
      display: flex;
    }

    #gallery-overlay .gallery-img {
      max-width: 92vw;
      max-height: 86vh;
      object-fit: contain;
      border-radius: 10px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.6);
    }

    #gallery-overlay .gallery-video {
      max-width: 92vw;
      max-height: 86vh;
      border-radius: 10px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.6);
      background: #000;
    }

    #gallery-overlay.large .gallery-img {
      max-width: 98vw;
      max-height: 94vh;
    }

    #gallery-overlay .gallery-caption {
      position: absolute;
      bottom: 26px;
      left: 50%;
      transform: translateX(-50%);
      color: #ffffff;
      font-size: 14px;
      background: rgba(0,0,0,0.45);
      padding: 8px 12px;
      border-radius: 8px;
      max-width: 88vw;
      text-align: center;
      line-height: 1.3;
    }

    #gallery-overlay.large .gallery-caption {
      max-width: 96vw;
      font-size: 15px;
      padding: 10px 14px;
    }

    #gallery-overlay .gallery-close,
    #gallery-overlay .gallery-prev,
    #gallery-overlay .gallery-next {
      position: absolute;
      background: rgba(255,255,255,0.06);
      border: none;
      color: #fff;
      font-size: 36px;
      width: 56px;
      height: 56px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.15s ease;
      backdrop-filter: blur(4px);
    }

    #gallery-overlay .gallery-close { top: 20px; right: 22px; }
    #gallery-overlay .gallery-prev  { left: 20px; }
    #gallery-overlay .gallery-next  { right: 20px; }

    #gallery-overlay .gallery-prev,
    #gallery-overlay .gallery-next {
      top: 50%;
      transform: translateY(-50%);
      width: 64px;
      height: 64px;
      font-size: 42px;
    }

    #gallery-overlay .gallery-close:hover,
    #gallery-overlay .gallery-prev:hover,
    #gallery-overlay .gallery-next:hover {
      background: rgba(255,255,255,0.12);
    }

      /* Loading state for price checker */
      .pc-section.loading {
        opacity: 0.6;
        pointer-events: none;
      }
  </style>

    <!-- Backend Integration Script -->
  <!-- Backend URL config (set after deploying backend) -->
  <!-- Replace the placeholder URL with your Render/Railway backend URL -->
  <script>
    // Production backend URL
    // Render suspendido: usar Netlify Functions como fallback
    // Same-origin backend (frontend served by Railway)
    window.UVC_BACKEND_URL = '';
  </script></head>

<body>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <div class="page">
    
    <!-- App Header - Barra superior tipo app nativa -->
    <header class="app-header">
      <div class="app-logo-container">
        <!-- Logo removido para maximizar espacio -->
      </div>
      
      <div class="app-actions">
        <div class="utility-bar" aria-label="Utility controls">
          <button class="utility-tab" id="utility-menu-toggle" type="button" aria-expanded="false">
            <span data-i18n="utility.toggle">Herramientas</span>
            <span aria-hidden="true">▾</span>
          </button>
          <div class="utility-menu" id="utility-menu">
            <div class="utility-menu-title" data-i18n="utility.menuTitle">Control Center</div>
            <button class="utility-action" id="price-checker-toggle" type="button" data-i18n="utility.priceChecker">Checker Price</button>
            <button class="utility-action" data-sim-open="retail" type="button" data-i18n="utility.simulators">Simuladores</button>
          </div>
        </div>
        <button class="home-btn" id="home-btn" type="button" title="Ir al inicio" aria-label="Ir al inicio">Home</button>
        
        <button class="fullscreen-btn" id="fullscreen-btn" type="button" title="Pantalla completa" aria-label="Activar pantalla completa">
          <span id="fullscreen-icon">⛶</span>
        </button>
      </div>
    </header>

    <!-- App Content - Contenido principal -->
    <div class="app-content">

    <button class="close-pitch-btn" id="close-pitch-btn" type="button" title="Cerrar presentación" aria-label="Cerrar presentación">&times;</button>

    <div class="price-checker-panel" id="price-checker-panel" aria-live="polite">
      <div class="pc-header">
        <div>
          <div class="pc-title" data-i18n="priceChecker.title">Live Price Checker</div>
        </div>
          <div class="pc-header-actions">
            <button class="pc-refresh" id="pc-refresh-btn" type="button" aria-label="Refresh prices" title="Actualizar precios">
              <span class="pc-refresh-icon">↻</span>
              <span data-i18n="priceChecker.refresh">Actualizar</span>
            </button>
            <button class="pc-refresh" id="pc-cache-refresh-btn" type="button" aria-label="Refresh cache" title="Recargar cache estático">
              <span class="pc-refresh-icon">⚡</span>
              <span>Cache</span>
            </button>
            <button class="pc-close" type="button" aria-label="Close price checker">&times;</button>
          </div>
      </div>

      <div class="pc-section" data-property-index="0">
        <div class="pc-section-head">
          <div>
            <div class="pc-section-title" data-destination-target data-property-index="0">Secrets Puerto Los Cabos</div>
            <div class="pc-section-meta" data-savings-target="0">&nbsp;</div>
          </div>
          <div class="pc-section-uvc" data-uvc-summary="0">$0</div>
        </div>
        <div class="pc-row" data-brand="expedia">
          <div class="pc-row-logo"><img src="expedia-logo.svg" alt="Expedia" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="expedia" data-property-index="0">$0</div>
        </div>
        <div class="pc-row" data-brand="booking">
          <div class="pc-row-logo"><img src="booking-logo.svg" alt="Booking.com" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="booking" data-property-index="0">$0</div>
        </div>
        <div class="pc-row" data-brand="despegar">
          <div class="pc-row-logo"><img src="despegar-logo.svg" alt="Despegar" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="despegar" data-property-index="0">$0</div>
        </div>
        
        <div class="pc-row highlight" data-brand="uvc">
          <div class="pc-row-logo"><img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.memberRate">Member Rate</div>
          <div class="pc-price" data-price-target="uvc" data-property-index="0">$0</div>
        </div>
      </div>

      <div class="pc-section" data-property-index="1">
        <div class="pc-section-head">
          <div>
            <div class="pc-section-title" data-destination-target data-property-index="1">Zoëtry Los Cabos</div>
            <div class="pc-section-meta" data-savings-target="1">&nbsp;</div>
          </div>
          <div class="pc-section-uvc" data-uvc-summary="1">$0</div>
        </div>
        <div class="pc-row" data-brand="expedia">
          <div class="pc-row-logo"><img src="expedia-logo.svg" alt="Expedia" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="expedia" data-property-index="1">$0</div>
        </div>
        <div class="pc-row" data-brand="booking">
          <div class="pc-row-logo"><img src="booking-logo.svg" alt="Booking.com" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="booking" data-property-index="1">$0</div>
        </div>
        <div class="pc-row" data-brand="despegar">
          <div class="pc-row-logo"><img src="despegar-logo.svg" alt="Despegar" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.publicRate">Public Rate</div>
          <div class="pc-price" data-price-target="despegar" data-property-index="1">$0</div>
        </div>
        
        <div class="pc-row highlight" data-brand="uvc">
          <div class="pc-row-logo"><img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" /></div>
          <div class="pc-tag" data-i18n="priceChecker.memberRate">Member Rate</div>
          <div class="pc-price" data-price-target="uvc" data-property-index="1">$0</div>
        </div>
      </div>

      <div class="pc-note" id="price-checker-note">Ahorro máximo con UVC. <span id="pc-live-indicator" style="display:inline-block;width:8px;height:8px;border-radius:50%;background:#35c46f;margin-left:6px;box-shadow:0 0 0 0 rgba(53,196,111,0.7);animation:pulse 1.5s infinite;"></span></div>

      <style>
        @keyframes pulse {
          0% { box-shadow:0 0 0 0 rgba(53,196,111,0.7); }
          70% { box-shadow:0 0 0 8px rgba(53,196,111,0); }
          100% { box-shadow:0 0 0 0 rgba(53,196,111,0); }
        }
      </style>
    </div>

    <!-- HEADER SUPERIOR: SOLO LOGO -->
    <div class="top">
      <div class="uvc-box">
        <a href="https://www.unlimitedvacationclub.com/en/" target="_blank" rel="noopener noreferrer" aria-label="Unlimited Vacation Club website">
          <img class="uvc-logo" src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" />
        </a>
        <div class="uvc-subtitle">Members Benefits</div>
      </div>
    </div>

    <!-- 3 COLUMNAS PRINCIPALES -->
    <div class="columns">

      <!-- COLUMNA 1: ALL INCLUSIVE RESORTS -->
      <div class="col">
        <div class="col-inner">
          <button class="col-title col-title-button uvc-title" type="button" data-modal="promotions" aria-label="Unlimited Vacation Club">
            <span class="uvc-title-ring">
              <img src="UVC-Logo-Standalone-Gray.webp" alt="" loading="lazy" />
            </span>
            <span class="sr-only" data-i18n="col1.title">Unlimited Vacation Club</span>
          </button>

          <div class="first-layout">
            <div class="logo-stack">
              <img class="brand-logo" data-modal="zoetry" src="zoetrylogo(og).png" alt="Zoetry" loading="lazy" />
              <img class="brand-logo" data-modal="secrets" src="secrets3.png" alt="Secrets" loading="lazy" />
              <img class="brand-logo" data-modal="breathless" src="breathless logo (og).png" alt="Breathless" loading="lazy" />
              <img class="brand-logo" data-modal="dreams" src="dreams(og).png" alt="Dreams" loading="lazy" />
              <img class="brand-logo" data-modal="vivid" src="hyat vivid3.png" alt="Hyatt Vivid" loading="lazy" />
              <img class="brand-logo" data-modal="alua" src="alua3.png" alt="Alua" loading="lazy" />
            </div>

            <ul class="benefits" id="benefits-list">
              <li data-i18n="col1.benefit1">
                <a href="https://www.hyatt.com/es-ES/explore-hotels/map" target="_blank" rel="noopener noreferrer" class="benefit-link">+125 Resorts.</a>
              </li>
              <li data-i18n="col1.benefit2">25% Best Price Guaranteed.</li>
              <li data-i18n="col1.benefit3">Free Upgrade.</li>
              <li data-i18n="col1.benefit4">185 usd.</li>
              <li data-i18n="col1.benefit5">Concierge Service.</li>
              <li data-i18n="col1.benefit6">25 USD Extra Reservation.</li>
            </ul>
          </div>

          <div class="divider"></div>

          <div class="allinclusive-notes" data-i18n="col1.notes">
            20 Rooms · $1000 = 5000 points · Minimum 2 nights · 72 hrs · Best price
          </div>
        </div>
      </div>

      <!-- COLUMNA 2: WORLDWIDE -->
      <div class="col">
        <div class="col-inner worldwide-inner">
          <div class="col-title worldwide-title">
            <span class="worldwide-ring">
              <span class="worldwide-icon" aria-hidden="true">
                <svg viewBox="0 0 60 60" role="presentation">
                  <circle cx="30" cy="30" r="24"></circle>
                  <path d="M30 6c8 6 12 16 12 24s-4 18-12 24"></path>
                  <path d="M30 6c-8 6-12 16-12 24s4 18 12 24"></path>
                  <path d="M6 30h48"></path>
                  <path d="M12 18c12 8 24 8 36 0"></path>
                  <path d="M12 42c12-8 24-8 36 0"></path>
                </svg>
              </span>
              <span class="worldwide-wordmark" data-i18n="col2.title">Worldwide Exchange</span>
            </span>
          </div>

          <ul class="center-list">
            <li data-i18n="col2.list1">4500+ Resorts</li>
            <li data-i18n="col2.list2">100+ Countries</li>
          </ul>

          <div class="divider"></div>

          <div class="logo-grid">
            <img src="st-regis-2-logo-png-transparent.png" alt="St. Regis" loading="lazy" />
            <img src="fairmont(og).png" alt="Fairmont" loading="lazy" />
            <img src="fourseason(og).png" alt="Four Seasons" loading="lazy" />
            <img src="Hilton(og).png" alt="Hilton" loading="lazy" />
            <img src="sheraton.png" alt="Sheraton" loading="lazy" />
            <img src="Marriot(og).png" alt="Marriott" loading="lazy" />
            <img src="wyndham-1-logo-png-transparent.png" alt="Wyndham" loading="lazy" />
            <img src="starwood5.png" alt="Starwood Hotels & Resorts" loading="lazy" />
            <img src="ritzcarton(og).png" alt="Ritz-Carlton" loading="lazy" />
          </div>

          <div class="hyatt-row">
            <img class="hyatt-logo brand-logo" data-modal="hyatt" src="World_of_Hyatt_(Square).svg" alt="World of Hyatt" loading="lazy" />
            <div class="hyatt-text">
              <div data-i18n="col2.hyatt1">1200 Hotels</div>
              <div data-i18n="col2.hyatt2">72 Countries</div>
            </div>
          </div>

          <div class="worldwide-notes">
            <p data-i18n="col2.notes">599 fixed price · 2 bedrooms · 6 people · 7N/8D · 2 years free – Worldwide [109 USD]</p>
          </div>
        </div>
      </div>

      <!-- COLUMNA 3: U EXPERIENCE -->
      <div class="col">
        <div class="col-inner">
          <button class="col-title col-title-link" data-modal="uexperience" type="button" aria-label="UExperience">
            <span class="uexperience-banner">
              <img src="logo u experience modificado.png" alt="UExperience" class="uex-logo" />
            </span>
          </button>

          <div class="section-label cruises-label" data-i18n="col3.cruisesLabel">Cruises Rewards</div>
          <div class="cruises-logos">
            <img src="Carnival-Cruise-Line-logo.png" alt="Carnival" loading="lazy" />
            <img src="Royal-Cribbean-logo.png" alt="Royal Caribbean" loading="lazy" />
            <img src="Crystalcruise(og).png" alt="Crystal Cruises" loading="lazy" />
            <img src="Cunard(og).png" alt="Cunard" loading="lazy" />
            <img src="princess cruise.png" alt="Princess" loading="lazy" />
            <img src="viking(og).png" alt="Viking" loading="lazy" />
            <img src="disney cruise(og).png" alt="Disney Cruise Line" loading="lazy" />
            <img src="xcruises(Og).png" alt="Celebrity Cruises" loading="lazy" />
          </div>

          <div class="divider"></div>

          <div class="section-label flights-label" data-i18n="col3.flightsLabel">Flights</div>
          <div class="flights-logos">
            <img src="American-Airlines-Logo nyevi.png" alt="American Airlines" loading="lazy" />
            <img src="delta (og).png" alt="Delta" loading="lazy" />
            <img src="united(og).png" alt="United" loading="lazy" />
            <img src="alaska(og).png" alt="Alaska" loading="lazy" />
            <img src="jetblue(og).png" alt="JetBlue" loading="lazy" />
            <img src="southwest(og).png" alt="Southwest" loading="lazy" />
          </div>

          <div class="note" data-i18n="col3.note">
            3500 / 3000 / 1000 · 2 years free – Travel Agency · 5000 USD · 18 Months · Travel Agency [399 USD]
          </div>
        </div>
      </div>

    </div> <!-- /columns -->

    <div class="simulator-panel" id="simulator-panel">
      <div class="simulator-head">
        <img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" loading="lazy" />
        <div>
          <h3 data-i18n="sim.labTitle">UVC Sales Lab</h3>
          <span data-i18n="sim.labSubtitle">Simuladores corporativos</span>
        </div>
      </div>
      <div class="simulator-tabs">
        <button class="sim-tab active" data-sim-tab="retail" data-i18n="sim.tabs.retail">ROI Retail vs Membresía</button>
        <button class="sim-tab" data-sim-tab="incentives" data-i18n="sim.tabs.incentives">ROI Incentivos</button>
        <button class="sim-tab" data-sim-tab="calc" data-i18n="sim.tabs.calc">Calculadora</button>
      </div>
      <div class="simulator-view active" data-sim-view="retail">
        <section class="breakeven-section" id="breakeven-calculator" aria-labelledby="breakeven-title">
      <div class="breakeven-card">
        <div class="breakeven-header">
          <div class="breakeven-headline">
            <h2 id="breakeven-title" data-i18n="breakeven.title">Calculadora de punto de equilibrio</h2>
            <p data-i18n="breakeven.subtitle">Ajusta los precios reales para mostrar en cuántos viajes se paga la membresía.</p>
          </div>
        </div>
        <div class="breakeven-grid">
          <form class="breakeven-form" id="breakeven-form">
            <div class="breakeven-form-group">
              <h4 data-i18n="breakeven.groupVolume">Membresía y volumen</h4>
              <label for="breakeven-membership">
                <span data-i18n="breakeven.membershipCost">Costo de la membresía (USD)</span>
                <input type="number" id="breakeven-membership" min="0" step="100" value="6500" inputmode="decimal" />
              </label>
              <label for="breakeven-trips">
                <span data-i18n="breakeven.tripsPerYear">Viajes por año</span>
                <input type="number" id="breakeven-trips" min="1" step="1" value="2" inputmode="numeric" />
              </label>
              <label for="breakeven-years">
                <span data-i18n="breakeven.years">Años a proyectar</span>
                <input type="number" id="breakeven-years" min="1" max="15" step="1" value="5" inputmode="numeric" />
              </label>
            </div>
            <div class="breakeven-form-group">
              <h4 data-i18n="breakeven.groupTrip">Grupo y noches</h4>
              <label for="breakeven-nights">
                <span data-i18n="breakeven.nights">Noches por viaje</span>
                <input type="number" id="breakeven-nights" min="1" step="1" value="5" inputmode="numeric" />
              </label>
              <label for="breakeven-travelers">
                <span data-i18n="breakeven.travelers">Personas / suite</span>
                <input type="number" id="breakeven-travelers" min="1" step="1" value="4" inputmode="numeric" />
              </label>
            </div>
            <div class="breakeven-form-group">
              <h4 data-i18n="breakeven.groupRates">Tarifa por persona / noche</h4>
              <label for="breakeven-retail-night">
                <span data-i18n="breakeven.retailNight">Retail (USD)</span>
                <input type="number" id="breakeven-retail-night" min="0" step="10" value="500" inputmode="decimal" />
              </label>
              <label for="breakeven-member-night">
                <span data-i18n="breakeven.memberNight">UVC (USD)</span>
                <input type="number" id="breakeven-member-night" min="0" step="10" value="250" inputmode="decimal" />
              </label>
            </div>
            <div class="breakeven-form-group">
              <h4 data-i18n="breakeven.groupExtras">Gastos extra (spa / actividades)</h4>
              <label for="breakeven-extra-retail">
                <span data-i18n="breakeven.extraRetail">Gasto estimado retail (por viaje)</span>
                <input type="number" id="breakeven-extra-retail" min="0" step="10" value="400" inputmode="decimal" />
              </label>
              <label for="breakeven-extra-discount">
                <span data-i18n="breakeven.extraDiscount">Descuento UVC en extras (%)</span>
                <input type="number" id="breakeven-extra-discount" min="0" max="100" step="1" value="25" inputmode="decimal" />
              </label>
              <div class="breakeven-inline-note" data-i18n="breakeven.extraHint">Aplica el descuento de socio a spa, actividades, golf o transporte.</div>
            </div>
          </form>
          <div class="breakeven-results">
            <div class="breakeven-stats">
              <div>
                <span data-i18n="breakeven.tripRetail">Viaje retail</span>
                <strong id="breakeven-trip-retail">$0</strong>
              </div>
              <div>
                <span data-i18n="breakeven.tripMember">Viaje UVC</span>
                <strong id="breakeven-trip-member">$0</strong>
              </div>
              <div>
                <span data-i18n="breakeven.perTrip">Ahorro por viaje</span>
                <strong id="breakeven-trip-savings">$0</strong>
              </div>
              <div>
                <span data-i18n="breakeven.annualSavings">Ahorro anual</span>
                <strong id="breakeven-annual">$0</strong>
              </div>
              <div>
                <span data-i18n="breakeven.breakEven">Punto de equilibrio</span>
                <strong id="breakeven-breakpoint">--</strong>
              </div>
            </div>
            <div class="breakeven-visuals">
              <div class="breakeven-chart" aria-live="polite">
                <div class="breakeven-marker" id="breakeven-marker">
                  <span data-i18n="breakeven.membershipLabel">Costo membresía</span>
                </div>
                <div class="breakeven-bars" id="breakeven-bars"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      </section>
      </div>
      <div class="simulator-view" data-sim-view="incentives">
        <section class="incentive-section" id="incentive-calculator" aria-labelledby="incentive-title">
          <h3 id="incentive-title" data-i18n="incentives.title">Calculadora ROI de incentivos</h3>
          <p data-i18n="incentives.subtitle">Descubre cuánto valor adicional reciben tus clientes por cada bloque de $10,000 USD.</p>
          <div class="incentive-grid">
            <div class="incentive-form">
              <label for="incentive-investment">
                <span data-i18n="incentives.investment">Inversión del cliente (USD)</span>
                <input type="number" id="incentive-investment" min="0" step="100" value="10000" inputmode="decimal" />
              </label>
              <label for="incentive-nights-input">
                <span data-i18n="incentives.nights">Noches all inclusive</span>
                <input type="number" id="incentive-nights-input" min="0" step="1" value="7" inputmode="numeric" />
              </label>
              <label for="incentive-weeks-input">
                <span data-i18n="incentives.weeks">Semanas Hyatt</span>
                <input type="number" id="incentive-weeks-input" min="0" step="1" value="2" inputmode="numeric" />
              </label>
              <label for="incentive-credits-input">
                <span data-i18n="incentives.credits">Reward credits</span>
                <input type="number" id="incentive-credits-input" min="0" step="50" value="1000" inputmode="numeric" />
              </label>
            </div>
            <div class="incentive-results">
              <div class="card">
                <span data-i18n="incentives.nightsValue">Valor noches</span>
                <strong id="incentive-nights-value">$0</strong>
              </div>
              <div class="card">
                <span data-i18n="incentives.weeksValue">Valor Hyatt</span>
                <strong id="incentive-weeks-value">$0</strong>
              </div>
              <div class="card">
                <span data-i18n="incentives.creditsValue">Valor credits</span>
                <strong id="incentive-credits-value">$0</strong>
              </div>
              <div class="card">
                <span data-i18n="incentives.totalValue">Valor total</span>
                <strong id="incentive-value">$0</strong>
              </div>
              <div class="card">
                <span data-i18n="incentives.roi">ROI incentivos</span>
                <strong id="incentive-roi">0%</strong>
              </div>
            </div>
          </div>
          <div class="incentive-visuals">
            <div class="incentive-chart">
              <div class="incentive-chart-baseline" id="incentive-chart-baseline">
                <span id="incentive-chart-baseline-label">Inversión</span>
              </div>
              <div class="incentive-chart-marker" id="incentive-chart-marker">
                <span id="incentive-chart-marker-label">ROI</span>
              </div>
              <div class="incentive-chart-bars">
                <div class="incentive-bar" data-bar="investment">
                  <strong id="incentive-bar-investment">$0</strong>
                  <span data-i18n="incentives.investment">Inversión</span>
                </div>
                <div class="incentive-bar" data-bar="returned">
                  <strong id="incentive-bar-returned">$0</strong>
                  <span data-i18n="incentives.totalValue">Valor incentivos</span>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <div class="simulator-view" data-sim-view="calc">
        <section class="simple-calc" id="quickcalc-panel" aria-labelledby="calc-title">
          <h3 id="calc-title" data-i18n="calc.title">Calculadora</h3>
          <div class="quickcalc-display" id="quick-calc-display">0</div>
          <div class="quickcalc-buttons">
            <button type="button" class="quickcalc-btn light" data-quickcalc-action="clear">AC</button>
            <button type="button" class="quickcalc-btn light" data-quickcalc-action="delete">⌫</button>
            <button type="button" class="quickcalc-btn light operator" data-quickcalc-value="%">%</button>
            <button type="button" class="quickcalc-btn operator" data-quickcalc-value="÷">÷</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="7">7</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="8">8</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="9">9</button>
            <button type="button" class="quickcalc-btn operator" data-quickcalc-value="×">×</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="4">4</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="5">5</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="6">6</button>
            <button type="button" class="quickcalc-btn operator" data-quickcalc-value="-">-</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="1">1</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="2">2</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value="3">3</button>
            <button type="button" class="quickcalc-btn operator" data-quickcalc-value="+">+</button>
            <button type="button" class="quickcalc-btn wide" data-quickcalc-value="0">0</button>
            <button type="button" class="quickcalc-btn" data-quickcalc-value=".">.</button>
            <button type="button" class="quickcalc-btn equal" data-quickcalc-action="equals">=</button>
          </div>
          <div class="quickcalc-result" id="quick-calc-result">--</div>
          <small data-i18n="calc.hint">Usa + - × ÷ y paréntesis para cualquier presupuesto.</small>
        </section>
      </div>
    </div>

    </div> <!-- /app-content -->
  </div> <!-- /page -->

  <div class="home-screen active" id="home-screen">
    <div class="home-card">
      <div class="home-left">
        <div class="home-hero">
          <img src="UVC-Logo-Standalone-Gray.webp" alt="Unlimited Vacation Club" />
          <h1 data-i18n="home.title">3-Way Pitch Control Center</h1>
          <span data-i18n="home.subtitle">Unlimited Vacation Club</span>
        </div>
        <div class="start-panel start-ready">
          <p data-i18n="home.readyText">La presentación está lista. Presiona iniciar; los nombres del equipo se capturan al cerrar.</p>
        </div>
        <button class="primary-btn" id="start-demo-btn" type="button" data-i18n="home.start">Iniciar presentación</button>
      </div>
      <div class="home-config locked" id="home-config">
        <div class="config-head">
          <div>
            <h3 data-i18n="home.configTitle">Panel de administración</h3>
            <p data-i18n="home.configSubtitle">Ingresa el PIN para editar precios en vivo.</p>
          </div>
          <form class="pin-form" id="pin-form">
            <input type="password" id="pin-input" placeholder="PIN" autocomplete="off" inputmode="numeric" maxlength="7" />
            <button type="submit" data-i18n="home.unlock">Desbloquear</button>
          </form>
        </div>
        <div class="pin-status" id="pin-status" role="status"></div>
        <div class="config-locked-message">
          <div class="lock-icon">🔒</div>
          <p data-i18n="home.lockedMessage">Ingresa el PIN para revelar esta sección privada.</p>
        </div>
        <div class="config-body">
          <div class="admin-tabs">
            <button class="admin-tab-btn active" data-tab="prices" type="button">💰 Price Checker</button>
            <button class="admin-tab-btn" data-tab="financial" type="button">📊 Área Financiera</button>
            <button class="admin-tab-btn" data-tab="rankings" type="button">🏆 Rankings</button>
            <button class="admin-tab-btn" data-tab="settings" type="button">⚙️ Settings</button>
          </div>
          
            
            <!-- SECTION 1: Price Checker & Incentives Configuration -->
            <div class="admin-section active" data-section="prices">
              <h3>⚙️ Configuración de Precios e Incentivos</h3>
              <div class="config-properties">
                <div class="config-property" data-config-property="0">
                  <p class="config-property-title" data-config-title-target="0">Secrets Puerto Los Cabos</p>
                  <div class="config-grid">
                    <div class="config-field full">
                      <label for="config-destination-0" data-i18n="home.destinationLabel">Nombre del hotel</label>
                      <input id="config-destination-0" data-config-field="destination" data-property-index="0" type="text" value="Secrets Puerto Los Cabos" disabled />
                    </div>
                    <div class="config-field">
                      <label for="config-expedia-0" data-i18n="home.expediaLabel">Expedia (USD)</label>
                      <input id="config-expedia-0" data-config-field="price-expedia" data-property-index="0" type="number" min="0" step="1" value="920" disabled />
                    </div>
                    <div class="config-field">
                      <label for="config-booking-0" data-i18n="home.bookingLabel">Booking (USD)</label>
                      <input id="config-booking-0" data-config-field="price-booking" data-property-index="0" type="number" min="0" step="1" value="899" disabled />
                    </div>
                    <div class="config-field">
                      <label for="config-despegar-0" data-i18n="home.despegarLabel">Despegar (USD)</label>
                      <input id="config-despegar-0" data-config-field="price-despegar" data-property-index="0" type="number" min="0" step="1" value="940" disabled />
                    </div>
                    <div class="config-field">
                      <label for="config-discount-0" data-i18n="home.discountLabel">Descuento UVC %</label>
                      <input id="config-discount-0" data-config-field="discount" data-property-index="0" type="number" step="0.5" value="45" disabled />
                    </div>
                  </div>
                  <button class="config-save-btn" type="button" data-config-save="0" disabled data-i18n="home.saveProperty">Guardar precios</button>
                </div>
                <div class="config-property" data-config-property="1">
                  <p class="config-property-title" data-config-title-target="1">Zoëtry Los Cabos</p>
                  <div class="config-grid">
                    <div class="config-field full">
                      <label for="config-destination-1" data-i18n="home.destinationLabel">Nombre del hotel</label>
                      <input id="config-destination-1" data-config-field="destination" data-property-index="1" type="text" value="Zoëtry Los Cabos" disabled />
                    </div>
                    <div class="config-field">
                      <label for="config-expedia-1" data-i18n="home.expediaLabel">Expedia (USD)</label>
                      <input id="config-expedia-1" data-config-field="price-expedia" data-property-index="1" type="number" min="0" step="1" value="1050" disabled />
                    </div>
                    <div class="config-field">
                      <label for="config-booking-1" data-i18n="home.bookingLabel">Booking (USD)</label>
                      <input id="config-booking-1" data-config-field="price-booking" data-property-index="1" type="number" min="0" step="1" value="1015" disabled />
                    </div>
                    <div class="config-field">
                      <label for="config-despegar-1" data-i18n="home.despegarLabel">Despegar (USD)</label>
                      <input id="config-despegar-1" data-config-field="price-despegar" data-property-index="1" type="number" min="0" step="1" value="1089" disabled />
                    </div>
                    <div class="config-field">
                      <label for="config-discount-1" data-i18n="home.discountLabel">Descuento UVC %</label>
                      <input id="config-discount-1" data-config-field="discount" data-property-index="1" type="number" step="0.5" value="48" disabled />
                    </div>
                  </div>
                  <button class="config-save-btn" type="button" data-config-save="1" disabled data-i18n="home.saveProperty">Guardar precios</button>
                </div>
              </div>
              <div class="config-field" style="margin-top: 24px;">
                <label data-i18n="home.incentiveTitle">Costos manuales de incentivos</label>
                <div class="config-grid">
                  <div class="config-field">
                    <label for="config-incentive-ai" data-i18n="home.incentiveAiLabel">Valor noche all inclusive (USD)</label>
                    <input id="config-incentive-ai" data-config-field="incentive-ai" type="number" step="1" min="0" placeholder="Auto" disabled />
                  </div>
                  <div class="config-field">
                    <label for="config-incentive-hyatt" data-i18n="home.incentiveHyattLabel">Valor semana Hyatt (USD)</label>
                    <input id="config-incentive-hyatt" data-config-field="incentive-hyatt" type="number" step="1" min="0" value="2000" disabled />
                  </div>
                  <div class="config-field">
                    <label for="config-incentive-credits" data-i18n="home.incentiveCreditsLabel">Valor por reward credit (USD)</label>
                    <input id="config-incentive-credits" data-config-field="incentive-credits" type="number" step="0.5" min="0" value="1" disabled />
                  </div>
                </div>
                <small data-i18n="home.incentiveHint">Deja vacío el valor de noche para usar el precio público del Price Checker.</small>
              </div>
            </div>

            <!-- SECTION 2: Financial Metrics & Projections -->
            <div class="admin-section" data-section="financial">
              <h3>📊 Métricas Financieras y Proyecciones</h3>
              <div class="analytics-grid">
                <div class="metric-card">
                  <span data-i18n="analytics.avgSale">Promedio de ventas</span>
                  <strong id="metric-avg-sale">--</strong>
                  <small data-i18n="analytics.avgSaleHint">Promedio por venta cerrada</small>
                </div>
                <div class="metric-card">
                  <span data-i18n="analytics.conversion">Porcentaje de cierre</span>
                  <strong id="metric-conversion">0%</strong>
                  <small data-i18n="analytics.conversionHint">Tasa de éxito</small>
                </div>
                <div class="metric-card">
                  <span data-i18n="analytics.totalVolume">Volumen total</span>
                  <strong id="metric-total-volume">$0</strong>
                  <small data-i18n="analytics.totalVolumeHint">Ventas acumuladas</small>
                </div>
                <div class="metric-card">
                  <span data-i18n="analytics.clarityScore">Índice de claridad</span>
                  <strong id="metric-clarity">--</strong>
                  <small data-i18n="analytics.clarityHint">Satisfacción cliente</small>
                </div>
                <div class="metric-card">
                  <span>Total presentaciones</span>
                  <strong id="metric-total-pitches">0</strong>
                  <small>Intentos registrados</small>
                </div>
                <div class="metric-card">
                  <span>Mejor día</span>
                  <strong id="metric-best-day">--</strong>
                  <small>Mayor volumen en 24h</small>
                </div>
              </div>
              <div class="period-grid">
                <div class="period-card">
                  <span data-i18n="analytics.dayVolume">Volumen diario</span>
                  <strong data-volume="day">$0</strong>
                </div>
                <div class="period-card">
                  <span data-i18n="analytics.weekVolume">Volumen semanal</span>
                  <strong data-volume="week">$0</strong>
                </div>
                <div class="period-card">
                  <span data-i18n="analytics.biweekVolume">Volumen quincenal</span>
                  <strong data-volume="biweek">$0</strong>
                </div>
                <div class="period-card">
                  <span>Proyección mensual</span>
                  <strong id="metric-monthly-projection">$0</strong>
                </div>
              </div>
            </div>

            <!-- SECTION 3: Staff Rankings -->
            <div class="admin-section" data-section="rankings">
              <h3>🏆 Rankings de Liners y Closers</h3>
              <div class="ranking-grid">
                <div class="ranking-card">
                  <h4 data-i18n="analytics.linerRanking">Ranking Liners</h4>
                  <ul class="ranking-list" id="liner-ranking"></ul>
                </div>
                <div class="ranking-card">
                  <h4 data-i18n="analytics.closerRanking">Ranking Closers</h4>
                  <ul class="ranking-list" id="closer-ranking"></ul>
                </div>
                <div class="top-card">
                  <h4 data-i18n="analytics.topLiner">Top Liner</h4>
                  <div class="top-name" id="top-liner-name">--</div>
                  <div class="top-amount" id="top-liner-amount">$0</div>
                </div>
                <div class="top-card">
                  <h4 data-i18n="analytics.topCloser">Top Closer</h4>
                  <div class="top-name" id="top-closer-name">--</div>
                  <div class="top-amount" id="top-closer-amount">$0</div>
                </div>
                <div class="comparison-card">
                  <h4 data-i18n="analytics.teamCompare">Comparación Liners vs Closers</h4>
                  <div class="comparison-row">
                    <span data-i18n="analytics.linersLabel">Liners</span>
                    <div class="comparison-bar"><div class="comparison-fill" data-bar="liner"></div></div>
                    <strong data-bar-value="liner">$0</strong>
                  </div>
                  <div class="comparison-row">
                    <span data-i18n="analytics.closersLabel">Closers</span>
                    <div class="comparison-bar"><div class="comparison-fill" data-bar="closer"></div></div>
                    <strong data-bar-value="closer">$0</strong>
                  </div>
                </div>
              </div>
            </div>

            <!-- SECTION 4: Settings -->
            <div class="admin-section" data-section="settings">
              <h3>⚙️ Configuración General</h3>
              
              <div style="max-width: 600px;">
                <div style="background: #ffffff; border: 2px solid #d5dff0; border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                  <h4 style="margin: 0 0 16px 0; font-size: 18px; color: #0f2654; font-weight: 700;">🌐 Idioma / Language</h4>
                  <p style="margin: 0 0 16px 0; font-size: 14px; color: #5a678a;">Selecciona el idioma para la presentación</p>
                  <div class="lang-pill-group" style="justify-content: flex-start;">
                    <button class="lang-pill" data-lang="es" type="button">ES</button>
                    <button class="lang-pill" data-lang="en" type="button">EN</button>
                  </div>
                </div>

                <div style="background: #ffffff; border: 2px solid #d5dff0; border-radius: 16px; padding: 24px;">
                  <h4 style="margin: 0 0 16px 0; font-size: 18px; color: #0f2654; font-weight: 700;">📄 Datos</h4>
                  <p style="margin: 0 0 16px 0; font-size: 14px; color: #5a678a;">Administra la información almacenada</p>
                  <div class="sales-report">
                    <span data-i18n="sale.reportLabel">Download your sales summary.</span>
                    <button type="button" id="download-sales-report-settings" disabled data-i18n="sale.reportBtn">Descargar CSV</button>
                    <button type="button" id="reset-sales-btn-settings" class="reset-btn" data-i18n="analytics.resetBtn">Limpiar datos</button>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <button class="relock-btn" id="relock-btn" type="button" hidden data-i18n="home.lockPanel">Bloquear panel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Promotions -->
  <div class="modal-overlay" id="modal-promotions">
    <div class="modal promotions-modal">
      <div class="modal-header">
        <h2 data-i18n="promos.title">Promociones UVC</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body promotions-body">
        <p data-i18n="promos.subtitle">Selecciona una campaña para mostrar las fotos en formato grande.</p>
        <div class="promo-filters" role="tablist" aria-label="Promo filters">
          <button type="button" class="promo-filter-btn active" data-filter="all"><span data-i18n="promos.filterAll">Todas</span></button>
          <button type="button" class="promo-filter-btn" data-filter="breathless"><span data-i18n="promos.filterBreathless">Breathless</span></button>
          <button type="button" class="promo-filter-btn" data-filter="dreams"><span data-i18n="promos.filterDreams">Dreams</span></button>
          <button type="button" class="promo-filter-btn" data-filter="secrets"><span data-i18n="promos.filterSecrets">Secrets</span></button>
        </div>

        <div class="promo-hero">
          <div class="promo-hero-media">
            <img id="promo-hero-image" src="breathless 1.webp" alt="May the 4th Offer" loading="lazy" />
              <div class="promo-hero-price" id="promo-hero-price"></div>
              <div class="promo-hero-nav" id="promo-hero-nav" aria-hidden="true" style="display:none;">
                <button type="button" class="promo-hero-btn" id="promo-hero-prev" aria-label="Anterior">◀</button>
                <button type="button" class="promo-hero-btn" id="promo-hero-next" aria-label="Siguiente">▶</button>
              </div>
            <div class="promo-hero-tagbar">
              <span class="promo-pill" id="promo-hero-season">Special season</span>
              <span class="promo-pill" id="promo-hero-window">4 - 10 MAY</span>
            </div>
          </div>
          <div class="promo-hero-details">
            <div class="promo-logo-ring">
              <img src="logo uexperience.png" alt="UVC" loading="lazy" />
            </div>
            <div>
              <p class="promo-hero-eyebrow" data-i18n="promos.heroLabel">Live campaign</p>
              <h3 id="promo-hero-title">May the 4th</h3>
              <p id="promo-hero-description">Double upgrades and free nights on bookings made May 4-10.</p>
              <div class="promo-hero-stats">
                <div>
                  <span class="promo-stat-label" data-i18n="promos.marketLabel">Target market</span>
                  <strong id="promo-hero-market">US + LATAM Fans</strong>
                </div>
                <div>
                  <span class="promo-stat-label" data-i18n="promos.valueLabel">Key benefit</span>
                  <strong id="promo-hero-value">Upgrades & nights</strong>
                </div>
              </div>
              <p class="promo-legal" id="promo-hero-legal"></p>
            </div>
          </div>
        </div>

        <div>
          <div class="promo-thumb-heading" data-i18n="promos.timelineLabel">Choose the promotion you want to pitch</div>
          <div class="promo-thumb-grid">
            <button class="promo-thumb active" type="button"
              data-img="breathless 1.webp"
              data-alt="Oferta 4 de mayo todo incluido"
              data-brand="breathless dreams secrets"
              data-gallery="breathless 1.webp, breathless 4.webp"
              data-title="4 de Mayo — Todo Incluido"
              data-desc="Desde $75 USD por persona por noche en propiedades participantes."
              data-window="4 MAY"
              data-season="Fecha especial"
              data-market="US · LATAM"
              data-value="$75 p/p/noche AI"
              data-legal="Tarifa por persona por noche, en ocupación doble. Cupo limitado y sujeto a disponibilidad. Marcas participantes: Breathless, Dreams y Secrets. Válido el 4 de mayo. Aplican restricciones.">
              <img class="promo-thumb-img" src="breathless 1.webp" alt="4 de mayo - $75 AI" loading="lazy" />
              <div class="promo-thumb-content">
                <span>4 MAY</span>
                <strong>$75 USD p/p/noche</strong>
                <small>Todo incluido · Breathless · Dreams · Secrets</small>
              </div>
            </button>
            

            <button class="promo-thumb" type="button"
              data-img="breathless 4.webp"
              data-alt="Escena nocturna en Breathless con luces neón"
              data-brand="breathless"
              data-title="Black Friday"
              data-desc="Descuento adicional del 20% y certificados exclusivos para cerrar ese mismo día."
              data-window="Nov 24 - 27"
              data-season="Venta Anual"
              data-market="US · Canadá · LATAM"
              data-value="20% OFF + certificados">
              <img class="promo-thumb-img" src="breathless 4.webp" alt="Black Friday thumb" loading="lazy" />
              <div class="promo-thumb-content">
                <span>Nov</span>
                <strong>Black Friday</strong>
                <small>Oferta relámpago</small>
              </div>
            </button>

            <button class="promo-thumb" type="button"
              data-img="dreams 1.webp"
              data-alt="Familia disfrutando Dreams Resort"
              data-brand="dreams"
              data-title="Cyber Monday"
              data-desc="Créditos UVC extra y noches ilimitadas durante las primeras 72 horas de la semana."
              data-window="Nov 27 - 30"
              data-season="Venta Digital"
              data-market="Global Online"
              data-value="Créditos UVC extra">
              <img class="promo-thumb-img" src="dreams 1.webp" alt="Cyber Monday thumb" loading="lazy" />
              <div class="promo-thumb-content">
                <span>Nov</span>
                <strong>Cyber Monday</strong>
                <small>72 hrs digitales</small>
              </div>
            </button>

            <button class="promo-thumb" type="button"
              data-img="conde 1.jpg"
              data-alt="Promoción de verano frente al mar"
              data-brand="secrets"
              data-title="Forever Summer"
              data-desc="Experiencias de spa incluidas y upgrade de suite durante la temporada de verano."
              data-window="Jun - Ago"
              data-season="Verano"
              data-market="Resorts Caribe & Med"
              data-value="Spa + upgrade suite">
              <img class="promo-thumb-img" src="conde 1.jpg" alt="Forever Summer thumb" loading="lazy" />
              <div class="promo-thumb-content">
                <span>Verano</span>
                <strong>Forever Summer</strong>
                <small>Campaña anual</small>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="sale-overlay" id="sale-overlay" aria-live="polite">
    <div class="sale-card">
      <div class="sale-staff">
        <div class="sale-staff-grid">
          <div>
            <label data-i18n="sale.staffLiner" style="display: block; font-size: 14px; font-weight: 700; color: #0e2148; margin-bottom: 8px;">Assigned liner</label>
            <input type="text" id="sale-liner-input" data-session-field="liner" placeholder="Nombre del liner" autocomplete="off" required style="display: block !important; width: 100% !important; border: 3px solid #0f2f72 !important; border-radius: 12px; padding: 16px !important; font-size: 18px !important; background: #fff !important; color: #000 !important; min-height: 56px; box-sizing: border-box;" />
          </div>
          <div>
            <label data-i18n="sale.staffCloser" style="display: block; font-size: 14px; font-weight: 700; color: #0e2148; margin-bottom: 8px;">Assigned closer</label>
            <input type="text" id="sale-closer-input" data-session-field="closer" placeholder="Nombre del closer" autocomplete="off" required style="display: block !important; width: 100% !important; border: 3px solid #0f2f72 !important; border-radius: 12px; padding: 16px !important; font-size: 18px !important; background: #fff !important; color: #000 !important; min-height: 56px; box-sizing: border-box;" />
          </div>
        </div>
        <div class="sale-staff-hint" data-i18n="sale.staffHint" style="font-size: 13px; color: #5a6b8c; text-align: center; margin-top: 12px;">Escribe los nombres manualmente.</div>
        <div class="sale-staff-error" id="sale-staff-error"></div>
      </div>
      <div class="sale-choice" id="sale-choice">
        <h3 data-i18n="sale.promptTitle">Log this pitch</h3>
        <p data-i18n="sale.promptSubtitle">Did this presentation close a sale?</p>
        <div class="sale-choice-buttons">
          <button type="button" data-choice="win" data-i18n="sale.successBtn">Sale closed</button>
          <button type="button" data-choice="loss" data-i18n="sale.pendingBtn">Not this time</button>
        </div>
      </div>

      <form class="sale-form" id="sale-form-win">
        <div class="sale-field">
          <label for="sale-win-q1" data-i18n="sale.winQ1">What convinced the member the most?</label>
          <select id="sale-win-q1" required>
            <option value="price" data-i18n="sale.optionPrice">Best price</option>
            <option value="service" data-i18n="sale.optionService">Service & support</option>
            <option value="benefits" data-i18n="sale.optionBenefits">Member benefits</option>
            <option value="urgency" data-i18n="sale.optionUrgency">Limited-time incentives</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-win-q2" data-i18n="sale.winQ2">What content sealed the decision?</label>
          <select id="sale-win-q2" required>
            <option value="comparison" data-i18n="sale.optionComparison">Price comparison</option>
            <option value="gallery" data-i18n="sale.optionGallery">Gallery & videos</option>
            <option value="agency" data-i18n="sale.optionTravelAgency">Travel agency perks</option>
            <option value="other" data-i18n="sale.optionOther">Other</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-win-amount" data-i18n="sale.winAmount">Sale amount (USD)</label>
          <input type="number" id="sale-win-amount" min="0" step="1" required placeholder="950" />
        </div>
        <div class="sale-field">
          <label for="sale-win-notes" data-i18n="sale.notesLabel">Notes</label>
          <textarea id="sale-win-notes" placeholder="..." ></textarea>
        </div>
        <div class="sale-actions">
          <button type="button" class="sale-btn secondary" data-form-back="win" data-i18n="sale.backBtn">Back</button>
          <button type="submit" class="sale-btn primary" data-i18n="sale.saveBtn">Save</button>
        </div>
      </form>

      <form class="sale-form" id="sale-form-loss">
        <div class="sale-field">
          <label for="sale-loss-q1" data-i18n="sale.lossQ1">What did not meet expectations?</label>
          <select id="sale-loss-q1" required>
            <option value="price" data-i18n="sale.optionPrice">Price</option>
            <option value="quality" data-i18n="sale.optionQuality">Quality</option>
            <option value="service" data-i18n="sale.optionServiceOnly">Service</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-loss-q2" data-i18n="sale.lossQ2">Clarity of information</label>
          <select id="sale-loss-q2" required>
            <option value="1" data-i18n="sale.clarity1">1 · Very unclear</option>
            <option value="2" data-i18n="sale.clarity2">2 · Could be clearer</option>
            <option value="3" data-i18n="sale.clarity3">3 · Neutral</option>
            <option value="4" data-i18n="sale.clarity4">4 · Clear</option>
            <option value="5" data-i18n="sale.clarity5">5 · Extremely clear</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-loss-q3" data-i18n="sale.lossQ3">Which part should we improve?</label>
          <select id="sale-loss-q3" required>
            <option value="flow" data-i18n="sale.optionFlow">Presentation flow</option>
            <option value="professionalism" data-i18n="sale.optionProfessionalism">Staff professionalism</option>
            <option value="resorts" data-i18n="sale.optionResorts">Resort options</option>
            <option value="value" data-i18n="sale.optionValue">Overall value & benefits</option>
          </select>
        </div>
        <div class="sale-field">
          <label for="sale-loss-notes" data-i18n="sale.notesLabel">Notes</label>
          <textarea id="sale-loss-notes" placeholder="..." ></textarea>
        </div>
        <div class="sale-actions">
          <button type="button" class="sale-btn secondary" data-form-back="loss" data-i18n="sale.backBtn">Back</button>
          <button type="submit" class="sale-btn primary" data-i18n="sale.saveBtn">Save</button>
        </div>
      </form>

      <div class="sale-stats">
        <div>
          <span data-i18n="sale.closedLabel">Closed</span>
          <strong id="sale-win-count">0</strong>
        </div>
        <div>
          <span data-i18n="sale.pendingLabel">Pending</span>
          <strong id="sale-loss-count">0</strong>
        </div>
      </div>
      <datalist id="liner-options"></datalist>
      <datalist id="closer-options"></datalist>
    </div>
  </div>

  <!-- -------------- MODALES PARA CADA MARCA -------------- -->

  <!-- Zoetry -->
  <div class="modal-overlay" id="modal-zoetry">
    <div class="modal">
      <div class="modal-header">
        <h2>Zoëtry Wellness & Spa Resorts</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <div class="video-wrapper">
            <video id="zoetry-main-video" controls playsinline preload="metadata" poster="images/zoetry-poster.jpg">
              <source src="videozoetry(og).mp4" type="video/mp4">
              Tu navegador no soporta el elemento <code>video</code>. <a href="videozoetry(og).mp4">Descargar / Ver video</a>
            </video>
          </div>
        </div>
        <p class="modal-description">
          Luxury wellness retreats with gourmet dining, oceanfront suites, and spa-inclusive experiences in boutique-style sanctuaries.
        </p>
        <div class="modal-gallery">
          <img src="true tranquility zoetry.webp" alt="Zoetry Resort 1" loading="lazy" />
          <img src="zoetry endless dining.webp" alt="Zoetry Resort 2" loading="lazy" />
          <img src="personalized service,zoetry.webp" alt="Zoetry Resort 3" loading="lazy" />
          <img src="junior suit ocean view terrace zoetry.webp" alt="Zoetry Resort 4" loading="lazy" />
          <img src="couple in valcony.webp" alt="Zoetry Resort 5" loading="lazy" />
          <img src="romantic dinner.webp" alt="Zoetry Resort 6" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Secrets -->
  <div class="modal-overlay" id="modal-secrets">
    <div class="modal">
      <div class="modal-header">
        <h2>Secrets Resorts & Spas</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <video src="Secrets Bahia Mita Surf & Spa Resort _ Unlimited Vacation Club.mp4" controls muted preload="metadata"></video>
        </div>
        <p class="modal-description">
          Adults-only, romantic beachfront escapes with gourmet à la carte dining, premium drinks and world-class service.
        </p>
        <div class="modal-gallery">
          <img src="secrets punta mita 1.webp" alt="Secrets Resort 1" loading="lazy" />
          <img src="secrets punta mita 2.webp" alt="Secrets Resort 2" loading="lazy" />
          <img src="secrets punta mita 3.webp" alt="Secrets Resort 3" loading="lazy" />
          <img src="secrets pounta mita 5.webp" alt="Secrets Resort 4" loading="lazy" />
          <img src="secrets punta mita 5.webp" alt="Secrets Resort 5" loading="lazy" />
          <img src="secrets punta mita 6.webp" alt="Secrets Resort 6" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Breathless -->
  <div class="modal-overlay" id="modal-breathless">
    <div class="modal">
      <div class="modal-header">
        <h2>Breathless Resorts & Spas</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <video src="Breathless Cancun Soul Resort Video.mp4" controls muted preload="metadata"></video>
        </div>
        <p class="modal-description">
          Vibrant, chic and ultra-modern resorts with DJ parties, social atmosphere and stunning oceanfront views.
        </p>
        <div class="modal-gallery">
          <img src="breathless 1.webp" alt="Breathless Resort 1" loading="lazy" />
          <img src="breathless 2.webp" alt="Breathless Resort 2" loading="lazy" />
          <img src="breathless 3.webp" alt="Breathless Resort 3" loading="lazy" />
          <img src="breathless 4.webp" alt="Breathless Resort 4" loading="lazy" />
          <img src="breathless 5.webp" alt="Breathless Resort 5" loading="lazy" />
          <img src="breathless 6.webp" alt="Breathless Resort 6" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Dreams -->
  <div class="modal-overlay" id="modal-dreams">
    <div class="modal">
      <div class="modal-header">
        <h2>Dreams Resorts & Spas</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <video src="Discover All-Inclusive Luxury at Dreams┬« Sands Cancun Resort & Spa.mp4" controls muted preload="metadata"></video>
        </div>
        <p class="modal-description">
          Family-friendly beachfront resorts with kids’ clubs, gourmet cuisine and spacious suites for every type of traveler.
        </p>
        <div class="modal-gallery">
          <img src="dreams 1.webp" alt="Dreams Resort 1" loading="lazy" />
          <img src="dreams 2.webp" alt="Dreams Resort 2" loading="lazy" />
          <img src="dreams 3.webp" alt="Dreams Resort 3" loading="lazy" />
          <img src="dreams 4.webp" alt="Dreams Resort 4" loading="lazy" />
          <img src="dreams 5.webp" alt="Dreams Resort 5" loading="lazy" />
          <img src="dreams 6.webp" alt="Dreams Resort 6" loading="lazy" />
        </div>
      </div>
    </div>
  </div>
  <!-- Hyatt: gallery of condos (images + videos) -->
  <div class="modal-overlay" id="modal-hyatt">
    <div class="modal">
      <div class="modal-header">
        <h2>World of Hyatt — Exchange Condos</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <div class="video-wrapper">
            <video id="hyatt-main-video" controls playsinline preload="metadata" poster="images/hyatt-condo1-poster.jpg">
              <source src="World of Hyatt Inclusive Collection.mp4" type="video/mp4">
            </video>
          </div>
          <div class="divider"></div>
          <div class="modal-gallery">
            <img src="hondaafushi island resort.jpg" alt="Hyatt Condo 1" loading="lazy">
            <img src="hondafusihi island resort 2.jpg" alt="Hyatt Condo 2" loading="lazy">
            <img src="hondafushi island resort 3.jpg" alt="Hyatt Condo 3" loading="lazy">
            <img src="hondafusihi island resort ban╠âo.jpg" alt="condo baño" loading="lazy">
            <img src="hondafushi island resort 3.jpg" alt="Hyatt Condo 5" loading="lazy">
            <img src="med1.jpg" alt="Mediterranean 1" loading="lazy">
            <img src="med2.jpg" alt="Mediterranean 2" loading="lazy">
            <img src="med3.jpg" alt="Mediterranean 3" loading="lazy">
            <img src="med4.jpg" alt="Mediterranean 4" loading="lazy">
            <img src="med5.jpg" alt="Mediterranean 5" loading="lazy">
            <img src="med6.jpg" alt="Mediterranean 6" loading="lazy">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- UExperience -->
  <div class="modal-overlay" id="modal-uexperience">
    <div class="modal">
      <div class="modal-header">
        <h2>UExperience Immersive Gallery</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <div class="video-wrapper">
            <video controls playsinline preload="metadata" poster="conde maldives 3.jpg">
              <source src="Unforgettable Travel & Lifestyle Perks _ U Experiences by ONE.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
          </div>
        </div>
        <p class="modal-description">
          Signature villas, yacht escapes and curated experiences designed exclusively for Unlimited Vacation Club members.
        </p>
        <div class="modal-gallery">
          <img src="conde 1.jpg" alt="Infinity pool sunset" loading="lazy" />
          <img src="conde 3.jpg" alt="Private dining over water" loading="lazy" />
          <img src="conde 7.jpg" alt="Oceanfront lounge" loading="lazy" />
          <img src="enrichment expiernces.webp" alt="Cultural immersion" loading="lazy" />
          <img src="elevated ameneties.webp" alt="Elevated amenities" loading="lazy" />
          <img src="condo maldives.jpg" alt="Maldives suite" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Hyatt Vivid -->
  <div class="modal-overlay" id="modal-vivid">
    <div class="modal">
      <div class="modal-header">
        <h2>Hyatt Vivid</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <img src="hyat vivid3.png" alt="Hyatt Vivid" style="width:100%; border-radius:12px;" loading="lazy" />
        </div>
        <p class="modal-description">
          Social beachfront labs with DJs, mixology carts and rooftop wellness studios.
        </p>
        <div class="modal-gallery">
          <img src="elevated ameneties.webp" alt="Premium amenities" loading="lazy" />
          <img src="enrichment expiernces.webp" alt="Creative sessions" loading="lazy" />
          <img src="breathless 3.webp" alt="Nightlife" loading="lazy" />
          <img src="breathless 5.webp" alt="Private lounge" loading="lazy" />
          <img src="condo maldives 5.jpg" alt="Ocean deck" loading="lazy" />
          <img src="condo 4.jpg" alt="Sunset view" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- Alua -->
  <div class="modal-overlay" id="modal-alua">
    <div class="modal">
      <div class="modal-header">
        <h2>Alua Hotels & Resorts</h2>
        <button class="modal-close" data-close>&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-media">
          <img src="alua3.png" alt="Alua Hotels" style="width:100%; border-radius:12px;" loading="lazy" />
        </div>
        <p class="modal-description">
          Mediterranean-inspired escapes with family suites, coastal clubs and curated excursions.
        </p>
        <div class="modal-gallery">
          <img src="conde maldives 3.jpg" alt="Beachfront suite" loading="lazy" />
          <img src="true tranquility zoetry.webp" alt="Infinity pool" loading="lazy" />
          <img src="romantic dinner.webp" alt="Dinner under the stars" loading="lazy" />
          <img src="condo maldives 7.jpg" alt="Terrace view" loading="lazy" />
          <img src="condo 7.jpg" alt="Living area" loading="lazy" />
          <img src="condo 2.jpg" alt="Resort gardens" loading="lazy" />
        </div>
      </div>
    </div>
  </div>

  <!-- ------------------- SCRIPT INTERACTIVO ------------------- -->
  <script>
  (function(){
    'use strict';

    const q  = (sel, ctx=document) => ctx.querySelector(sel);
    const qa = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    const PIN_CODE = '5910416';
    const SALES_STORAGE_KEY = 'uvcSalesLog';
    const SESSION_STORAGE_KEY = 'uvcSessionNames';
    const ADMIN_CONFIG_STORAGE_KEY = 'uvcAdminConfig';
    const PRICE_DRIFT_INTERVAL = 15 * 1000;
    const PRICE_DRIFT_STEP = 4;
    const PRICE_DRIFT_RANGE = 10;
    const INCENTIVE_BLOCK_SIZE = 10000;
    const INCENTIVE_AI_NIGHTS = 7;
    const INCENTIVE_HYATT_WEEKS = 2;
    const INCENTIVE_HYATT_POINTS = 1000;
    const HYATT_WEEK_VALUE = 2000;
    const INCENTIVE_REWARD_CREDITS = 1;
    const DEFAULT_AI_NIGHT_VALUE = 500;
    const priceCheckerToggle  = q('#price-checker-toggle');
    const priceCheckerPanel   = q('#price-checker-panel');
    const priceCheckerNote    = q('#price-checker-note');
    const priceCheckerClose   = priceCheckerPanel ? q('.pc-close', priceCheckerPanel) : null;
      const priceCheckerRefresh = q('#pc-refresh-btn');
    const homeScreen          = q('#home-screen');
    const homeConfig          = q('#home-config');
    const startDemoBtn        = q('#start-demo-btn');
    const adminBtn            = q('#admin-btn');
    const closePitchBtn       = q('#close-pitch-btn');
    const pinForm             = q('#pin-form');
    const pinInput            = q('#pin-input');
    const pinStatus           = q('#pin-status');
    const configLockedMessage = q('#config-locked-message');
    const configInputs        = qa('[data-config-field]');
    const relockBtn           = q('#relock-btn');
    const sessionInputs       = qa('[data-session-field]');
    const staffInputs         = qa('[data-staff-field]');
    const staffOptionLists    = {
      liner: q('#liner-options'),
      closer: q('#closer-options')
    };
    const saleStaffInputs     = {
      liner: q('#sale-liner-input'),
      closer: q('#sale-closer-input')
    };
    const saleStaffError      = q('#sale-staff-error');
    const configSaveButtons   = qa('[data-config-save]');
    const saleOverlay         = q('#sale-overlay');
    const saleChoiceSection   = q('#sale-choice');
    const saleChoiceButtons   = qa('.sale-choice-buttons button[data-choice]');
    const saleForms           = {
      win: q('#sale-form-win'),
      loss: q('#sale-form-loss')
    };
    const saleBackButtons     = qa('[data-form-back]');
    const saleWinCount        = q('#sale-win-count');
    const saleLossCount       = q('#sale-loss-count');
    const downloadSalesReportBtn = q('#download-sales-report');
    const resetSalesBtn          = q('#reset-sales-btn');
    const metricAvgSale       = q('#metric-avg-sale');
    const metricConversion    = q('#metric-conversion');
    const metricTotalVolume   = q('#metric-total-volume');
    const metricClarity       = q('#metric-clarity');
    const metricTotalPitches  = q('#metric-total-pitches');
    const metricBestDay       = q('#metric-best-day');
    const metricMonthlyProj   = q('#metric-monthly-projection');
    const volumeOutputs = {
      day: q('[data-volume="day"]'),
      week: q('[data-volume="week"]'),
      biweek: q('[data-volume="biweek"]')
    };
    const rankingLists = {
      liner: q('#liner-ranking'),
      closer: q('#closer-ranking')
    };
    const topLinerName   = q('#top-liner-name');
    const topLinerAmount = q('#top-liner-amount');
    const topCloserName  = q('#top-closer-name');
    const topCloserAmount= q('#top-closer-amount');
    const comparisonBars = {
      liner: q('[data-bar="liner"]'),
      closer: q('[data-bar="closer"]')
    };
    const comparisonValues = {
      liner: q('[data-bar-value="liner"]'),
      closer: q('[data-bar-value="closer"]')
    };

    const translations = {
      es: {
        'header.allInclusive': 'Resorts Todo Incluido',
        'header.worldwide': 'Worldwide',
        'header.travelAgency': 'Agencia de Viajes',
        'col1.title': 'Unlimited Vacation Club',
        'col1.benefit1': '+125 Resorts.',
        'col1.benefit2': '25% Mejor Precio Garantizado.',
        'col1.benefit3': 'Mejora Gratis.',
        'col1.benefit4': '185 USD.',
        'col1.benefit5': 'Servicio de Concierge.',
        'col1.benefit6': '25 USD Reservación Extra.',
        'col1.notes': '20 habitaciones · $1000 = 5000 pts · Mínimo 2 noches · 72 hrs · Best price',
        'col2.title': 'Worldwide Exchange',
        'col2.list1': '4500+ Resorts',
        'col2.list2': '100+ Países',
        'col2.hyatt1': '1200 Hoteles',
        'col2.hyatt2': '72 Países',
        'col2.notes': '599 tarifa fija · 2 recámaras · 6 personas · 7N/8D · 2 años gratis – Worldwide [109 USD]',
        'col3.title': 'UExperience',
        'col3.titleTail': 'Experience',
        'col3.cruisesLabel': 'Cruceros Rewards',
        'col3.flightsLabel': 'Vuelos',
        'col3.note': '3500 / 3000 / 1000 · 2 años gratis – Agencia de Viajes · 5000 USD · 18 meses · Agencia de Viajes [399 USD]',
        'utility.toggle': 'Herramientas',
        'utility.menuTitle': 'Centro de control',
        'utility.priceChecker': 'Verificador de Precios',
        'utility.settings': 'Configuración',
        'utility.simulators': 'Simuladores',
        'breakeven.title': 'ROI Retail vs Membresía',
        'breakeven.subtitle': 'Ajusta los precios reales para mostrar cuántos viajes necesitas para recuperar la inversión.',
        'breakeven.groupVolume': 'Membresía y volumen',
        'breakeven.groupTrip': 'Grupo y noches',
        'breakeven.groupRates': 'Tarifa por persona / noche',
        'breakeven.groupExtras': 'Gastos extra (spa / actividades)',
        'breakeven.membershipCost': 'Costo de la membresía (USD)',
        'breakeven.tripsPerYear': 'Viajes por año',
        'breakeven.years': 'Años a proyectar',
        'breakeven.nights': 'Noches por viaje',
        'breakeven.travelers': 'Personas / suite',
        'breakeven.retailNight': 'Retail (USD)',
        'breakeven.memberNight': 'UVC (USD)',
        'breakeven.extraRetail': 'Gasto estimado retail (por viaje)',
        'breakeven.extraDiscount': 'Descuento UVC en extras (%)',
        'breakeven.extraHint': 'Aplica el descuento de socio a spa, actividades, golf o transporte.',
        'breakeven.perTrip': 'Ahorro por viaje',
        'breakeven.tripRetail': 'Viaje retail',
        'breakeven.tripMember': 'Viaje UVC',
        'breakeven.tripSavings': 'Ahorro por viaje',
        'breakeven.annualSavings': 'Ahorro anual',
        'breakeven.breakEven': 'Punto de equilibrio',
        'breakeven.membershipLabel': 'Costo membresía',
        'breakeven.incentiveNights': 'Noches all inclusive',
        'breakeven.incentiveWeeks': 'Semanas Hyatt',
        'breakeven.incentivePoints': 'Puntos Hyatt',
        'breakeven.quickCalcTitle': 'Calculadora rápida',
        'breakeven.quickCalcHint': 'Usa + - × ÷ y paréntesis para cualquier presupuesto.',
        'breakeven.exportQuote': 'Exportar cotización',
        'breakeven.shareQuote': 'Compartir',
        'breakeven.bestValue': '¡Mejor valor!',
        'calc.title': 'Calculadora',
        'calc.hint': 'Usa + - × ÷ y paréntesis para cualquier presupuesto.',
        'sim.tabs.retail': 'ROI Retail vs Membresía',
        'sim.tabs.incentives': 'ROI Incentivos',
        'sim.tabs.calc': 'Calculadora',
        'sim.labTitle': 'UVC Sales Lab',
        'sim.labSubtitle': 'Simuladores corporativos',
        'incentives.title': 'Calculadora ROI de incentivos',
        'incentives.subtitle': 'Descubre cuánto valor adicional reciben por noches AI, semanas Hyatt y reward credits.',
        'incentives.investment': 'Inversión del cliente (USD)',
        'incentives.nights': 'Noches all inclusive',
        'incentives.weeks': 'Semanas Hyatt',
        'incentives.credits': 'Reward credits',
        'incentives.nightsValue': 'Valor noches',
        'incentives.weeksValue': 'Valor Hyatt',
        'incentives.creditsValue': 'Valor credits',
        'incentives.totalValue': 'Valor total',
        'incentives.roi': 'ROI incentivos',
        'promos.title': 'Promociones UVC',
        'promos.subtitle': 'Selecciona una campaña para mostrar las fotos en formato grande.',
        'promos.heroLabel': 'Campaña activa',
        'promos.marketLabel': 'Mercado objetivo',
        'promos.valueLabel': 'Beneficio clave',
        'promos.timelineLabel': 'Elige la promoción que quieres contar',
        'promos.filterAll': 'Todas',
        'promos.filterBreathless': 'Breathless',
        'promos.filterDreams': 'Dreams',
        'promos.filterSecrets': 'Secrets',
        'priceChecker.label': 'Price Checker',
        'priceChecker.title': 'Comparador en vivo',
        'priceChecker.subtitle': 'Secrets Puerto Los Cabos vs Zoëtry Los Cabos',
        'priceChecker.publicRate': 'Tarifa Pública',
        'priceChecker.memberRate': 'Tarifa UVC',
          'priceChecker.refresh': 'Actualizar',
        'priceChecker.savingsInline': 'Ahorro UVC {value}%',
        'priceChecker.note': 'Mayor ahorro con UVC: {value}%.',
        'home.title': 'Centro de Control 3-Way Pitch',
        'home.subtitle': 'Unlimited Vacation Club',
        'home.readyText': 'La presentación está lista. Presiona iniciar; los nombres del equipo se capturan al cerrar.',
        'home.lockedMessage': 'Ingresa el PIN para desbloquear esta sección privada.',
        'home.lockPanel': 'Bloquear panel',
        'home.staffTitle': 'Equipo disponible',
        'home.staffLiners': 'Liners',
        'home.staffClosers': 'Closers',
        'home.staffHint': 'Se mostrarán como sugerencias al registrar un cierre.',
        'sale.promptTitle': 'Registra este pitch',
        'sale.promptSubtitle': '¿Se concretó la venta?',
        'sale.successBtn': 'Venta lograda',
        'sale.pendingBtn': 'Aún no',
        'sale.staffLiner': 'Liner asignado',
        'sale.staffCloser': 'Closer asignado',
        'sale.staffHint': 'Usa la lista del administrador o escribe el nombre manualmente.',
        'sale.staffEmpty': 'Agrega nombres en el administrador.',
        'sale.staffError': 'Selecciona el liner y el closer antes de continuar.',
        'sale.skipBtn': 'Omitir',
        'sale.closedLabel': 'Cerradas',
        'sale.pendingLabel': 'Pendientes',
        'sale.winQ1': '¿Qué convenció más al socio?',
        'sale.winQ2': '¿Qué contenido cerró la decisión?',
        'sale.winAmount': 'Monto vendido (USD)',
        'sale.lossQ1': '¿Qué no cumplió tus expectativas?',
        'sale.lossQ2': '¿Qué tan clara fue la información?',
        'sale.lossQ3': '¿Qué parte debemos mejorar?',
        'sale.notesLabel': 'Notas',
        'sale.backBtn': 'Regresar',
        'sale.saveBtn': 'Guardar',
        'sale.optionPrice': 'Precio',
        'sale.optionQuality': 'Calidad',
        'sale.optionServiceOnly': 'Servicio',
        'sale.optionService': 'Servicio y acompañamiento',
        'sale.optionBenefits': 'Beneficios exclusivos',
        'sale.optionUrgency': 'Incentivos de tiempo limitado',
        'sale.optionComparison': 'Comparador de precios',
        'sale.optionGallery': 'Galería y videos',
        'sale.optionTravelAgency': 'Agencia de viajes',
        'sale.optionOther': 'Otro',
        'sale.optionTiming': 'Momento / presupuesto',
        'sale.optionInfo': 'Faltó información',
        'sale.optionTrust': 'Confianza / credibilidad',
        'sale.optionPresentation': 'Historia / presentación',
        'sale.optionFollowup': 'Seguimiento / urgencia',
        'sale.optionBenefitsDetail': 'Explicar beneficios',
        'sale.optionFlow': 'Flujo de la presentación',
        'sale.optionProfessionalism': 'Profesionalismo del equipo',
        'sale.optionResorts': 'Opciones de resorts',
        'sale.optionValue': 'Valor y beneficios',
        'sale.clarity1': '1 · Muy confusa',
        'sale.clarity2': '2 · Podría mejorar',
        'sale.clarity3': '3 · Neutral',
        'sale.clarity4': '4 · Clara',
        'sale.clarity5': '5 · Extremadamente clara',
        'sale.reportInfo': 'Descarga un resumen de ventas.',
        'sale.reportBtn': 'Descargar CSV',
        'home.start': 'Iniciar presentación',
        'home.configTitle': 'Panel de administración',
        'home.configSubtitle': 'Ingresa el PIN para editar precios en vivo.',
        'home.language': 'Idioma',
        'home.unlock': 'Desbloquear',
        'home.destinationLabel': 'Nombre del hotel',
        'home.expediaLabel': 'Expedia (USD)',
        'home.bookingLabel': 'Booking (USD)',
        'home.despegarLabel': 'Despegar (USD)',
        'home.discountLabel': 'Descuento UVC %',
        'home.saveProperty': 'Guardar precios',
        'home.summaryLabel': 'Tarifa UVC lista',
        'home.pinSuccess': 'PIN correcto. Edición habilitada.',
        'home.pinError': 'PIN incorrecto. Intenta de nuevo.',
        'home.incentiveTitle': 'Costos manuales de incentivos',
        'home.incentiveAiLabel': 'Valor noche all inclusive (USD)',
        'home.incentiveHyattLabel': 'Valor semana Hyatt (USD)',
        'home.incentiveCreditsLabel': 'Valor por reward credit (USD)',
        'home.incentiveHint': 'Deja vacío el valor de noche para usar el precio público del comparador.',
        'analytics.linerInput': 'Nombre del Liner',
        'analytics.closerInput': 'Nombre del Closer',
        'analytics.staffInfo': 'Los nombres del equipo se llenan al registrar cada encuesta.',
        'analytics.avgSale': 'Promedio de ventas',
        'analytics.avgSaleHint': 'Promedio por venta cerrada',
        'analytics.conversion': 'Porcentaje de cierre',
        'analytics.conversionHint': 'Intentos registrados',
        'analytics.totalVolume': 'Volumen total',
        'analytics.totalVolumeHint': 'Ventas acumuladas',
        'analytics.clarityScore': 'Índice de claridad',
        'analytics.clarityHint': 'Encuestas de clientes',
        'analytics.dayVolume': 'Volumen diario',
        'analytics.weekVolume': 'Volumen semanal',
        'analytics.biweekVolume': 'Volumen quincenal',
        'analytics.linerRanking': 'Ranking Liners',
        'analytics.closerRanking': 'Ranking Closers',
        'analytics.topLiner': 'Top Liner',
        'analytics.topCloser': 'Top Closer',
        'analytics.teamCompare': 'Comparación Liners vs Closers',
        'analytics.linersLabel': 'Liners',
        'analytics.closersLabel': 'Closers',
        'analytics.noData': 'Sin datos disponibles',
        'analytics.resetBtn': 'Limpiar datos',
        'analytics.resetConfirm': '¿Seguro que quieres borrar el historial de ventas? Esta acción no se puede deshacer.'
      },
      en: {
        'header.allInclusive': 'All Inclusive Resorts',
        'header.worldwide': 'Worldwide',
        'header.travelAgency': 'Travel Agency',
        'col1.title': 'Unlimited Vacation Club',
        'col1.benefit1': '+125 Resorts.',
        'col1.benefit2': '25% Best Price Guaranteed.',
        'col1.benefit3': 'Free Upgrade.',
        'col1.benefit4': '185 USD.',
        'col1.benefit5': 'Concierge Service.',
        'col1.benefit6': '25 USD Extra Reservation.',
        'col1.notes': '20 Rooms · $1000 = 5000 points · Minimum 2 nights · 72 hrs · Best price',
        'col2.title': 'Worldwide Exchange',
        'col2.list1': '4500+ Resorts',
        'col2.list2': '100+ Countries',
        'col2.hyatt1': '1200 Hotels',
        'col2.hyatt2': '72 Countries',
        'col2.notes': '599 fixed price · 2 bedrooms · 6 people · 7N/8D · 2 years free – Worldwide [109 USD]',
        'col3.title': 'UExperience',
        'col3.titleTail': 'Experience',
        'col3.cruisesLabel': 'Cruises Rewards',
        'col3.flightsLabel': 'Flights',
        'col3.note': '3500 / 3000 / 1000 · 2 years free – Travel Agency · 5000 USD · 18 Months · Travel Agency [399 USD]',
        'utility.toggle': 'Tools',
        'utility.menuTitle': 'Control center',
        'utility.priceChecker': 'Price checker',
        'utility.settings': 'Settings',
        'utility.simulators': 'Simulators',
        'breakeven.title': 'Retail vs Membership ROI',
        'breakeven.subtitle': 'Use live rates to show how many trips are needed to recover the buy-in.',
        'breakeven.groupVolume': 'Membership & volume',
        'breakeven.groupTrip': 'Group & nights',
        'breakeven.groupRates': 'Rate per guest / night',
        'breakeven.groupExtras': 'Extra spending (spa / activities)',
        'breakeven.membershipCost': 'Membership cost (USD)',
        'breakeven.tripsPerYear': 'Trips per year',
        'breakeven.years': 'Years to project',
        'breakeven.nights': 'Nights per trip',
        'breakeven.travelers': 'Guests per trip',
        'breakeven.retailNight': 'Retail (USD)',
        'breakeven.memberNight': 'Member (USD)',
        'breakeven.extraRetail': 'Estimated retail extras (per trip)',
        'breakeven.extraDiscount': 'Member discount on extras (%)',
        'breakeven.extraHint': 'Apply the member discount to spa, activities, golf or transfers.',
        'breakeven.perTrip': 'Savings per trip',
        'breakeven.tripRetail': 'Retail trip',
        'breakeven.tripMember': 'UVC trip',
        'breakeven.tripSavings': 'Savings per trip',
        'breakeven.annualSavings': 'Annual savings',
        'breakeven.breakEven': 'Break-even',
        'breakeven.membershipLabel': 'Membership cost',
        'breakeven.incentiveNights': 'All-inclusive nights',
        'breakeven.incentiveWeeks': 'Hyatt weeks',
        'breakeven.incentivePoints': 'Hyatt points',
        'breakeven.quickCalcTitle': 'Quick calculator',
        'breakeven.quickCalcHint': 'Use + - × ÷ and parentheses for any budget.',
        'breakeven.exportQuote': 'Export quote',
        'breakeven.shareQuote': 'Share',
        'breakeven.bestValue': 'Best value!',
        'calc.title': 'Calculator',
        'calc.hint': 'Use + - × ÷ and parentheses for any budget.',
        'sim.tabs.retail': 'Retail vs membership ROI',
        'sim.tabs.incentives': 'ROI incentives',
        'sim.tabs.calc': 'Calculator',
        'sim.labTitle': 'UVC Sales Lab',
        'sim.labSubtitle': 'Corporate simulators',
        'incentives.title': 'Incentives ROI calculator',
        'incentives.subtitle': 'Show the extra value created by AI nights, Hyatt weeks and reward credits.',
        'incentives.investment': 'Client investment (USD)',
        'incentives.nights': 'All-inclusive nights',
        'incentives.weeks': 'Hyatt weeks',
        'incentives.credits': 'Reward credits',
        'incentives.nightsValue': 'Night value',
        'incentives.weeksValue': 'Hyatt value',
        'incentives.creditsValue': 'Credits value',
        'incentives.totalValue': 'Total value',
        'incentives.roi': 'Incentives ROI',
        'promos.title': 'UVC Promotions',
        'promos.subtitle': 'Pick a campaign to project the visuals in a large view.',
        'promos.heroLabel': 'Live campaign',
        'promos.marketLabel': 'Target market',
        'promos.valueLabel': 'Key benefit',
        'promos.timelineLabel': 'Choose the promotion you want to pitch',
        'promos.filterAll': 'All',
        'promos.filterBreathless': 'Breathless',
        'promos.filterDreams': 'Dreams',
        'promos.filterSecrets': 'Secrets',
        'priceChecker.label': 'Price Checker',
        'priceChecker.title': 'Live Price Checker',
        'priceChecker.subtitle': 'Secrets Puerto Los Cabos vs Zoëtry Los Cabos',
        'priceChecker.publicRate': 'Public Rate',
        'priceChecker.memberRate': 'Member Rate',
          'priceChecker.refresh': 'Refresh',
        'priceChecker.savingsInline': 'UVC savings {value}%',
        'priceChecker.note': 'Best UVC savings: {value}%.',
        'home.title': '3-Way Pitch Control Center',
        'home.subtitle': 'Unlimited Vacation Club',
        'home.readyText': 'Everything is ready. Tap start; team names are captured when you log the pitch.',
        'home.lockedMessage': 'Enter the PIN to reveal these private settings.',
        'home.lockPanel': 'Re-lock panel',
        'home.staffTitle': 'Available team',
        'home.staffLiners': 'Liners',
        'home.staffClosers': 'Closers',
        'home.staffHint': 'These names appear as suggestions when you log a pitch.',
        'sale.promptTitle': 'Log this pitch',
        'sale.promptSubtitle': 'Did this presentation close a sale?',
        'sale.successBtn': 'Sale closed',
        'sale.pendingBtn': 'Not this time',
        'sale.staffLiner': 'Assigned liner',
        'sale.staffCloser': 'Assigned closer',
        'sale.staffHint': 'Pick from the admin list or type it manually.',
        'sale.staffEmpty': 'Add names from the admin panel.',
        'sale.staffError': 'Select the liner and closer before logging the pitch.',
        'sale.skipBtn': 'Skip',
        'sale.closedLabel': 'Closed',
        'sale.pendingLabel': 'Pending',
        'sale.winQ1': 'What convinced the member the most?',
        'sale.winQ2': 'What content sealed the decision?',
        'sale.winAmount': 'Sale amount (USD)',
        'sale.lossQ1': 'What did not meet your expectations?',
        'sale.lossQ2': 'How clear was the information?',
        'sale.lossQ3': 'Which part should we improve?',
        'sale.notesLabel': 'Notes',
        'sale.backBtn': 'Back',
        'sale.saveBtn': 'Save',
        'sale.optionPrice': 'Price',
        'sale.optionQuality': 'Quality',
        'sale.optionServiceOnly': 'Service',
        'sale.optionService': 'Service & support',
        'sale.optionBenefits': 'Member benefits',
        'sale.optionUrgency': 'Limited-time incentives',
        'sale.optionComparison': 'Price comparison',
        'sale.optionGallery': 'Gallery & videos',
        'sale.optionTravelAgency': 'Travel agency perks',
        'sale.optionOther': 'Other',
        'sale.optionTiming': 'Timing / budget',
        'sale.optionInfo': 'Need more information',
        'sale.optionTrust': 'Trust / credibility',
        'sale.optionPresentation': 'Presentation / storytelling',
        'sale.optionFollowup': 'Follow-up / urgency',
        'sale.optionBenefitsDetail': 'Benefit explanation',
        'sale.optionFlow': 'Presentation flow',
        'sale.optionProfessionalism': 'Staff professionalism',
        'sale.optionResorts': 'Resort options',
        'sale.optionValue': 'Overall value & benefits',
        'sale.clarity1': '1 · Very unclear',
        'sale.clarity2': '2 · Needs clarity',
        'sale.clarity3': '3 · Neutral',
        'sale.clarity4': '4 · Clear',
        'sale.clarity5': '5 · Extremely clear',
        'sale.reportInfo': 'Download your sales summary.',
        'sale.reportBtn': 'Download CSV',
        'home.start': 'Start presentation',
        'home.configTitle': 'Admin console',
        'home.configSubtitle': 'Enter the PIN to edit live pricing.',
        'home.language': 'Language',
        'home.unlock': 'Unlock',
        'home.destinationLabel': 'Hotel name',
        'home.expediaLabel': 'Expedia (USD)',
        'home.bookingLabel': 'Booking (USD)',
        'home.despegarLabel': 'Despegar (USD)',
        'home.discountLabel': 'UVC Discount %',
        'home.saveProperty': 'Save prices',
        'home.summaryLabel': 'Member rate ready',
        'home.pinSuccess': 'PIN accepted. Editing enabled.',
        'home.pinError': 'Wrong PIN. Please try again.',
        'home.incentiveTitle': 'Manual incentive costs',
        'home.incentiveAiLabel': 'All-inclusive night value (USD)',
        'home.incentiveHyattLabel': 'Hyatt week value (USD)',
        'home.incentiveCreditsLabel': 'Value per reward credit (USD)',
        'home.incentiveHint': 'Leave the night value empty to use the public rate from the price checker.',
        'analytics.linerInput': 'Liner name',
        'analytics.closerInput': 'Closer name',
        'analytics.staffInfo': 'Team names are recorded inside each guest survey.',
        'analytics.avgSale': 'Average sale',
        'analytics.avgSaleHint': 'Average per closed sale',
        'analytics.conversion': 'Close rate',
        'analytics.conversionHint': 'Based on logged attempts',
        'analytics.totalVolume': 'Total volume',
        'analytics.totalVolumeHint': 'Accumulated wins',
        'analytics.clarityScore': 'Clarity index',
        'analytics.clarityHint': 'Client survey results',
        'analytics.dayVolume': 'Daily volume',
        'analytics.weekVolume': 'Weekly volume',
        'analytics.biweekVolume': 'Biweekly volume',
        'analytics.linerRanking': 'Liner ranking',
        'analytics.closerRanking': 'Closer ranking',
        'analytics.topLiner': 'Top Liner',
        'analytics.topCloser': 'Top Closer',
        'analytics.teamCompare': 'Liners vs Closers',
        'analytics.linersLabel': 'Liners',
        'analytics.closersLabel': 'Closers',
        'analytics.noData': 'No data yet',
        'analytics.resetBtn': 'Clear data',
        'analytics.resetConfirm': 'Clear all sales history? This cannot be undone.'
      }
    };

    function getTranslation(key){
      const dict = translations[state.lang] || translations.es;
      return (dict && dict[key]) || (translations.es && translations.es[key]) || '';
    }

    const propertyPriceTargets = {};
    qa('[data-price-target]').forEach(el => {
      const idx = Number(el.dataset.propertyIndex || 0);
      const key = el.dataset.priceTarget;
      if (!key) return;
      propertyPriceTargets[idx] = propertyPriceTargets[idx] || {};
      propertyPriceTargets[idx][key] = el;
    });

    const propertyNameTargets = {};
    qa('[data-destination-target]').forEach(el => {
      const idx = Number(el.dataset.propertyIndex || 0);
      propertyNameTargets[idx] = el;
    });

    const propertySavingsTargets = {};
    qa('[data-savings-target]').forEach(el => {
      const idx = Number(el.dataset.savingsTarget || 0);
      propertySavingsTargets[idx] = el;
    });

    const uvcSummaryOutputs = {};
    qa('[data-uvc-summary]').forEach(el => {
      const idx = Number(el.dataset.uvcSummary || 0);
      uvcSummaryOutputs[idx] = el;
    });

    const summaryOutputs = {};
    qa('[data-summary-output]').forEach(el => {
      const idx = Number(el.dataset.summaryOutput || 0);
      summaryOutputs[idx] = el;
    });

    const configSummaryOutputs = {};
    qa('[data-config-summary]').forEach(el => {
      const idx = Number(el.dataset.configSummary || 0);
      configSummaryOutputs[idx] = el;
    });

    const configSummaryLabels = {};
    qa('[data-config-summary-label]').forEach(el => {
      const idx = Number(el.dataset.configSummaryLabel || 0);
      configSummaryLabels[idx] = el;
    });

    const configTitleTargets = {};
    qa('[data-config-title-target]').forEach(el => {
      const idx = Number(el.dataset.configTitleTarget || 0);
      configTitleTargets[idx] = el;
    });

    const utilityToggle = q('#utility-menu-toggle');
    const utilityMenu = q('#utility-menu');
    const simulatorPanel = q('#simulator-panel');
    const simulatorTabs = qa('[data-sim-tab]');
    const simulatorViews = qa('[data-sim-view]');
    const simulatorOpenButtons = qa('[data-sim-open]');
    const breakevenSection = q('#breakeven-calculator');
    const breakevenForm = q('#breakeven-form');
    const breakevenInputs = {
      membership: q('#breakeven-membership'),
      trips: q('#breakeven-trips'),
      years: q('#breakeven-years'),
      nights: q('#breakeven-nights'),
      travelers: q('#breakeven-travelers'),
      retailNight: q('#breakeven-retail-night'),
      memberNight: q('#breakeven-member-night'),
      extraRetail: q('#breakeven-extra-retail'),
      extraDiscount: q('#breakeven-extra-discount')
    };
    const breakevenOutputs = {
      tripRetail: q('#breakeven-trip-retail'),
      tripMember: q('#breakeven-trip-member'),
      tripSavings: q('#breakeven-trip-savings'),
      annual: q('#breakeven-annual'),
      breakEven: q('#breakeven-breakpoint')
    };
    const breakevenBars = q('#breakeven-bars');
    const breakevenMarker = q('#breakeven-marker');
    let breakevenFlashTimeout;
    const quickCalcDisplay = q('#quick-calc-display');
    const quickCalcResult = q('#quick-calc-result');
    const quickCalcButtons = qa('[data-quickcalc-value], [data-quickcalc-action]');
    let quickCalcExpression = '';
    const incentiveInput = {
      investment: q('#incentive-investment'),
      nights: q('#incentive-nights-input'),
      weeks: q('#incentive-weeks-input'),
      credits: q('#incentive-credits-input')
    };
    const incentiveOutputs = {
      nightsValue: q('#incentive-nights-value'),
      weeksValue: q('#incentive-weeks-value'),
      creditsValue: q('#incentive-credits-value'),
      total: q('#incentive-value'),
      roi: q('#incentive-roi'),
      chart: {
        marker: q('#incentive-chart-marker'),
        markerLabel: q('#incentive-chart-marker-label'),
        baseline: q('#incentive-chart-baseline'),
        baselineLabel: q('#incentive-chart-baseline-label'),
        bars: {
          investment: q('.incentive-bar[data-bar="investment"]'),
          returned: q('.incentive-bar[data-bar="returned"]')
        },
        investmentLabel: q('#incentive-bar-investment'),
        returnedLabel: q('#incentive-bar-returned')
      }
    };

    const state = {
      lang: 'en',
      pinUnlocked: false,
      properties: [],
      session: { liner: '', closer: '' },
      sales: { win: 0, pending: 0, entries: [] },
      dynamicPrices: [],
      incentives: {
        aiNight: 0,
        hyattWeek: HYATT_WEEK_VALUE,
        credits: INCENTIVE_REWARD_CREDITS
      },
      staff: {
        liners: [],
        closers: []
      }
    };

    // ====== Sistema de Notificaciones Toast ======
    function showToast(message, type = 'info', duration = 3000) {
      const container = document.getElementById('toast-container');
      if (!container) return;

      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      
      const icon = document.createElement('div');
      icon.className = 'toast-icon';
      icon.textContent = type === 'success' ? '✓' : type === 'error' ? '✕' : 'i';
      
      const messageEl = document.createElement('div');
      messageEl.className = 'toast-message';
      messageEl.textContent = message;
      
      const closeBtn = document.createElement('button');
      closeBtn.className = 'toast-close';
      closeBtn.textContent = '×';
      closeBtn.onclick = () => removeToast(toast);
      
      toast.appendChild(icon);
      toast.appendChild(messageEl);
      toast.appendChild(closeBtn);
      container.appendChild(toast);
      
      if (duration > 0) {
        setTimeout(() => removeToast(toast), duration);
      }
      
      return toast;
    }

    function removeToast(toast) {
      if (!toast || !toast.parentElement) return;
      toast.classList.add('toast-exit');
      setTimeout(() => {
        if (toast.parentElement) {
          toast.parentElement.removeChild(toast);
        }
      }, 300);
    }
    // ====== Fin Sistema Toast ======

    // ====== Utilidad Debounce para optimización ======
    function debounce(func, wait = 300) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    // ====== Fin Debounce ======

    function setUtilityMenu(open){
      if (!utilityMenu || !utilityToggle) return;
      const show = !!open;
      utilityMenu.classList.toggle('active', show);
      utilityToggle.setAttribute('aria-expanded', show ? 'true' : 'false');
    }

    function toggleUtilityMenu(){
      if (!utilityMenu) return;
      const show = !utilityMenu.classList.contains('active');
      setUtilityMenu(show);
    }

    function closeUtilityMenu(){
      setUtilityMenu(false);
    }

    function loadSessionData(){
      if (typeof localStorage === 'undefined') return;
      try {
        const raw = localStorage.getItem(SESSION_STORAGE_KEY);
        if (!raw) return;
        const parsed = JSON.parse(raw);
        if (parsed && typeof parsed === 'object'){
          state.session.liner = parsed.liner || '';
          state.session.closer = parsed.closer || '';
        }
      } catch(err){}
    }

    function persistSessionData(){
      if (typeof localStorage === 'undefined') return;
      try {
        localStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(state.session));
      } catch(err){}
    }

    function syncSessionInputs(){
      sessionInputs.forEach(input => {
        const field = input.dataset.sessionField;
        if (!field) return;
        if (document.activeElement === input) return;
        input.value = state.session[field] || '';
      });
    }

    // ====== Theme Toggle (Persistente) ======
    function initThemeToggle(){
      const btn = q('#theme-toggle-btn');
      if (!btn) return;
      // Cargar preferencia
      let saved = null;
      try { saved = localStorage.getItem('uvc_theme'); } catch(e){}
      if (saved === 'future') {
        document.body.classList.add('theme-future');
        updateThemeToggleUI(btn);
      }
      btn.addEventListener('click', ()=>{
        const active = document.body.classList.toggle('theme-future');
        try { localStorage.setItem('uvc_theme', active ? 'future' : 'classic'); } catch(e){}
        updateThemeToggleUI(btn);
        showToast(active ? 'Tema Futurista Activado' : 'Tema Clásico Activado', 'info', 2200);
      });
    }

    function updateThemeToggleUI(btn){
      if (!btn) return;
      const icon = q('#theme-toggle-icon');
      const label = q('#theme-toggle-label');
      const isFuture = document.body.classList.contains('theme-future');
      if (icon) icon.textContent = isFuture ? '🧬' : '🌌';
      if (label) label.textContent = isFuture ? 'Clásico' : 'Futuro';
      btn.setAttribute('aria-pressed', isFuture ? 'true' : 'false');
      btn.title = isFuture ? 'Cambiar a tema clásico' : 'Cambiar a tema futurista';
    }
    // ====== Fin Theme Toggle ======

    function loadSalesData(){
      if (typeof localStorage === 'undefined') return;
      try {
        const raw = localStorage.getItem(SALES_STORAGE_KEY);
        if (!raw) return;
        const parsed = JSON.parse(raw);
        const entries = Array.isArray(parsed && parsed.entries) ? parsed.entries : [];
        entries.forEach(entry => {
          if (entry && entry.result === 'pending'){
            entry.result = 'loss';
          }
        });
        state.sales.entries = entries;
        state.sales.win = entries.filter(item => item && item.result === 'win').length;
        state.sales.pending = entries.filter(item => item && item.result === 'loss').length;
      } catch(err){}
    }

    function persistSalesData(){
      if (typeof localStorage === 'undefined') return;
      try {
        localStorage.setItem(SALES_STORAGE_KEY, JSON.stringify(state.sales));
      } catch(err){}
    }

    function loadAdminConfig(){
      if (typeof localStorage === 'undefined') return;
      try {
        const raw = localStorage.getItem(ADMIN_CONFIG_STORAGE_KEY);
        if (!raw) return;
        const parsed = JSON.parse(raw);
        if (parsed && Array.isArray(parsed.properties)){
          parsed.properties.forEach((savedProp, idx) => {
            if (!savedProp) return;
            const prop = ensureProperty(idx);
            if (savedProp.destination){
              prop.destination = savedProp.destination;
            }
            if (typeof savedProp.discount !== 'undefined'){
              prop.discount = Number(savedProp.discount) || 0;
            }
            if (savedProp.prices && typeof savedProp.prices === 'object'){
              ['expedia','booking','despegar'].forEach(key => {
                if (typeof savedProp.prices[key] !== 'undefined'){
                  prop.prices[key] = Number(savedProp.prices[key]) || 0;
                  syncDynamicBase(idx, key, prop.prices[key]);
                }
              });
            }
          });
        }
        if (parsed && parsed.incentives){
          if (typeof parsed.incentives.aiNight !== 'undefined'){
            state.incentives.aiNight = Number(parsed.incentives.aiNight) || 0;
          }
          if (typeof parsed.incentives.hyattWeek !== 'undefined'){
            state.incentives.hyattWeek = Number(parsed.incentives.hyattWeek) || HYATT_WEEK_VALUE;
          }
          if (typeof parsed.incentives.credits !== 'undefined'){
            state.incentives.credits = Number(parsed.incentives.credits) || INCENTIVE_REWARD_CREDITS;
          }
        }
        if (parsed && parsed.staff){
          state.staff.liners = Array.isArray(parsed.staff.liners) ? parsed.staff.liners.filter(Boolean) : [];
          state.staff.closers = Array.isArray(parsed.staff.closers) ? parsed.staff.closers.filter(Boolean) : [];
        }
      } catch(err){}
    }

    function persistAdminConfig(){
      if (typeof localStorage === 'undefined') return;
      try {
        const payload = {
          properties: state.properties.map(prop => {
            if (!prop) return null;
            return {
              destination: prop.destination || '',
              discount: Number(prop.discount) || 0,
              prices: {
                expedia: Number(prop.prices && prop.prices.expedia || 0),
                booking: Number(prop.prices && prop.prices.booking || 0),
                despegar: Number(prop.prices && prop.prices.despegar || 0)
              }
            };
          }),
          incentives: {
            aiNight: state.incentives.aiNight || 0,
            hyattWeek: state.incentives.hyattWeek || HYATT_WEEK_VALUE,
            credits: state.incentives.credits || INCENTIVE_REWARD_CREDITS
          },
          staff: {
            liners: state.staff.liners || [],
            closers: state.staff.closers || []
          }
        };
        localStorage.setItem(ADMIN_CONFIG_STORAGE_KEY, JSON.stringify(payload));
      } catch(err){}
    }

    function syncConfigInputsFromState(){
      configInputs.forEach(input => {
        const field = input.dataset.configField;
        if (!field) return;
        if (field === 'incentive-ai'){
          input.value = state.incentives.aiNight > 0 ? state.incentives.aiNight : '';
          return;
        }
        if (field === 'incentive-hyatt'){
          input.value = state.incentives.hyattWeek || HYATT_WEEK_VALUE;
          return;
        }
        if (field === 'incentive-credits'){
          input.value = state.incentives.credits || INCENTIVE_REWARD_CREDITS;
          return;
        }
        const idx = Number(input.dataset.propertyIndex || 0);
        const prop = ensureProperty(idx);
        if (field === 'destination'){
          input.value = prop.destination || '';
        } else if (field === 'discount'){
          input.value = prop.discount;
        } else if (field.startsWith('price-')){
          const key = field.replace('price-', '');
          input.value = prop.prices[key] || 0;
        }
      });
    }

    function updateStaffOptions(){
      const map = {
        liner: state.staff.liners || [],
        closer: state.staff.closers || []
      };
      Object.keys(staffOptionLists).forEach(role => {
        const list = staffOptionLists[role];
        if (!list) return;
        list.innerHTML = '';
        (map[role] || []).forEach(name => {
          const option = document.createElement('option');
          option.value = name;
          list.appendChild(option);
        });
      });
    }

    function syncStaffInputsFromState(){
      staffInputs.forEach(input => {
        const field = input.dataset.staffField;
        if (!field || !state.staff[field]) return;
        input.value = (state.staff[field] || []).join('\n');
      });
      updateStaffOptions();
    }

    function parseStaffList(value){
      return value
        .split(/\r?\n|,/)
        .map(item => item.trim())
        .filter(Boolean);
    }

    function syncPropertyFromInputs(idx){
      const prop = ensureProperty(idx);
      const scopedInputs = qa(`[data-config-field][data-property-index="${idx}"]`);
      scopedInputs.forEach(input => {
        const field = input.dataset.configField;
        if (field === 'destination'){
          prop.destination = input.value;
        } else if (field === 'discount'){
          prop.discount = parseFloat(input.value) || 0;
        } else if (field && field.startsWith('price-')){
          const key = field.replace('price-', '');
          prop.prices[key] = parseFloat(input.value) || 0;
          syncDynamicBase(idx, key, prop.prices[key]);
        }
      });
    }

    loadSessionData();
    loadSalesData();

    function ensureProperty(idx){
      if (!state.properties[idx]){
        state.properties[idx] = {
          destination: `Property ${idx + 1}`,
          prices: { expedia: 0, booking: 0, despegar: 0 },
          discount: 0
        };
      }
      return state.properties[idx];
    }

    function ensureDynamicStore(idx){
      if (!state.dynamicPrices[idx]){
        state.dynamicPrices[idx] = {};
      }
      ['expedia','booking','despegar'].forEach(key => {
        if (!state.dynamicPrices[idx][key]){
          const prop = ensureProperty(idx);
          const base = Number(prop.prices[key]) || 0;
          state.dynamicPrices[idx][key] = {
            base,
            live: base,
            lastUpdate: Date.now()
          };
        }
      });
    }

    function syncDynamicBase(idx, key, base){
      ensureDynamicStore(idx);
      const record = state.dynamicPrices[idx][key];
      if (!record) return;
      record.base = Number(base) || 0;
      record.live = record.base;
      record.lastUpdate = Date.now();
    }

    function getLivePrice(idx, key){
      // Usar SIEMPRE el precio ingresado en admin, sin variación
      const prop = ensureProperty(idx);
      const val = prop && prop.prices ? prop.prices[key] : 0;
      return Number(val) || 0;
    }

    function getCompetitorLivePrices(idx){
      ensureDynamicStore(idx);
      return ['expedia','booking','despegar']
        .map(key => getLivePrice(idx, key))
        .filter(val => val > 0);
    }

    function getHighestRetailRate(){
      let highest = 0;
      state.properties.forEach((_, idx) => {
        const prices = getCompetitorLivePrices(idx);
        if (prices.length){
          const candidate = Math.max(...prices);
          if (candidate > highest) highest = candidate;
        }
      });
      return highest || (DEFAULT_AI_NIGHT_VALUE * 2);
    }

    function getAiNightCost(){
      if (state.incentives.aiNight && state.incentives.aiNight > 0) return state.incentives.aiNight;
      const highest = getHighestRetailRate();
      return highest > 0 ? highest : DEFAULT_AI_NIGHT_VALUE;
    }

    function getHyattWeekCost(){
      return state.incentives.hyattWeek && state.incentives.hyattWeek > 0 ? state.incentives.hyattWeek : HYATT_WEEK_VALUE;
    }

    function getRewardCreditValue(){
      return state.incentives.credits && state.incentives.credits > 0 ? state.incentives.credits : INCENTIVE_REWARD_CREDITS;
    }


    function applyPriceDrift(force = false){
      // Desactivado: el price checker debe ser ESTÁTICO según valores del admin
      return;
    }

    configInputs.forEach(input => {
      const field = input.dataset.configField;
      if (!field) return;
      if (field === 'incentive-ai'){
        state.incentives.aiNight = Number(input.value) || 0;
        return;
      }
      if (field === 'incentive-hyatt'){
        state.incentives.hyattWeek = Number(input.value) || HYATT_WEEK_VALUE;
        return;
      }
      if (field === 'incentive-credits'){
        state.incentives.credits = Number(input.value) || INCENTIVE_REWARD_CREDITS;
        return;
      }
      const idx = Number(input.dataset.propertyIndex || 0);
      const prop = ensureProperty(idx);
      if (field === 'destination'){
        prop.destination = input.value;
      } else if (field === 'discount'){
        prop.discount = parseFloat(input.value) || 0;
      } else if (field && field.startsWith('price-')){
        const key = field.replace('price-', '');
        prop.prices[key] = parseFloat(input.value) || 0;
        syncDynamicBase(idx, key, prop.prices[key]);
      }
    });

    loadAdminConfig();
    syncConfigInputsFromState();
    syncStaffInputsFromState();

    state.properties.forEach((_, idx) => ensureDynamicStore(idx));
    applyPriceDrift(true);
    updateBreakeven();

    function formatCurrency(value){
      const locale = state.lang === 'es' ? 'es-MX' : 'en-US';
      try {
        return new Intl.NumberFormat(locale, {
          style: 'currency',
          currency: 'USD',
          maximumFractionDigits: 0
        }).format(Number(value) || 0);
      } catch(err){
        return `$${Math.round(Number(value) || 0)}`;
      }
    }

    function computeUvcPrice(propertyIdx){
      const prop = ensureProperty(propertyIdx);
      const priceValues = getCompetitorLivePrices(propertyIdx);
      if (!priceValues.length) return 0;
      const base = Math.min(...priceValues);
      const discountFactor = (parseFloat(prop.discount) || 0) / 100;
      const raw = base * (1 - discountFactor);
      return Math.max(99, Math.round(raw));
    }

    function calcSavings(propertyIdx){
      const priceValues = getCompetitorLivePrices(propertyIdx);
      if (!priceValues.length) return 0;
      const lowest = Math.min(...priceValues);
      if (!isFinite(lowest) || lowest <= 0) return 0;
      const uvcPrice = computeUvcPrice(propertyIdx);
      if (!uvcPrice) return 0;
      return Math.max(0, Math.round(((lowest - uvcPrice) / lowest) * 100));
    }

    function updateBreakeven(){
      if (!breakevenBars || !breakevenOutputs.tripSavings) return;
      const isEs = state.lang === 'es';
      const membershipCost = Math.max(0, parseFloat(breakevenInputs.membership && breakevenInputs.membership.value || '0') || 0);
      const trips = Math.max(0, parseFloat(breakevenInputs.trips && breakevenInputs.trips.value || '0') || 0);
      const years = Math.max(1, parseInt(breakevenInputs.years && breakevenInputs.years.value || '1', 10) || 1);
      const nights = Math.max(1, parseFloat(breakevenInputs.nights && breakevenInputs.nights.value || '0') || 1);
      const travelers = Math.max(1, parseFloat(breakevenInputs.travelers && breakevenInputs.travelers.value || '0') || 1);
      const retailNight = Math.max(0, parseFloat(breakevenInputs.retailNight && breakevenInputs.retailNight.value || '0') || 0);
      const memberNight = Math.max(0, parseFloat(breakevenInputs.memberNight && breakevenInputs.memberNight.value || '0') || 0);
      const extraRetail = Math.max(0, parseFloat(breakevenInputs.extraRetail && breakevenInputs.extraRetail.value || '0') || 0);
      let extraDiscount = parseFloat(breakevenInputs.extraDiscount && breakevenInputs.extraDiscount.value || '0') || 0;
      if (extraDiscount < 0) extraDiscount = 0;
      if (extraDiscount > 100) extraDiscount = 100;
      const retailTripBase = travelers * nights * retailNight;
      const memberTripBase = travelers * nights * memberNight;
      const memberExtras = extraRetail * (1 - extraDiscount / 100);
      const tripRetail = retailTripBase + extraRetail;
      const tripMember = memberTripBase + memberExtras;
      const perTrip = Math.max(0, tripRetail - tripMember);
      const annual = perTrip * trips;
      const dataset = [];
      let cumulative = 0;
      let breakYear = null;

      for (let year = 1; year <= years; year++){
        cumulative += annual;
        dataset.push({ year, cumulative });
        if (breakYear === null && membershipCost > 0 && perTrip > 0 && cumulative >= membershipCost){
          breakYear = year;
        }
      }

      if (breakevenOutputs.tripRetail) breakevenOutputs.tripRetail.textContent = formatCurrency(tripRetail);
      if (breakevenOutputs.tripMember) breakevenOutputs.tripMember.textContent = formatCurrency(tripMember);
      if (breakevenOutputs.tripSavings) breakevenOutputs.tripSavings.textContent = formatCurrency(perTrip);
      if (breakevenOutputs.annual) breakevenOutputs.annual.textContent = formatCurrency(annual);

      let breakLabel = '--';
      if (!perTrip || !trips){
        breakLabel = isEs ? 'Sin ahorro' : 'No savings';
      } else if (breakYear){
        const yearWord = isEs ? (breakYear === 1 ? 'año' : 'años') : (breakYear === 1 ? 'year' : 'years');
        breakLabel = `${breakYear} ${yearWord}`;
      } else {
        const yearWord = isEs ? (years === 1 ? 'año' : 'años') : (years === 1 ? 'year' : 'years');
        breakLabel = `>${years} ${yearWord}`;
      }
      if (breakevenOutputs.breakEven) breakevenOutputs.breakEven.textContent = breakLabel;

      breakevenBars.innerHTML = '';
      const maxValue = Math.max(
        membershipCost,
        ...dataset.map(item => item.cumulative),
        1
      );
      dataset.forEach(item => {
        const bar = document.createElement('div');
        bar.className = 'be-bar';
        const pct = Math.min(100, Math.max(2, maxValue > 0 ? (item.cumulative / maxValue) * 100 : 0));
        bar.style.height = `${pct}%`;
        const label = isEs ? `Año ${item.year}` : `Year ${item.year}`;
        bar.innerHTML = `<strong>${formatCurrency(item.cumulative)}</strong><span>${label}</span>`;
        if (breakYear && item.year === breakYear){
          bar.classList.add('hit');
        }
        breakevenBars.appendChild(bar);
      });

      if (breakevenMarker){
        if (membershipCost > 0){
          const pct = Math.min(92, Math.max(8, maxValue > 0 ? (membershipCost / maxValue) * 100 : 0));
          breakevenMarker.style.display = 'flex';
          breakevenMarker.style.bottom = `${pct}%`;
        } else {
          breakevenMarker.style.display = 'none';
        }
      }

      // Mostrar recomendación inteligente
      const recommendationEl = document.getElementById('breakeven-recommendation');
      const recommendationText = document.getElementById('recommendation-text');
      if (recommendationEl && recommendationText) {
        if (breakYear && breakYear <= 2) {
          recommendationEl.style.display = 'flex';
          const savingsPercent = membershipCost > 0 ? Math.round((perTrip * trips * years / membershipCost) * 100) : 0;
          const message = isEs 
            ? `¡Excelente inversión! La membresía se paga en solo ${breakYear} ${breakYear === 1 ? 'año' : 'años'}, generando un retorno del ${savingsPercent}% en ${years} años. ${trips > 1 ? 'Con ' + trips + ' viajes al año, el ahorro se multiplica.' : ''}`
            : `Excellent investment! Membership pays for itself in just ${breakYear} ${breakYear === 1 ? 'year' : 'years'}, generating a ${savingsPercent}% return over ${years} years. ${trips > 1 ? 'With ' + trips + ' trips per year, savings multiply.' : ''}`;
          recommendationText.textContent = message;
        } else if (perTrip > 0 && annual > membershipCost * 0.3) {
          recommendationEl.style.display = 'flex';
          const message = isEs
            ? `Buen valor a largo plazo. Ahorros anuales de ${formatCurrency(annual)} representan un ${Math.round((annual / membershipCost) * 100)}% del costo de membresía por año.`
            : `Good long-term value. Annual savings of ${formatCurrency(annual)} represent ${Math.round((annual / membershipCost) * 100)}% of membership cost per year.`;
          recommendationText.textContent = message;
        } else {
          recommendationEl.style.display = 'none';
        }
      }

    }

    function sanitizeQuickCalcExpression(expr){
      if (!expr) return '';
      const allowed = expr.replace(/[^0-9+\-*/().,%×÷\s]/g, '');
      return allowed
        .replace(/×/g, '*')
        .replace(/÷/g, '/')
        .replace(/,/g, '')
        .replace(/\s+/g, '')
        .replace(/%/g, '*0.01');
    }

    function refreshQuickCalcDisplay(){
      if (!quickCalcDisplay) return;
      quickCalcDisplay.textContent = quickCalcExpression || '0';
    }

    function evaluateQuickCalcExpression(){
      if (!quickCalcResult) return;
      if (!quickCalcExpression.trim()){
        quickCalcResult.textContent = '--';
        return;
      }
      const normalized = sanitizeQuickCalcExpression(quickCalcExpression);
      if (!normalized.trim()){
        quickCalcResult.textContent = state.lang === 'es' ? 'Inválido' : 'Invalid';
        return;
      }
      try {
        // eslint-disable-next-line no-new-func
        const value = Function('"use strict"; return (' + normalized + ')')();
        if (!isFinite(value)){
          throw new Error('Invalid');
        }
        const formatted = Number(value).toLocaleString(
          state.lang === 'es' ? 'es-MX' : 'en-US',
          { maximumFractionDigits: 4 }
        );
        quickCalcResult.textContent = formatted;
        quickCalcExpression = String(value);
        refreshQuickCalcDisplay();
      } catch(err){
        quickCalcResult.textContent = state.lang === 'es' ? 'Error' : 'Error';
      }
    }

    function handleQuickCalcAction(action, value){
      if (!quickCalcDisplay) return;
      switch(action){
        case 'clear':
          quickCalcExpression = '';
          refreshQuickCalcDisplay();
          if (quickCalcResult) quickCalcResult.textContent = '--';
          return;
        case 'delete':
          quickCalcExpression = quickCalcExpression.slice(0, -1);
          refreshQuickCalcDisplay();
          return;
        case 'equals':
          evaluateQuickCalcExpression();
          return;
        default:
          break;
      }
      if (value){
        quickCalcExpression += value;
        refreshQuickCalcDisplay();
      }
    }

    function updateIncentiveCalculator(){
      if (!incentiveInput.investment || !incentiveOutputs.total) return;
      const investment = Math.max(0, parseFloat(incentiveInput.investment.value || '0') || 0);
      const nights = Math.max(0, parseFloat(incentiveInput.nights.value || '0') || 0);
      const weeks = Math.max(0, parseFloat(incentiveInput.weeks.value || '0') || 0);
      const credits = Math.max(0, parseFloat(incentiveInput.credits.value || '0') || 0);
      const nightCost = getAiNightCost();
      const hyattCost = getHyattWeekCost();
      const creditUnit = getRewardCreditValue() || 1;
      const nightsValue = nights * nightCost;
      const weeksValue = weeks * hyattCost;
      const creditsValue = credits * creditUnit;
      const totalValue = nightsValue + weeksValue + creditsValue;
      const roiPercent = investment > 0 ? (totalValue / investment) * 100 : 0;
      const roi = investment > 0 ? Math.round(roiPercent) : 0;
      incentiveOutputs.nightsValue.textContent = formatCurrency(nightsValue);
      incentiveOutputs.weeksValue.textContent = formatCurrency(weeksValue);
      incentiveOutputs.creditsValue.textContent = formatCurrency(creditsValue);
      incentiveOutputs.total.textContent = formatCurrency(totalValue);
      incentiveOutputs.roi.textContent = investment ? `${roi}%` : '--';
      const chart = incentiveOutputs.chart;
      if (chart){
        const scaleBase = Math.max(roiPercent || 0, 100);
        if (chart.bars.investment){
          chart.bars.investment.style.height = '100%';
          if (chart.investmentLabel) chart.investmentLabel.textContent = formatCurrency(investment);
        }
        if (chart.bars.returned){
          const returnedPct = investment > 0 ? Math.min(200, roiPercent) : 0;
          const height = Math.max(6, Math.min(100, (returnedPct / scaleBase) * 100));
          chart.bars.returned.style.height = `${height}%`;
          if (chart.returnedLabel) chart.returnedLabel.textContent = formatCurrency(totalValue);
        }
        if (chart.marker){
          if (roiPercent > 0){
            chart.marker.style.display = 'flex';
            const markerPct = Math.min(95, Math.max(5, (roiPercent / scaleBase) * 100));
            chart.marker.style.bottom = `${markerPct}%`;
            if (chart.markerLabel){
              chart.markerLabel.textContent = state.lang === 'es'
                ? `ROI ${roi}%`
                : `ROI ${roi}%`;
            }
          } else {
            chart.marker.style.display = 'none';
          }
        }
        if (chart.baseline){
          if (investment > 0){
            chart.baseline.style.display = 'flex';
            chart.baseline.style.bottom = `${Math.min(95, Math.max(5, (100 / scaleBase) * 100))}%`;
            if (chart.baselineLabel){
              chart.baselineLabel.textContent = state.lang === 'es' ? 'Inversión 100%' : 'Investment 100%';
            }
          } else {
            chart.baseline.style.display = 'none';
          }
        }
      }
    }


    function setPriceText(propertyIdx, target, value){
      const map = propertyPriceTargets[propertyIdx];
      if (!map) return;
      const el = map[target];
      if (!el) return;
      el.textContent = formatCurrency(value);
    }

    function updatePriceUI(){
      const totalProperties = Math.max(
        state.properties.length,
        Object.keys(propertyNameTargets).length
      );
      let bestSavings = 0;

      for (let idx = 0; idx < totalProperties; idx++){
        const prop = ensureProperty(idx);
        const uvcPrice = computeUvcPrice(idx);
        ['expedia','booking','despegar'].forEach(key => {
          setPriceText(idx, key, getLivePrice(idx, key));
        });
        setPriceText(idx, 'uvc', uvcPrice);
        if (uvcSummaryOutputs[idx]){
          uvcSummaryOutputs[idx].textContent = formatCurrency(uvcPrice);
        }

        const label = prop.destination || `Property ${idx + 1}`;
        if (propertyNameTargets[idx]){
          propertyNameTargets[idx].textContent = label;
        }
        if (configTitleTargets[idx]){
          configTitleTargets[idx].textContent = label;
        }
        if (summaryOutputs[idx]){
          summaryOutputs[idx].textContent = `${label} · ${formatCurrency(uvcPrice)}`;
        }
        if (configSummaryOutputs[idx]){
          configSummaryOutputs[idx].textContent = formatCurrency(uvcPrice);
        }
        if (configSummaryLabels[idx]){
          configSummaryLabels[idx].textContent = label;
        }

        const savings = calcSavings(idx);
        bestSavings = Math.max(bestSavings, savings);
        if (propertySavingsTargets[idx]){
          const template = getTranslation('priceChecker.savingsInline');
          propertySavingsTargets[idx].textContent = template
            ? template.replace('{value}', savings)
            : `Savings ${savings}%`;
        }
      }

      if (priceCheckerNote){
        const template = getTranslation('priceChecker.note');
        priceCheckerNote.textContent = template.replace('{value}', bestSavings);
      }
      updateIncentiveCalculator();
    }

    function syncLangButtons(){
      qa('.lang-pill[data-lang]').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === state.lang);
      });
    }

    function applyTranslations(lang){
      const dict = translations[lang] || translations.es;
      qa('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (!key || !dict[key]) return;
        
        // Preservar links internos (como el de +125 Resorts)
        const link = el.querySelector('a.benefit-link');
        if (link) {
          link.textContent = dict[key];
        } else {
          el.textContent = dict[key];
        }
      });
      if (pinStatus && pinStatus.dataset.status){
        const statusKey = pinStatus.dataset.status === 'success' ? 'home.pinSuccess' : 'home.pinError';
        pinStatus.textContent = getTranslation(statusKey);
      }
    }

    function setLanguage(lang){
      if (!translations[lang]) lang = 'es';
      state.lang = lang;
      document.documentElement.setAttribute('lang', lang);
      syncLangButtons();
      applyTranslations(lang);
      updatePriceUI();
      updateBreakeven();
      updateIncentiveCalculator();
      updateStaffOptions();
    }

    function setConfigInputsDisabled(flag){
      configInputs.forEach(input => {
        input.disabled = flag;
      });
      staffInputs.forEach(input => {
        input.disabled = flag;
      });
      configSaveButtons.forEach(btn => {
        btn.disabled = flag;
      });
      if (homeConfig){
        homeConfig.classList.toggle('locked', !!flag);
      }
      if (configLockedMessage){
        configLockedMessage.hidden = !flag;
      }
      if (relockBtn){
        relockBtn.hidden = !!flag;
      }
    }

    function setPinStatus(type){
      if (!pinStatus) return;
      pinStatus.dataset.status = type;
      pinStatus.style.color = type === 'success' ? '#1f7c4d' : '#d4444f';
      const key = type === 'success' ? 'home.pinSuccess' : 'home.pinError';
      pinStatus.textContent = getTranslation(key);
    }

    function updateSaleStats(){
      if (saleWinCount) saleWinCount.textContent = state.sales.win;
      if (saleLossCount) saleLossCount.textContent = state.sales.pending;
      updateAnalyticsUI();
    }

    function updateReportControls(){
      const hasData = Array.isArray(state.sales.entries) && state.sales.entries.length > 0;
      if (downloadSalesReportBtn){
        downloadSalesReportBtn.disabled = !hasData;
      }
      const downloadSalesReportBtnSettings = q('#download-sales-report-settings');
      if (downloadSalesReportBtnSettings){
        downloadSalesReportBtnSettings.disabled = !hasData;
      }
    }

    function aggregateRoleStats(role){
      const map = {};
      
      (state.sales.entries || []).forEach(entry => {
        const name = entry && entry[role];
        if (!name || !name.trim()) return;
        
        const normalizedName = name.trim();
        if (!map[normalizedName]){
          map[normalizedName] = { name: normalizedName, wins: 0, attempts: 0, amount: 0 };
        }
        map[normalizedName].attempts++;
        if (entry.result === 'win'){
          map[normalizedName].wins++;
          map[normalizedName].amount += Number(entry.amount) || 0;
        }
      });
      return Object.values(map).sort((a, b) => b.amount - a.amount);
    }

    function renderRanking(listEl, stats){
      if (!listEl) return;
      listEl.innerHTML = '';
      if (!stats.length){
        const li = document.createElement('li');
        li.textContent = getTranslation('analytics.noData') || 'No data';
        listEl.appendChild(li);
        return;
      }
      stats.slice(0, 5).forEach((item, index) => {
        const li = document.createElement('li');
        const row = document.createElement('div');
        row.className = 'ranking-row';
        const nameSpan = document.createElement('span');
        nameSpan.textContent = `${index + 1}. ${item.name}`;
        const valueSpan = document.createElement('span');
        valueSpan.textContent = formatCurrency(item.amount);
        row.appendChild(nameSpan);
        row.appendChild(valueSpan);
        const details = document.createElement('small');
        const rate = item.attempts ? Math.round((item.wins / item.attempts) * 100) : 0;
        details.textContent = `${item.wins}/${item.attempts || 0} · ${rate}%`;
        li.appendChild(row);
        li.appendChild(details);
        listEl.appendChild(li);
      });
    }

    function updateAnalyticsUI(){
      const entries = state.sales.entries || [];
      const wins = entries.filter(entry => entry && entry.result === 'win');
      const attempts = entries.length;
      const totalVolume = wins.reduce((sum, entry) => sum + (Number(entry.amount) || 0), 0);
      const avgSale = wins.length ? totalVolume / wins.length : 0;
      
      if (metricAvgSale) metricAvgSale.textContent = wins.length ? formatCurrency(avgSale) : '--';
      const conversion = attempts ? Math.round((wins.length / attempts) * 100) : 0;
      if (metricConversion) metricConversion.textContent = `${conversion}%`;
      if (metricTotalVolume) metricTotalVolume.textContent = formatCurrency(totalVolume);
      if (metricTotalPitches) metricTotalPitches.textContent = attempts;

      const clarityScores = entries
        .filter(entry => entry && entry.result === 'loss' && Number(entry.clarity) > 0)
        .map(entry => Number(entry.clarity));
      if (metricClarity){
        if (clarityScores.length){
          const clarityAvg = clarityScores.reduce((a,b)=>a+b,0) / clarityScores.length;
          metricClarity.textContent = `${clarityAvg.toFixed(1)} / 5`;
        } else {
          metricClarity.textContent = '--';
        }
      }

      const periods = {
        day: 24 * 60 * 60 * 1000,
        week: 7 * 24 * 60 * 60 * 1000,
        biweek: 14 * 24 * 60 * 60 * 1000
      };
      const now = Date.now();
      
      let dayVolume = 0;
      Object.keys(volumeOutputs).forEach(key => {
        const el = volumeOutputs[key];
        if (!el) return;
        const range = periods[key];
        const amount = wins
          .filter(entry => {
            const time = Date.parse(entry.timestamp || '');
            return isFinite(time) && (now - time) <= range;
          })
          .reduce((sum, entry) => sum + (Number(entry.amount) || 0), 0);
        el.textContent = formatCurrency(amount);
        if (key === 'day') dayVolume = amount;
      });

      // Calculate best day
      const salesByDay = {};
      wins.forEach(entry => {
        const date = new Date(entry.timestamp || '');
        if (!isNaN(date.getTime())) {
          const dayKey = date.toISOString().split('T')[0];
          salesByDay[dayKey] = (salesByDay[dayKey] || 0) + (Number(entry.amount) || 0);
        }
      });
      const bestDayAmount = Math.max(0, ...Object.values(salesByDay));
      if (metricBestDay) {
        metricBestDay.textContent = bestDayAmount > 0 ? formatCurrency(bestDayAmount) : '--';
      }

      // Monthly projection (based on daily average)
      const daysWithSales = Object.keys(salesByDay).length;
      if (metricMonthlyProj) {
        if (daysWithSales > 0) {
          const dailyAvg = totalVolume / daysWithSales;
          const monthlyProjection = dailyAvg * 30;
          metricMonthlyProj.textContent = formatCurrency(monthlyProjection);
        } else {
          metricMonthlyProj.textContent = '$0';
        }
      }

      const linerStats = aggregateRoleStats('liner');
      const closerStats = aggregateRoleStats('closer');
      renderRanking(rankingLists.liner, linerStats);
      renderRanking(rankingLists.closer, closerStats);

      const topLiner = linerStats[0];
      const topCloser = closerStats[0];
      if (topLinerName) topLinerName.textContent = topLiner ? topLiner.name : '--';
      if (topLinerAmount) topLinerAmount.textContent = topLiner ? formatCurrency(topLiner.amount) : formatCurrency(0);
      if (topCloserName) topCloserName.textContent = topCloser ? topCloser.name : '--';
      if (topCloserAmount) topCloserAmount.textContent = topCloser ? formatCurrency(topCloser.amount) : formatCurrency(0);

      const maxComparison = Math.max(
        topLiner ? topLiner.amount : 0,
        topCloser ? topCloser.amount : 0,
        1
      );
      if (comparisonBars.liner){
        const pct = Math.round(((topLiner ? topLiner.amount : 0) / maxComparison) * 100);
        comparisonBars.liner.style.width = `${pct}%`;
      }
      if (comparisonBars.closer){
        const pct = Math.round(((topCloser ? topCloser.amount : 0) / maxComparison) * 100);
        comparisonBars.closer.style.width = `${pct}%`;
      }
      if (comparisonValues.liner){
        comparisonValues.liner.textContent = formatCurrency(topLiner ? topLiner.amount : 0);
      }
      if (comparisonValues.closer){
        comparisonValues.closer.textContent = formatCurrency(topCloser ? topCloser.amount : 0);
      }
    }

    function resetSaleOverlay(){
      if (saleChoiceSection){
        saleChoiceSection.classList.remove('hidden');
      }
      Object.values(saleForms).forEach(form => {
        if (form){
          form.classList.remove('active');
          if (typeof form.reset === 'function') form.reset();
        }
      });
    }

    function ensureSaleStaffSelected(showMessage = false){
      const ready = !!(state.session.liner && state.session.closer);
      if (saleStaffError){
        if (ready){
          saleStaffError.textContent = '';
        } else if (showMessage){
          saleStaffError.textContent = getTranslation('sale.staffError') || 'Selecciona el liner y el closer antes de continuar.';
        } else {
          saleStaffError.textContent = '';
        }
      }
      return ready;
    }

    // --- Staff picker (custom dropdown using admin lists) ---
    let staffPickerMenu = null;
    function closeStaffPicker(){
      if (staffPickerMenu){
        staffPickerMenu.remove();
        staffPickerMenu = null;
        document.removeEventListener('click', onStaffPickerDocClick);
        document.removeEventListener('keydown', onStaffPickerKey);
      }
    }
    function onStaffPickerDocClick(ev){
      if (!staffPickerMenu) return;
      if (!ev.target.closest('.staff-picker') && !ev.target.closest('#sale-liner-input') && !ev.target.closest('#sale-closer-input')){
        closeStaffPicker();
      }
    }
    function onStaffPickerKey(ev){
      if (ev.key === 'Escape') closeStaffPicker();
    }
    function openStaffPicker(role){
      const input = saleStaffInputs[role];
      if (!input) return;
      const names = role === 'liner' ? (state.staff.liners || []) : (state.staff.closers || []);
      if (!names.length) return;
      closeStaffPicker();
      const rect = input.getBoundingClientRect();
      const menu = document.createElement('div');
      menu.className = 'staff-picker';
      names.forEach(name => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = name;
        btn.addEventListener('click', ()=>{
          input.value = name;
          state.session[role] = name;
          persistSessionData();
          ensureSaleStaffSelected(false);
          closeStaffPicker();
        });
        menu.appendChild(btn);
      });
      document.body.appendChild(menu);
      const top = rect.bottom + window.scrollY;
      let left = rect.left + window.scrollX;
      if (left + menu.offsetWidth > window.innerWidth - 12){
        left = window.innerWidth - menu.offsetWidth - 12;
      }
      menu.style.top = `${top + 4}px`;
      menu.style.left = `${left}px`;
      staffPickerMenu = menu;
      document.addEventListener('click', onStaffPickerDocClick);
      document.addEventListener('keydown', onStaffPickerKey);
    }

    function showSaleForm(type){
      if (!saleForms[type]) return;
      if (saleChoiceSection){
        saleChoiceSection.classList.add('hidden');
      }
      Object.keys(saleForms).forEach(key => {
        const form = saleForms[key];
        if (form){
          form.classList.toggle('active', key === type);
        }
      });
    }

    function openSaleOverlay(){
      if (!saleOverlay) {
        return;
      }
      state.session.liner = '';
      state.session.closer = '';
      persistSessionData();
      syncSessionInputs();
      ensureSaleStaffSelected(false);
      resetSaleOverlay();
      saleOverlay.classList.add('active');
    }

    function closeSaleOverlay(){
      if (saleOverlay) saleOverlay.classList.remove('active');
      resetSaleOverlay();
    }

    function getOptionLabel(option){
      if (!option) return '';
      const key = option.dataset ? option.dataset.i18n : null;
      if (key){
        const translated = getTranslation(key);
        if (translated) return translated;
      }
      return option.textContent ? option.textContent.trim() : '';
    }

    function buildSaleEntry(type){
      if (!ensureSaleStaffSelected(true)) return null;
      const isWin = type === 'win';
      const q1El = q(isWin ? '#sale-win-q1' : '#sale-loss-q1');
      const q2El = q(isWin ? '#sale-win-q2' : '#sale-loss-q2');
      const q3El = !isWin ? q('#sale-loss-q3') : null;
      const notesEl = q(isWin ? '#sale-win-notes' : '#sale-loss-notes');
      const amountEl = isWin ? q('#sale-win-amount') : null;
      const q1Option = q1El && q1El.options[q1El.selectedIndex];
      const q2Option = q2El && q2El.options[q2El.selectedIndex];
      const q3Option = q3El && q3El.options[q3El.selectedIndex];

      const entry = {
        timestamp: new Date().toISOString(),
        lang: state.lang,
        liner: state.session.liner,
        closer: state.session.closer,
        amount: isWin ? Number(amountEl && amountEl.value) || 0 : 0,
        clarity: !isWin ? Number(q2El && q2El.value) || 0 : null,
        answers: [],
        notes: notesEl ? notesEl.value.trim() : ''
      };

      entry.answers.push({
        question: getTranslation(isWin ? 'sale.winQ1' : 'sale.lossQ1'),
        answer: getOptionLabel(q1Option)
      });
      entry.answers.push({
        question: getTranslation(isWin ? 'sale.winQ2' : 'sale.lossQ2'),
        answer: getOptionLabel(q2Option)
      });
      if (!isWin && q3Option){
        entry.answers.push({
          question: getTranslation('sale.lossQ3'),
          answer: getOptionLabel(q3Option)
        });
      }

      return entry;
    }

    function recordSale(resultKey, payload){
      if (!payload){
        return;
      }
      if (resultKey === 'win') state.sales.win++;
      if (resultKey === 'loss') state.sales.pending++;
      state.sales.entries.push({
        ...payload,
        result: resultKey
      });
      persistSalesData();
      updateSaleStats();
      updateReportControls();
      updateAnalyticsUI();
      closeSaleOverlay();
    }

    function resetSalesHistory(){
      state.sales.win = 0;
      state.sales.pending = 0;
      state.sales.entries = [];
      persistSalesData();
      updateSaleStats();
      updateReportControls();
      updateAnalyticsUI();
    }

    function escapeCsvValue(value){
      const text = (value == null ? '' : String(value)).replace(/\r?\n/g, ' ').trim();
      if (text.includes('"') || text.includes(',')){
        return `"${text.replace(/"/g, '""')}"`;
      }
      return text;
    }

    function buildSalesCsv(){
      const rows = [
        ['Timestamp','Result','Language','Liner','Closer','Amount USD','Clarity','Question 1','Answer 1','Question 2','Answer 2','Question 3','Answer 3','Notes']
      ];
      (state.sales.entries || []).forEach(entry => {
        const ans1 = entry.answers && entry.answers[0] || {};
        const ans2 = entry.answers && entry.answers[1] || {};
        const ans3 = entry.answers && entry.answers[2] || {};
        rows.push([
          entry.timestamp || '',
          entry.result || '',
          entry.lang || '',
          entry.liner || '',
          entry.closer || '',
          Number(entry.amount || 0),
          entry.clarity || '',
          ans1.question || '',
          ans1.answer || '',
          ans2.question || '',
          ans2.answer || '',
          ans3.question || '',
          ans3.answer || '',
          entry.notes || ''
        ].map(escapeCsvValue));
      });
      return rows.map(row => row.join(',')).join('\n');
    }

    function downloadSalesReport(){
      if (!state.sales.entries || !state.sales.entries.length) return;
      const csv = buildSalesCsv();
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      const date = new Date().toISOString().slice(0,10);
      link.download = `uvc-sales-${date}.csv`;
      document.body.appendChild(link);
      link.click();
      setTimeout(()=>{
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      }, 0);
    }

    function relockPanel(){
      state.pinUnlocked = false;
      setConfigInputsDisabled(true);
      if (pinStatus){
        pinStatus.dataset.status = '';
        pinStatus.textContent = '';
      }
    }

    function handleConfigInput(ev){
      if (!state.pinUnlocked) return;
      const input = ev.target;
      const field = input.dataset.configField;
      if (!field) return;
      if (field === 'incentive-ai'){
        state.incentives.aiNight = Number(input.value) || 0;
        updateIncentiveCalculator();
        persistAdminConfig();
        return;
      }
      if (field === 'incentive-hyatt'){
        state.incentives.hyattWeek = Number(input.value) || HYATT_WEEK_VALUE;
        updateIncentiveCalculator();
        persistAdminConfig();
        return;
      }
      if (field === 'incentive-credits'){
        state.incentives.credits = Number(input.value) || INCENTIVE_REWARD_CREDITS;
        updateIncentiveCalculator();
        persistAdminConfig();
        return;
      }
      const idx = Number(input.dataset.propertyIndex || 0);
      const prop = ensureProperty(idx);
      if (field === 'destination'){
        prop.destination = input.value;
      } else if (field === 'discount'){
        prop.discount = parseFloat(input.value) || 0;
      } else if (field.startsWith('price-')){
        const key = field.replace('price-', '');
        prop.prices[key] = parseFloat(input.value) || 0;
        syncDynamicBase(idx, key, prop.prices[key]);
      }
      updatePriceUI();
      persistAdminConfig();
    }

    function handleConfigSave(ev){
      if (!state.pinUnlocked) return;
      const btn = ev.currentTarget;
      const idx = Number(btn && btn.dataset.configSave || 0);
      syncPropertyFromInputs(idx);
      updatePriceUI();
      persistAdminConfig();
    }

    function togglePriceChecker(force){
      if (!priceCheckerPanel) return;
      applyPriceDrift(true);
      updatePriceUI();
      const show = typeof force === 'boolean' ? force : !priceCheckerPanel.classList.contains('active');
      priceCheckerPanel.classList.toggle('active', show);
    }

    function closeHomeScreen(){
      if (homeScreen){
        homeScreen.classList.remove('active');
      }
    }

    function openHomeScreen(){
      if (homeScreen){
        homeScreen.classList.add('active');
      }
    }

    sessionInputs.forEach(input => {
      const field = input.dataset.sessionField;
      if (!field) return;
      input.addEventListener('input', ()=>{
        state.session[field] = input.value.trim();
        persistSessionData();
        sessionInputs.forEach(other => {
          if (other === input) return;
          if (other.dataset.sessionField === field){
            other.value = state.session[field];
          }
        });
        if (state.session.liner && state.session.closer){
          ensureSaleStaffSelected(false);
        }
        updateReportControls();
      });
    });

    syncSessionInputs();

    setConfigInputsDisabled(!state.pinUnlocked);

    configInputs.forEach(input => {
      input.addEventListener('input', handleConfigInput);
    });

    staffInputs.forEach(input => {
      input.addEventListener('input', ()=>{
        if (!state.pinUnlocked) return;
        const field = input.dataset.staffField;
        if (!field || !state.staff[field]) return;
        state.staff[field] = parseStaffList(input.value);
        updateStaffOptions();
        persistAdminConfig();
      });
    });

    configSaveButtons.forEach(btn => {
      btn.addEventListener('click', handleConfigSave);
    });

    if (utilityToggle){
      utilityToggle.addEventListener('click', (ev)=>{
        ev.preventDefault();
        toggleUtilityMenu();
      });
    }

    function openSimulatorTab(key='retail', scroll=true){
      if (!simulatorPanel) return;
      const valid = ['retail','incentives','calc'];
      if (!valid.includes(key)) key = 'retail';
      simulatorTabs.forEach(btn => {
        btn.classList.toggle('active', btn.dataset.simTab === key);
      });
      simulatorViews.forEach(view => {
        view.classList.toggle('active', view.dataset.simView === key);
      });
      if (scroll){
        simulatorPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
        simulatorPanel.classList.add('flash');
        if (breakevenFlashTimeout) clearTimeout(breakevenFlashTimeout);
        breakevenFlashTimeout = setTimeout(()=>{
          simulatorPanel.classList.remove('flash');
        }, 800);
      }
    }

    simulatorTabs.forEach(btn => {
      btn.addEventListener('click', ()=>{
        openSimulatorTab(btn.dataset.simTab || 'break', false);
      });
    });

    simulatorOpenButtons.forEach(btn => {
      btn.addEventListener('click', ()=>{
        closeUtilityMenu();
        openSimulatorTab(btn.dataset.simOpen || 'break', true);
      });
    });

    openSimulatorTab('retail', false);

    if (breakevenForm){
      breakevenForm.addEventListener('input', ()=>{
        updateBreakeven();
      });
      breakevenForm.addEventListener('submit', (ev)=> ev.preventDefault());
    }



    refreshQuickCalcDisplay();
    if (quickCalcResult) quickCalcResult.textContent = '--';

    if (quickCalcButtons.length){
      quickCalcButtons.forEach(btn => {
        btn.addEventListener('click', ()=>{
          const action = btn.dataset.quickcalcAction || null;
          const value = btn.dataset.quickcalcValue || '';
          handleQuickCalcAction(action, value);
        });
      });
    }

    updateIncentiveCalculator();
    Object.values(incentiveInput).forEach(input => {
      if (!input) return;
      input.addEventListener('input', ()=>{
        updateIncentiveCalculator();
      });
    });

    if (pinForm){
      pinForm.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        const value = (pinInput && pinInput.value || '').trim();
        if (value === PIN_CODE){
          state.pinUnlocked = true;
          setConfigInputsDisabled(false);
          setPinStatus('success');
          showToast('Panel de administración desbloqueado', 'success', 2500);
        } else {
          setPinStatus('error');
          showToast('PIN incorrecto', 'error', 2500);
        }
        if (pinInput) pinInput.value = '';
      });
    }

    if (relockBtn){
      relockBtn.addEventListener('click', ()=>{
        relockPanel();
        showToast('Panel bloqueado', 'info', 2000);
      });
    }

    // Admin tabs functionality
    const adminTabButtons = qa('.admin-tab-btn');
    const adminSections = qa('.admin-section');
    
    adminTabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const targetTab = btn.dataset.tab;
        
        // Remove active from all buttons and sections
        adminTabButtons.forEach(b => b.classList.remove('active'));
        adminSections.forEach(s => s.classList.remove('active'));
        
        // Add active to clicked button and corresponding section
        btn.classList.add('active');
        const targetSection = q(`[data-section="${targetTab}"]`);
        if (targetSection) {
          targetSection.classList.add('active');
        }
      });
    });

    // Secret key combination to access admin panel (Ctrl+Shift+A)
    document.addEventListener('keydown', (ev) => {
      const key = ev.key.toLowerCase();
      // Abrir admin: Ctrl+Shift+A
      if (ev.ctrlKey && ev.shiftKey && key === 'a') {
        ev.preventDefault();
        if(utilityMenu) utilityMenu.classList.remove('active');
        if(priceCheckerPanel) priceCheckerPanel.classList.remove('active');
        if(homeScreen) homeScreen.classList.add('active');
      }
    });

    if (startDemoBtn){
      startDemoBtn.addEventListener('click', ()=>{
        closeHomeScreen();
        togglePriceChecker(false);
      });
    }

    if (closePitchBtn){
      closePitchBtn.addEventListener('click', ()=>{
        closeUtilityMenu();
        togglePriceChecker(false);
        openSaleOverlay();
      });
    }

    if (priceCheckerToggle){
      priceCheckerToggle.addEventListener('click', ()=>{
        closeUtilityMenu();
        togglePriceChecker();
      });
    }

    if (priceCheckerClose){
      priceCheckerClose.addEventListener('click', ()=>{
        togglePriceChecker(false);
      });
    }

    // Home button handler
    const homeBtn = q('#home-btn');
    if (homeBtn){
      homeBtn.addEventListener('click', ()=>{
        closeUtilityMenu();
        togglePriceChecker(false);
        openHomeScreen();
      });
    }

    // ---- Admin UVC discount configuration ----
    const adminDiscountInput = document.getElementById('admin-uvc-discount');
    
    function getUVCDiscount(){
      const val = adminDiscountInput?.value;
      const pct = Number(val);
      return (isFinite(pct) && pct >= 0 && pct <= 100) ? pct / 100 : 0.35;
    }


      // Botón de actualización de precios en tiempo real
      if (priceCheckerRefresh){
        priceCheckerRefresh.addEventListener('click', async ()=>{
          const btn = priceCheckerRefresh;
          const icon = btn.querySelector('.pc-refresh-icon');
          const lastUpdatedEl = q('#pc-last-updated');
          btn.disabled = true;
          if (icon) icon.classList.add('spinning');
          if (lastUpdatedEl) lastUpdatedEl.textContent = '🔄 Actualizando...';
          qa('.pc-section').forEach(s=>s.classList.add('loading'));
          
          try {
            // Leer precios directamente del admin y actualizar
            updatePriceUI();
            
            // Simular delay mínimo
            await new Promise(resolve => setTimeout(resolve, 300));
            
            const now = new Date();
            const timeStr = now.toLocaleTimeString('es-MX', { hour: '2-digit', minute: '2-digit' });
            if (lastUpdatedEl) lastUpdatedEl.textContent = `✅ Actualizado ${timeStr}`;
          } catch (e) {
            console.error('Refresh error', e);
            if (lastUpdatedEl) lastUpdatedEl.textContent = '⚠️ Error al actualizar';
          } finally {
            btn.disabled = false;
            if (icon) icon.classList.remove('spinning');
            qa('.pc-section').forEach(s=>s.classList.remove('loading'));
          }
        });
      }

      // Función auxiliar para actualizar UI con datos del backend (DEPRECADA - usar distributePricesForProperty)
      function distributePricesAcrossProperties(priceData){
        const props = [0,1];
        const uvcDiscount = getUVCDiscount();
        props.forEach(idx => {
          distributePricesForProperty(idx, priceData);
        });
      }
      
      // Admin: Aplicar precios manuales y guardarlos en localStorage
      const applyPricesBtn = q('#admin-apply-prices');
      if (applyPricesBtn) {
        applyPricesBtn.addEventListener('click', () => {
          const secretsBooking = parseInt(q('#secrets-booking')?.value) || 0;
          const secretsExpedia = parseInt(q('#secrets-expedia')?.value) || 0;
          const secretsDespegar = parseInt(q('#secrets-despegar')?.value) || 0;
          
          const zoetryBooking = parseInt(q('#zoetry-booking')?.value) || 0;
          const zoetryExpedia = parseInt(q('#zoetry-expedia')?.value) || 0;
          const zoetryDespegar = parseInt(q('#zoetry-despegar')?.value) || 0;
          
          // Guardar precios base en localStorage
          const basePrices = {
            secrets: {
              booking: secretsBooking,
              expedia: secretsExpedia,
              despegar: secretsDespegar
            },
            zoetry: {
              booking: zoetryBooking,
              expedia: zoetryExpedia,
              despegar: zoetryDespegar
            },
            discounts: {
              secrets: parseFloat(q('[data-config-field="discount"][data-property-index="0"]')?.value) || 0,
              zoetry: parseFloat(q('[data-config-field="discount"][data-property-index="1"]')?.value) || 0
            }
          };
          localStorage.setItem('uvc_base_prices', JSON.stringify(basePrices));
      
          // Bloquear drift y sincronizar al modelo interno
          state.lockedPrices = true;
          // idx 0: Secrets, idx 1: Zoetry
          const secretsIdx = 0, zoetryIdx = 1;
          const setPropPrices = (idx, src) => {
            const prop = ensureProperty(idx);
            prop.prices.booking = Number(src.booking) || 0;
            prop.prices.expedia = Number(src.expedia) || 0;
            prop.prices.despegar = Number(src.despegar) || 0;
            // aplicar descuento si viene
            if (basePrices.discounts){
              if (idx === secretsIdx) prop.discount = Number(basePrices.discounts.secrets) || 0;
              if (idx === zoetryIdx)  prop.discount = Number(basePrices.discounts.zoetry) || 0;
            }
            syncDynamicBase(idx, 'booking', prop.prices.booking);
            syncDynamicBase(idx, 'expedia', prop.prices.expedia);
            syncDynamicBase(idx, 'despegar', prop.prices.despegar);
          };
          setPropPrices(secretsIdx, basePrices.secrets);
          setPropPrices(zoetryIdx, basePrices.zoetry);
      
          // Aplicar inmediatamente sin variación (mostrar exactamente lo del admin)
          updatePriceUI();
      
          showToast('Precios guardados correctamente', 'success', 3000);
        });
      }

      
      // Nueva función: actualiza solo una propiedad específica
      function distributePricesForProperty(propertyIndex, priceData){
        const uvcDiscount = getUVCDiscount();
        const idx = propertyIndex;
        
        const bookingEl  = q(`[data-price-target="booking"][data-property-index="${idx}"]`);
        const expediaEl  = q(`[data-price-target="expedia"][data-property-index="${idx}"]`);
        const despegarEl = q(`[data-price-target="despegar"][data-property-index="${idx}"]`);
        const uvcEl      = q(`[data-price-target="uvc"][data-property-index="${idx}"]`);
        
        const booking = priceData.prices.booking || 0;
        const expedia = priceData.prices.expedia || 0;
        const despegar = priceData.prices.despegar || priceData.prices.hotels || 0;
        const avgPublicPrice = priceData.averagePrice || ((booking+expedia+despegar)/3);
        const uvcPrice = avgPublicPrice * (1-uvcDiscount);
        
        if (bookingEl && booking>0) bookingEl.textContent = `$${Math.round(booking)}`;
        if (expediaEl && expedia>0) expediaEl.textContent = `$${Math.round(expedia)}`;
        if (despegarEl && despegar>0) despegarEl.textContent = `$${Math.round(despegar)}`;
        if (uvcEl) uvcEl.textContent = `$${Math.round(uvcPrice)}`;
        
        const savingsEl = q(`[data-savings-target="${idx}"]`);
        if (savingsEl && priceData.lowestPrice){
          const savings = priceData.lowestPrice - uvcPrice;
          savingsEl.textContent = (state.language==='es'?`Ahorra $`:`Save $`)+ Math.round(savings) + (state.language==='es'?` por noche`:` per night`);
        }
        
        const uvcSummaryEl = q(`[data-uvc-summary="${idx}"]`);
        if (uvcSummaryEl) uvcSummaryEl.textContent = `$${Math.round(uvcPrice)}`;
      }



    document.addEventListener('click', (ev)=>{
      const langBtn = ev.target.closest('.lang-pill[data-lang]');
      if (langBtn){
        ev.preventDefault();
        if (state.pinUnlocked || !homeConfig || !homeConfig.classList.contains('locked')){
          setLanguage(langBtn.dataset.lang);
        }
      }
      if (priceCheckerPanel && priceCheckerPanel.classList.contains('active')){
        if (!ev.target.closest('#price-checker-panel') && !ev.target.closest('#price-checker-toggle')){
          togglePriceChecker(false);
        }
      }
      if (utilityMenu && utilityMenu.classList.contains('active')){
        if (!ev.target.closest('.utility-bar')){
          closeUtilityMenu();
        }
      }
    });

    document.addEventListener('keydown', (ev)=>{
      if (ev.key === 'Escape'){
        togglePriceChecker(false);
        closeUtilityMenu();
        if (saleOverlay && saleOverlay.classList.contains('active')){
          closeSaleOverlay();
        }
      }
    });

    saleChoiceButtons.forEach(btn => {
      btn.addEventListener('click', ()=>{
        const choice = btn.dataset.choice === 'win' ? 'win' : 'loss';
        if (!ensureSaleStaffSelected(true)){
          const focusTarget = !state.session.liner ? saleStaffInputs.liner : saleStaffInputs.closer;
          if (focusTarget) focusTarget.focus();
          return;
        }
        showSaleForm(choice);
      });
    });

    saleBackButtons.forEach(btn => {
      btn.addEventListener('click', ()=>{
        resetSaleOverlay();
      });
    });

    if (saleForms.win){
      saleForms.win.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        recordSale('win', buildSaleEntry('win'));
      });
    }

    if (saleForms.loss){
      saleForms.loss.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        recordSale('loss', buildSaleEntry('loss'));
      });
    }

    if (downloadSalesReportBtn){
      downloadSalesReportBtn.addEventListener('click', downloadSalesReport);
    }
    
    // Settings tab buttons
    const downloadSalesReportBtnSettings = q('#download-sales-report-settings');
    const resetSalesBtnSettings = q('#reset-sales-btn-settings');
    
    if (downloadSalesReportBtnSettings){
      downloadSalesReportBtnSettings.addEventListener('click', downloadSalesReport);
    }
    
    if (resetSalesBtn){
      resetSalesBtn.addEventListener('click', ()=>{
        const message = getTranslation('analytics.resetConfirm') || 'Clear all sales history?';
        if (confirm(message)){
          resetSalesHistory();
        }
      });
    }
    
    if (resetSalesBtnSettings){
      resetSalesBtnSettings.addEventListener('click', ()=>{
        const message = getTranslation('analytics.resetConfirm') || 'Clear all sales history?';
        if (confirm(message)){
          resetSalesHistory();
        }
      });
    }

    if (saleOverlay){
      saleOverlay.addEventListener('click', (ev)=>{
        if (ev.target === saleOverlay){
          closeSaleOverlay();
        }
      });
    }

    updateSaleStats();
    updateReportControls();

    setLanguage(state.lang);

    // Desactivar actualización periódica para mantener precios estáticos
    updatePriceUI();

    initPromotionsViewer();

    function initPromotionsViewer(){
      const heroImage  = q('#promo-hero-image');
      const heroTitle  = q('#promo-hero-title');
      const heroDesc   = q('#promo-hero-description');
      const heroWindow = q('#promo-hero-window');
      const heroSeason = q('#promo-hero-season');
      const heroMarket = q('#promo-hero-market');
      const heroValue  = q('#promo-hero-value');
      const heroLegal  = q('#promo-hero-legal');
      const heroPrice  = q('#promo-hero-price');
      const heroNav    = q('#promo-hero-nav');
      const btnPrev    = q('#promo-hero-prev');
      const btnNext    = q('#promo-hero-next');
      const thumbs     = qa('.promo-thumb');
      const filterBtns = qa('.promo-filter-btn');

      if (!heroImage || !heroTitle || !thumbs.length) return;

      let gallery = [];
      let gIndex = 0;

      const setImg = (i)=>{
        if (!gallery.length) return;
        gIndex = (i + gallery.length) % gallery.length;
        const src = gallery[gIndex];
        heroImage.src = src;
      };

      const applyPromo = (btn)=>{
        if (!btn || !btn.dataset) return;
        const langKey = state.lang === 'es' ? 'Es' : 'En';
        const pick = (base)=> btn.dataset[`${base}${langKey}`] || btn.dataset[base.toLowerCase()] || btn.dataset[base] || '';
        const baseImg = btn.dataset.img;
        const galAttr = btn.dataset.gallery || '';
        gallery = (galAttr ? galAttr.split(',') : []).map(s => s.trim()).filter(Boolean);
        if (!gallery.length && baseImg) gallery = [baseImg];
        if (gallery.length) setImg(0);
        heroImage.alt = btn.dataset.alt || btn.dataset.title || 'UVC Promotion';
        if (heroNav) heroNav.style.display = gallery.length > 1 ? '' : 'none';
        if (heroTitle)  heroTitle.textContent  = pick('title');
        if (heroDesc)   heroDesc.textContent   = pick('desc');
        if (heroWindow) heroWindow.textContent = btn.dataset.window || '';
        if (heroSeason) heroSeason.textContent = pick('season');
        if (heroMarket) heroMarket.textContent = pick('market');
        if (heroValue)  heroValue.textContent  = pick('value');
        if (heroLegal)  heroLegal.textContent  = pick('legal');
        if (heroPrice)  heroPrice.textContent  = pick('banner') || pick('value');
      };

      if (btnPrev) btnPrev.addEventListener('click', ()=> setImg(gIndex - 1));
      if (btnNext) btnNext.addEventListener('click', ()=> setImg(gIndex + 1));

      // Filters
      const applyFilter = (key)=>{
        const token = (key || 'all').toLowerCase();
        let firstVisible = null;
        thumbs.forEach(btn => {
          const brands = (btn.dataset.brand || '').toLowerCase();
          const show = token === 'all' || brands.split(/\s+/).includes(token);
          btn.style.display = show ? '' : 'none';
          if (show && !firstVisible) firstVisible = btn;
        });
        const active = thumbs.find(b => b.classList.contains('active'));
        if (!active || active.style.display === 'none'){
          thumbs.forEach(t => t.classList.remove('active'));
          if (firstVisible){
            firstVisible.classList.add('active');
            applyPromo(firstVisible);
          }
        }
      };

      filterBtns.forEach(b => b.addEventListener('click', ()=>{
        filterBtns.forEach(x => x.classList.remove('active'));
        b.classList.add('active');
        applyFilter(b.dataset.filter || 'all');
      }));

      thumbs.forEach(btn => {
        btn.addEventListener('click', ()=>{
          if (btn.classList.contains('active')) return;
          thumbs.forEach(t => t.classList.remove('active'));
          btn.classList.add('active');
          applyPromo(btn);
        });
      });

      const first = thumbs.find(btn => btn.classList.contains('active')) || thumbs[0];
      applyPromo(first);
      // Ensure initial filter state
      applyFilter('all');
    }

    // Pausa TODOS los videos (menos uno opcional si lo quieres excluir)
    function stopAllVideos(exclude = null){
      qa('video').forEach(v => {
        if (exclude && v === exclude) return;
        try{
          v.pause();
          try{ v.currentTime = 0; }catch(e){}
          // Solo limpiamos sources del video de la galería (overlay)
          if (v.classList && v.classList.contains('gallery-video')){
            qa('source', v).forEach(s => s.remove());
            try{ v.removeAttribute('src'); }catch(e){}
          } else {
            v.load && v.load();
          }
        }catch(e){}
      });
    }

    // ---------- OVERLAY DE GALERÍA (IMÁGENES / VIDEO GRANDE) ----------
    function createGalleryOverlay(){
      const overlay = document.createElement('div');
      overlay.id = 'gallery-overlay';
      overlay.innerHTML = `
        <button class="gallery-close" aria-label="Cerrar">&times;</button>
        <button class="gallery-prev" aria-label="Anterior">‹</button>
        <img class="gallery-img" src="" alt="">
        <video class="gallery-video" controls playsinline style="display:none"></video>
        <div class="gallery-caption"></div>
        <button class="gallery-next" aria-label="Siguiente">›</button>
      `;
      document.body.appendChild(overlay);

      const imgEl   = q('.gallery-img', overlay);
      const vidEl   = q('.gallery-video', overlay);
      const caption = q('.gallery-caption', overlay);
      const btnClose= q('.gallery-close', overlay);
      const btnPrev = q('.gallery-prev', overlay);
      const btnNext = q('.gallery-next', overlay);

      let list  = [];
      let index = 0;

      function render(){
        const item = list[index];
        if (!item) return;

        if (item.type === 'video'){
          imgEl.style.display = 'none';
          vidEl.style.display = 'block';
          try{
            vidEl.pause();
            vidEl.removeAttribute('src');
            qa('source', vidEl).forEach(s=>s.remove());
            const s = document.createElement('source');
            s.src = item.src;
            if (/\.mp4/i.test(item.src)) s.type='video/mp4';
            vidEl.appendChild(s);
            vidEl.load();
            vidEl.currentTime = 0;
            vidEl.play().catch(()=>{});
          }catch(e){}
        } else {
          try{
            vidEl.pause();
            vidEl.removeAttribute('src');
            qa('source', vidEl).forEach(s=>s.remove());
          }catch(e){}
          vidEl.style.display = 'none';
          imgEl.style.display = 'block';
          imgEl.src = item.src;
        }

        if (item.caption && item.caption.trim()){
          caption.innerHTML = item.caption;
          caption.style.display = 'block';
        } else {
          caption.innerHTML = '';
          caption.style.display = 'none';
        }
      }

      function open(items, i=0, large=false){
        // Apagar todos los videos antes de abrir la galería grande
        stopAllVideos();

        list  = items.slice();
        index = i || 0;
        overlay.classList.toggle('large', !!large);
        render();
        overlay.classList.add('active');
        document.addEventListener('keydown', onKey);
      }

      function close(){
        overlay.classList.remove('active');
        try{
          vidEl.pause();
          vidEl.removeAttribute('src');
          qa('source', vidEl).forEach(s=>s.remove());
        }catch(e){}
        document.removeEventListener('keydown', onKey);
      }

      function show(i){
        if (!list.length) return;
        index = (i + list.length) % list.length;
        render();
      }

      function onKey(e){
        if (e.key === 'Escape')      close();
        if (e.key === 'ArrowLeft')  show(index-1);
        if (e.key === 'ArrowRight') show(index+1);
      }

      btnClose.addEventListener('click', close);
      btnPrev.addEventListener('click', ()=> show(index-1));
      btnNext.addEventListener('click', ()=> show(index+1));

      overlay.addEventListener('click', (ev)=>{
        if (ev.target === overlay) close();
      });

      return { open, close };
    }

    const gallery = createGalleryOverlay();

    // ---------- ABRIR / CERRAR MODALES DE MARCAS ----------
    document.addEventListener('click', (ev)=>{
      const btn = ev.target.closest('[data-modal]');
      if (btn){
        ev.preventDefault();
        const key = btn.getAttribute('data-modal');
        const overlay = document.getElementById('modal-' + key);
        if (overlay){
          overlay.classList.add('active');
          const v = q('video', overlay);
          if (v){
            try{
              // Apagamos todos los demás videos excepto el que se va a mostrar
              stopAllVideos(v);
              v.setAttribute('playsinline', '');
              v.setAttribute('webkit-playsinline', '');
              v.currentTime = 0;
              v.load && v.load();
              v.play().catch(()=>{});
            }catch(e){}
          }
        }
      }

      const closeBtn = ev.target.closest('[data-close]');
      if (closeBtn){
        const overlay = closeBtn.closest('.modal-overlay');
        if (overlay){
          overlay.classList.remove('active');
          const v = q('video', overlay);
          if (v){
            try{
              v.pause();
              v.currentTime = 0;
            }catch(e){}
          }
        }
      }
    });

    // Cerrar modal haciendo clic fuera de la tarjeta
    qa('.modal-overlay').forEach(o =>
      o.addEventListener('click', (ev) => {
        if (ev.target === o){
          o.classList.remove('active');
          const v = q('video', o);
          if (v){
            try{
              v.pause();
              v.currentTime = 0;
            }catch(e){}
          }
        }
      })
    );

    // ---------- LÓGICA PARA GALERÍAS DE IMÁGENES / VIDEOS ----------
    function looksLikeVideo(url){
      return !!(url && /\.(mp4|webm|ogg)(\?|$)/i.test(url));
    }

    function buildItemsFromGallery(galleryEl){
      const thumbs = qa('img', galleryEl);
      return thumbs.map(img => {
        const dataVideo   = img.dataset.video || '';
        const srcCandidate= dataVideo || img.dataset.full || img.src || '';
        const isVideo     = !!dataVideo || looksLikeVideo(srcCandidate);
        return {
          type: isVideo ? 'video' : 'image',
          src:  srcCandidate,
          caption: img.dataset.caption || img.alt || ''
        };
      });
    }

    // Click en miniaturas dentro de un modal
    document.addEventListener('click', (ev)=>{
      const thumb = ev.target.closest('.modal-gallery img');
      if (!thumb) return;

      ev.stopPropagation();
      const parentGallery = thumb.closest('.modal-gallery');
      const parentModal   = thumb.closest('.modal-overlay');
      const items         = buildItemsFromGallery(parentGallery);
      const idx           = Array.prototype.indexOf.call(parentGallery.querySelectorAll('img'), thumb);
      const isHyatt       = parentModal && parentModal.id === 'modal-hyatt';

      const explicitVideo = thumb.dataset.video;
      const candidate     = explicitVideo || thumb.dataset.full || thumb.src || '';
      const isVideo       = !!explicitVideo || looksLikeVideo(candidate);

      // Caso especial: en Hyatt puedes cambiar el video principal del modal
      if (isHyatt && isVideo){
        const mainVid = q('#hyatt-main-video', parentModal);
        if (mainVid){
          stopAllVideos(mainVid);
          try{
            const src = encodeURI(explicitVideo || candidate);
            qa('source', mainVid).forEach(s => s.remove());
            try{ mainVid.removeAttribute('src'); }catch(e){}
            const ns = document.createElement('source');
            ns.src = src;
            if (/\.mp4/i.test(src)) ns.type='video/mp4';
            mainVid.appendChild(ns);
            if (thumb.dataset.caption) mainVid.dataset.caption = thumb.dataset.caption;
            mainVid.load();
            mainVid.currentTime = 0;
            mainVid.play().catch(()=>{});
          }catch(e){}
          return;
        }
      }

      // Para Zoëtry (y cualquier otra): abrir overlay grande
      const large = parentModal && (parentModal.id === 'modal-zoetry' || parentModal.id === 'modal-hyatt');
      gallery.open(items, idx, large);
    });

    // ---------- DOBLE CLICK EN EL VIDEO PRINCIPAL (Zoëtry / Hyatt) ----------
    function attachDblToMain(id){
      const el = document.getElementById(id);
      if (!el) return;

      el.addEventListener('dblclick', ()=>{
        const parentModal = el.closest('.modal-overlay');
        if (!parentModal) return;

        // Apagar todos los videos, incluido Zoëtry, antes de abrir el grande
        stopAllVideos();

        const items = [];
        const src   = el.currentSrc || el.src || (q('source', el) && q('source', el).src);
        if (src){
          items.push({
            type: 'video',
            src:  src,
            caption: el.dataset.caption || ''
          });
        }
        const galleryEl = parentModal.querySelector('.modal-gallery');
        if (galleryEl){
          items.push(...buildItemsFromGallery(galleryEl));
        }
        const large = parentModal.id === 'modal-zoetry' || parentModal.id === 'modal-hyatt';
        gallery.open(items, 0, large);
      });
    }

    attachDblToMain('hyatt-main-video');
    attachDblToMain('zoetry-main-video');

    // ==================== FULLSCREEN FUNCTIONALITY ====================
    const fullscreenBtn = q('#fullscreen-btn');
    const fullscreenIcon = q('#fullscreen-icon');
    
    if (fullscreenBtn) {
      fullscreenBtn.addEventListener('click', () => {
        if (!document.fullscreenElement) {
          // Entrar en fullscreen
          if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
          } else if (document.documentElement.webkitRequestFullscreen) {
            document.documentElement.webkitRequestFullscreen();
          } else if (document.documentElement.msRequestFullscreen) {
            document.documentElement.msRequestFullscreen();
          }
        } else {
          // Salir de fullscreen
          if (document.exitFullscreen) {
            document.exitFullscreen();
          } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
          }
        }
      });
      
      // Actualizar icono cuando cambia el estado de fullscreen
      document.addEventListener('fullscreenchange', updateFullscreenIcon);
      document.addEventListener('webkitfullscreenchange', updateFullscreenIcon);
      document.addEventListener('msfullscreenchange', updateFullscreenIcon);
      
      function updateFullscreenIcon() {
        if (document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
          fullscreenIcon.textContent = '⛶'; // Icono para salir de fullscreen
        } else {
          fullscreenIcon.textContent = '⛶'; // Icono para entrar a fullscreen
        }
      }
    }

    // Auto-hide cursor en fullscreen después de inactividad
    let hideTimeout;
    let isFullscreen = false;
    
    function resetHideTimer() {
      clearTimeout(hideTimeout);
      document.body.style.cursor = 'default';
      if (isFullscreen) {
        hideTimeout = setTimeout(() => {
          document.body.style.cursor = 'none';
        }, 3000);
      }
    }
    
    document.addEventListener('fullscreenchange', () => {
      isFullscreen = !!document.fullscreenElement;
      if (!isFullscreen) {
        document.body.style.cursor = 'default';
        clearTimeout(hideTimeout);
      }
    });
    
    document.addEventListener('mousemove', resetHideTimer);
    document.addEventListener('click', resetHideTimer);

    // AUTO-APLICAR PRECIOS AL CARGAR LA PÁGINA
    // Si ya hay precios guardados en admin, aplicarlos automáticamente
    setTimeout(() => {
      const stored = localStorage.getItem('uvc_base_prices');
      if (stored) {
        try {
          const basePrices = JSON.parse(stored);
          state.lockedPrices = true;
          const setProp = (idx, src) => {
            const prop = ensureProperty(idx);
            prop.prices.booking = Number(src.booking) || 0;
            prop.prices.expedia = Number(src.expedia) || 0;
            prop.prices.despegar = Number(src.despegar) || 0;
            syncDynamicBase(idx, 'booking', prop.prices.booking);
            syncDynamicBase(idx, 'expedia', prop.prices.expedia);
            syncDynamicBase(idx, 'despegar', prop.prices.despegar);
          };
          setProp(0, basePrices.secrets);
          setProp(1, basePrices.zoetry);
        } catch {}
        console.log('✅ Auto-aplicando precios guardados (fijados) sin variación...');
        updatePriceUI();
      }
    }, 500);

  })();
  </script>
</body>
</html>
